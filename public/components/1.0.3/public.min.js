"use strict";function getNumArr(e,t){var o=findJsonData(e,t),a=getPosNum(e,o);return a}function findJsonData(e,t){if(null==e)return t;for(var o=[],a=t.length,r=0,n=0;n<a;n++){var i=t[n].n;i.indexOf(e)!=-1&&(o[r]=i,r+=1)}return o}function getPosNum(e,t){if(null==e||null==t)return null;for(var o=e.length,a=new Array,r=t.length,n=0;n<r;n++){var i=t[n],c=i.substring(o,o+1);null!=a&&a.indexOf(c)==-1&&a.push(c)}return a}function isScroller(e){return e.classList.contains("content-scrollable")}function getIndex(e,t,o){for(var a=0;a<e.length;a++)if(e[a][t]==o)return a}function Map(){var e=function(e,t){this.key=e,this.value=t},t=function(t,o){for(var a=0;a<this.arr.length;a++)if(this.arr[a].key===t)return void(this.arr[a].value=o);this.arr[this.arr.length]=new e(t,o)},o=function(e){for(var t=0;t<this.arr.length;t++)if(this.arr[t].key===e)return this.arr[t].value;return null},a=function(e){for(var t,o=0;o<this.arr.length;o++)t=this.arr.pop(),t.key!==e&&this.arr.unshift(t)},r=function(){return this.arr.length},n=function(){return this.arr.length<=0};this.arr=new Array,this.get=o,this.put=t,this.remove=a,this.size=r,this.isEmpty=n}function operation(){var e="",t="",o="",a=null,r=window.location.href;this.init=function(a,r,n){e=a,t=r,o=n},this.record=function(e){return null!=e&&(a=new Map,a.put("operation",e),void this.writeOperation())},this.writeOperation=function(){var e=!1,t="flow="+r+"&operation="+a.get("operation");t=t.replace("?","&");var o=cfApi.apiHost+"/record/writeLog.html?"+t+"&s=wap";return $.ajax({type:"get",url:o,dataType:"jsonp",jsonp:"callback",jsonpCallback:"callback",success:function(e){},error:function(){}}),e},this.writeIntentionMsg=function(e,t,o,a){var r=cfApi.apiHost+"/record/intentionLog.html";$.get(r,{operationName:e,operationValue:t,dataType:o,opSeq:a},function(e){})}}function writebdLog(e,t,o,a){_hmt.push(["_trackEvent",e,e+t,o,a]),op.record(encodeURI(e+t))}function androidInputBugFix(){/Android/gi.test(navigator.userAgent)&&window.addEventListener("resize",function(){"INPUT"!=document.activeElement.tagName&&"TEXTAREA"!=document.activeElement.tagName||window.setTimeout(function(){document.activeElement.scrollIntoViewIfNeeded()},0)})}function getMeiqia(){!function(e,t,o,a,r,n,i){e[r]=e[r]||function(){(e[r].a=e[r].a||[]).push(arguments)},n=t.createElement(o),i=t.getElementsByTagName(o)[0],n.async=!0,n.charset="UTF-8",n.src=a+"?v="+(new Date).getUTCDate(),i.parentNode.insertBefore(n,i)}(window,document,"script","//static.meiqia.com/dist/meiqia.js","_MEIQIA"),_MEIQIA("entId",27864),_MEIQIA("withoutBtn")}function showToast(){var e=$("#loadingToast");"none"==e.css("display")&&e.fadeIn(100)}function hideToast(){var e=$("#loadingToast");e.fadeOut(100)}function checkMobileCode(e,t){var o=!1;return $.ajax({url:"http://app.yfq.cn:3099/api/checkActiveCode/"+e+"/"+t,async:!1,type:"get",success:function(e){"true"==e&&(o=!0)}}),o}function showTheActionSheet(e){$(e).addClass("weui-actionsheet_toggle"),$(e).find(".weui-media-box__thumb").show(),$(e).siblings(".ios-mask").fadeIn(200)}function hideTheActionSheet(e){$(e).removeClass("weui-actionsheet_toggle"),$(e).find(".weui-media-box__thumb").hide(),$(e).siblings(".ios-mask").fadeOut(200)}function getRandomName(){var e,t;e=["卢","钟","朱","彭","梁","卫","蒋","许","张","孔","沈","郑","赵","周","吕","韩","尤","秦","楮","李"],t=["先生","女士"];var o=Math.round(19*Math.random()),a=Math.round(1*Math.random());return e[o]+t[a]}function getRanDomTime(){var e=Math.round(1*Math.random());return baseTime+=e,baseTime>10&&(baseTime=Math.round(1*Math.random())+1),baseTime}function getRandomPkg(){var e,t;return e=[101,102,155,156],t=Math.round(3*Math.random()),e[t]}function getRandomPrePhone(){var e,t;return e=["130","131","132","138","139","150"],t=Math.round(5*Math.random()),e[t]}function getRandomPhone(){return"18122XXX"+Math.round(9*Math.random())+Math.round(9*Math.random())+Math.round(9*Math.random())+Math.round(9*Math.random())}function getRandomReceiverPhone(){return getRandomPrePhone()+Math.round(9*Math.random())+Math.round(9*Math.random())+"XXX"+Math.round(9*Math.random())+Math.round(9*Math.random())+Math.round(9*Math.random())+Math.round(9*Math.random())}function getRandomProduct(){var e;e=["iPhone 7","iPhone 7 Plus","VIVO X7","OPPO R9","小米5S","华为P9"];var t=Math.round(5*Math.random());return e[t]}function checkSameNumber(e,t){return e!==t}function getJM(e,t){for(var o=0;o<=t/5;o++){if(100*o==e)return 5*o;if(100*o>e)return 5*(o-1);if(100*o<e&&5*o>=t)return t}}function getMX(e,t,o){var a=.1;return o&&(a=o),e>7680?768:Math.round(e*a)}var app=angular.module("app",["ui.router","appServices","appTemplates","ngAnimate","ngCookies","appFilters"]),baseApiUri="http://app.gd189fq.com:3099/api";app.config(["$stateProvider","$urlRouterProvider","$locationProvider",function(e,t,o){o.html5Mode(!0).hashPrefix("!"),t.otherwise(function(){return"/phone/active/D/phones"+window.location.search})}]).run(["$rootScope",function(e){}]);var systemName="yfqapp",userTrack=function(){},$container=$("#container");$container.on("click",".js-menu",function(e){$("#container").addClass("menu-open"),$("#menu").click(function(){$("#container").removeClass("menu-open")})}),$(".content-overlay").click(function(e){$("#container").removeClass("menu-open")}),$(document).ready(function(){$("html").css("font-size",$container.width()/375*parseInt($("html").css("font-size")))}),Array.prototype.remove=function(e,t){var o=this.slice((t||e)+1||this.length);return this.length=e<0?this.length+e:e,this.push.apply(this,o)},document.body.addEventListener("touchmove",function(e){var t=e.target;isScroller(t)&&e.stopPropagation()},!1);var op=new operation;!function(){var e=jQuery.event.special,t="D"+ +new Date,o="D"+(+new Date+1);e.scrollstart={setup:function(){var o,a=function(t){var a=this,r=arguments;o?clearTimeout(o):(t.type="scrollstart",jQuery.event.dispatch.apply(a,r)),o=setTimeout(function(){o=null},e.scrollstop.latency)};jQuery(this).bind("scroll",a).data(t,a)},teardown:function(){jQuery(this).unbind("scroll",jQuery(this).data(t))}},e.scrollstop={latency:300,setup:function(){var t,a=function(o){var a=this,r=arguments;t&&clearTimeout(t),t=setTimeout(function(){t=null,o.type="scrollstop",jQuery.event.dispatch.apply(a,r)},e.scrollstop.latency)};jQuery(this).bind("scroll",a).data(o,a)},teardown:function(){jQuery(this).unbind("scroll",jQuery(this).data(o))}}}(),$(function(){function e(){o.removeClass("weui-actionsheet_toggle"),a.fadeOut(200)}function t(){o.addClass("weui-actionsheet_toggle"),a.fadeIn(200)}var o=$("#iosActionsheet"),a=$(".ios-mask");$(".js-action-sheet-hide").on("click",e),$(".js-action-sheet-show").on("click",t),a.on("click",e),$("#iosActionsheetCancel").on("click",e),$("#showIOSActionSheet").on("click",t)}),$(function(){$("#container").on("click",".weui-navbar__item",function(){$(this).addClass("weui-bar__item_on").siblings(".weui-bar__item_on").removeClass("weui-bar__item_on"),$(this).parent().next().find(".weui-tab__item").removeClass("weui-tab__item_on"),$(this).parent().next().find(".weui-tab__item").eq($(this).index()).addClass("weui-tab__item_on")})}),$(function(){$("#container").on("click",".list-tabs .tab-item",function(){var e=$(".phone-list"),t=$(this);t.siblings().removeClass("on"),e.hide(),t.addClass("on"),e.eq(t.index()).show(),1==t.index()?($("#recommend").hide(),$("#recommendTitle").hide()):($("#recommend").show(),$("#recommendTitle").show())})});var baseTime=1,appFilters=angular.module("appFilters",[]);appFilters.filter("trustHtml",["$sce",function(e){return function(t){return e.trustAsHtml(t)}}]),appFilters.filter("MB",function(){return function(e){var t=1024;Math.floor(Math.log(e)/Math.log(t));return e/t}}),appFilters.filter("GB",function(){return function(e){var t=1024,o=1024;return e/t/o}}),appFilters.filter("replaceS",function(){return function(e,t){if(void 0!=t||null!=t||""!=t)return e.replace(new RegExp(t,"g"),"<em>"+t+"</em>")}}),appFilters.filter("replaceInput",function(){return function(e,t){return void 0!=t&&""!=t?e.replace(new RegExp(t,"g"),"<em>"+t+"</em>"):e}}),appFilters.filter("onlyNumber",function(){return function(e){return e.replace(new RegExp(key,"g"),"<em>"+key+"</em>")}}),appFilters.filter("formatMoney",function(){return function(e,t){if(void 0!=e)return e.slice(0,t)+"<sub style='font-size:75%'>"+e.substr(t)+"</sub>"}}),appFilters.filter("formatPhone",function(){return function(e){var t=e.slice(0,-4)+" "+e.substr(-4);return t.slice(0,3)+" "+t.substr(3)}}),appFilters.filter("doubleName",function(){return function(e,t){return e=e.split(" + "),1==t?e[1]:e[0]}}),appFilters.filter("range",function(){return function(e,t,o){if(angular.isArray(e)&&angular.isNumber(t)&&angular.isNumber(o))return e.length<t?e:e.slice(t,o)}}),appFilters.filter("jm",function(){return function(e,t){for(var o=0;o<=t/5;o++){if(100*o==e)return 5*o;if(100*o>e)return 5*(o-1);if(100*o<e&&5*o>=t)return t}}}),appFilters.filter("mx",function(){return function(e){return e>7680?768:Math.round(.1*e)}}),appFilters.filter("numberUp",function(){return function(e){return Math.ceil(e)}}),appFilters.filter("numberDown",function(){return function(e){return Math.floor(e)}}),appFilters.filter("mp",function(){return function(e){return 0==e?"&mp=0":""}}),appFilters.filter("phoneFilter",function(){return function(e){return e.substr(0,4)+"****"+e.substr(8,11)}});var appServices=angular.module("appServices",["ngResource"]);appServices.factory("FlowPackages",["$resource",function(e){return e("http://app.gd189fq.com:3099/api/getFlowPackages/:cardType",null,{query:{method:"GET",params:{cardType:"0"},isArray:!0}})}]),appServices.factory("Phone",["$resource","$q",function(e,t){return e("/data/phones/:phoneId.json",{},{query:{method:"GET",params:{phoneId:"phones"},isArray:!0}})}]),function(){var e,t,o,a,r,n,i,c,s=[].slice,p={}.hasOwnProperty,l=function(e,t){function o(){this.constructor=e}for(var a in t)p.call(t,a)&&(e[a]=t[a]);return o.prototype=t.prototype,e.prototype=new o,e.__super__=t.prototype,e};i=function(){},t=function(){function e(){}return e.prototype.addEventListener=e.prototype.on,e.prototype.on=function(e,t){return this._callbacks=this._callbacks||{},this._callbacks[e]||(this._callbacks[e]=[]),this._callbacks[e].push(t),this},e.prototype.emit=function(){var e,t,o,a,r,n;if(a=arguments[0],e=2<=arguments.length?s.call(arguments,1):[],this._callbacks=this._callbacks||{},o=this._callbacks[a])for(r=0,n=o.length;n>r;r++)t=o[r],t.apply(this,e);return this},e.prototype.removeListener=e.prototype.off,e.prototype.removeAllListeners=e.prototype.off,e.prototype.removeEventListener=e.prototype.off,e.prototype.off=function(e,t){var o,a,r,n,i;if(!this._callbacks||0===arguments.length)return this._callbacks={},this;if(a=this._callbacks[e],!a)return this;if(1===arguments.length)return delete this._callbacks[e],this;for(r=n=0,i=a.length;i>n;r=++n)if(o=a[r],o===t){a.splice(r,1);break}return this},e}(),e=function(e){function o(e,t){var r,n,i;if(this.element=e,this.version=o.version,this.defaultOptions.previewTemplate=this.defaultOptions.previewTemplate.replace(/\n*/g,""),this.clickableElements=[],this.listeners=[],this.files=[],"string"==typeof this.element&&(this.element=document.querySelector(this.element)),!this.element||null==this.element.nodeType)throw new Error("Invalid dropzone element.");if(this.element.dropzone)throw new Error("Dropzone already attached.");if(o.instances.push(this),this.element.dropzone=this,r=null!=(i=o.optionsForElement(this.element))?i:{},this.options=a({},this.defaultOptions,r,null!=t?t:{}),this.options.forceFallback||!o.isBrowserSupported())return this.options.fallback.call(this);if(null==this.options.url&&(this.options.url=this.element.getAttribute("action")),!this.options.url)throw new Error("No URL provided.");if(this.options.acceptedFiles&&this.options.acceptedMimeTypes)throw new Error("You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.");this.options.acceptedMimeTypes&&(this.options.acceptedFiles=this.options.acceptedMimeTypes,delete this.options.acceptedMimeTypes),this.options.method=this.options.method.toUpperCase(),(n=this.getExistingFallback())&&n.parentNode&&n.parentNode.removeChild(n),this.options.previewsContainer!==!1&&(this.previewsContainer=this.options.previewsContainer?o.getElement(this.options.previewsContainer,"previewsContainer"):this.element),this.options.clickable&&(this.clickableElements=this.options.clickable===!0?[this.element]:o.getElements(this.options.clickable,"clickable")),this.init()}var a,r;return l(o,e),o.prototype.Emitter=t,o.prototype.events=["drop","dragstart","dragend","dragenter","dragover","dragleave","addedfile","addedfiles","removedfile","thumbnail","error","errormultiple","processing","processingmultiple","uploadprogress","totaluploadprogress","sending","sendingmultiple","success","successmultiple","canceled","canceledmultiple","complete","completemultiple","reset","maxfilesexceeded","maxfilesreached","queuecomplete"],o.prototype.defaultOptions={url:null,method:"post",withCredentials:!1,parallelUploads:2,uploadMultiple:!1,maxFilesize:256,paramName:"file",createImageThumbnails:!0,maxThumbnailFilesize:10,thumbnailWidth:120,thumbnailHeight:120,filesizeBase:1e3,maxFiles:null,params:{},clickable:!0,ignoreHiddenFiles:!0,acceptedFiles:null,acceptedMimeTypes:null,autoProcessQueue:!0,autoQueue:!0,addRemoveLinks:!1,previewsContainer:null,hiddenInputContainer:"body",capture:null,renameFilename:null,dictDefaultMessage:"Drop files here to upload",dictFallbackMessage:"Your browser does not support drag'n'drop file uploads.",dictFallbackText:"Please use the fallback form below to upload your files like in the olden days.",dictFileTooBig:"File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.",dictInvalidFileType:"You can't upload files of this type.",dictResponseError:"Server responded with {{statusCode}} code.",dictCancelUpload:"Cancel upload",dictCancelUploadConfirmation:"Are you sure you want to cancel this upload?",dictRemoveFile:"Remove file",dictRemoveFileConfirmation:null,dictMaxFilesExceeded:"You can not upload any more files.",accept:function(e,t){return t()},init:function(){return i},forceFallback:!1,fallback:function(){var e,t,a,r,n,i;for(this.element.className=""+this.element.className+" dz-browser-not-supported",i=this.element.getElementsByTagName("div"),r=0,n=i.length;n>r;r++)e=i[r],/(^| )dz-message($| )/.test(e.className)&&(t=e,e.className="dz-message");return t||(t=o.createElement('<div class="dz-message"><span></span></div>'),this.element.appendChild(t)),a=t.getElementsByTagName("span")[0],a&&(null!=a.textContent?a.textContent=this.options.dictFallbackMessage:null!=a.innerText&&(a.innerText=this.options.dictFallbackMessage)),this.element.appendChild(this.getFallbackForm())},resize:function(e){var t,o,a;return t={srcX:0,srcY:0,srcWidth:e.width,srcHeight:e.height},o=e.width/e.height,t.optWidth=this.options.thumbnailWidth,t.optHeight=this.options.thumbnailHeight,null==t.optWidth&&null==t.optHeight?(t.optWidth=t.srcWidth,t.optHeight=t.srcHeight):null==t.optWidth?t.optWidth=o*t.optHeight:null==t.optHeight&&(t.optHeight=1/o*t.optWidth),a=t.optWidth/t.optHeight,e.height<t.optHeight||e.width<t.optWidth?(t.trgHeight=t.srcHeight,t.trgWidth=t.srcWidth):o>a?(t.srcHeight=e.height,t.srcWidth=t.srcHeight*a):(t.srcWidth=e.width,t.srcHeight=t.srcWidth/a),t.srcX=(e.width-t.srcWidth)/2,t.srcY=(e.height-t.srcHeight)/2,t},drop:function(){return this.element.classList.remove("dz-drag-hover")},dragstart:i,dragend:function(){return this.element.classList.remove("dz-drag-hover")},dragenter:function(){return this.element.classList.add("dz-drag-hover")},dragover:function(){return this.element.classList.add("dz-drag-hover")},dragleave:function(){return this.element.classList.remove("dz-drag-hover")},paste:i,reset:function(){return this.element.classList.remove("dz-started")},addedfile:function(e){var t,a,r,n,i,c,s,p,l,u,d,h,m;if(this.element===this.previewsContainer&&this.element.classList.add("dz-started"),this.previewsContainer){for(e.previewElement=o.createElement(this.options.previewTemplate.trim()),e.previewTemplate=e.previewElement,this.previewsContainer.appendChild(e.previewElement),u=e.previewElement.querySelectorAll("[data-dz-name]"),n=0,s=u.length;s>n;n++)t=u[n],t.textContent=this._renameFilename(e.name);for(d=e.previewElement.querySelectorAll("[data-dz-size]"),i=0,p=d.length;p>i;i++)t=d[i],t.innerHTML=this.filesize(e.size);for(this.options.addRemoveLinks&&(e._removeLink=o.createElement('<a class="dz-remove" href="javascript:undefined;" data-dz-remove>'+this.options.dictRemoveFile+"</a>"),e.previewElement.appendChild(e._removeLink)),a=function(t){return function(a){return a.preventDefault(),a.stopPropagation(),e.status===o.UPLOADING?o.confirm(t.options.dictCancelUploadConfirmation,function(){return t.removeFile(e)}):t.options.dictRemoveFileConfirmation?o.confirm(t.options.dictRemoveFileConfirmation,function(){return t.removeFile(e)}):t.removeFile(e)}}(this),h=e.previewElement.querySelectorAll("[data-dz-remove]"),m=[],c=0,l=h.length;l>c;c++)r=h[c],m.push(r.addEventListener("click",a));return m}},removedfile:function(e){var t;return e.previewElement&&null!=(t=e.previewElement)&&t.parentNode.removeChild(e.previewElement),this._updateMaxFilesReachedClass()},thumbnail:function(e,t){var o,a,r,n;if(e.previewElement){for(e.previewElement.classList.remove("dz-file-preview"),n=e.previewElement.querySelectorAll("[data-dz-thumbnail]"),a=0,r=n.length;r>a;a++)o=n[a],o.alt=e.name,o.src=t;return setTimeout(function(){return function(){return e.previewElement.classList.add("dz-image-preview")}}(this),1)}},error:function(e,t){var o,a,r,n,i;if(e.previewElement){for(e.previewElement.classList.add("dz-error"),"String"!=typeof t&&t.error&&(t=t.error),n=e.previewElement.querySelectorAll("[data-dz-errormessage]"),i=[],a=0,r=n.length;r>a;a++)o=n[a],i.push(o.textContent=t);return i}},errormultiple:i,processing:function(e){return e.previewElement&&(e.previewElement.classList.add("dz-processing"),e._removeLink)?e._removeLink.textContent=this.options.dictCancelUpload:void 0},processingmultiple:i,uploadprogress:function(e,t){var o,a,r,n,i;if(e.previewElement){for(n=e.previewElement.querySelectorAll("[data-dz-uploadprogress]"),i=[],a=0,r=n.length;r>a;a++)o=n[a],i.push("PROGRESS"===o.nodeName?o.value=t:o.style.width=""+t+"%");return i}},totaluploadprogress:i,sending:i,sendingmultiple:i,success:function(e){return e.previewElement?e.previewElement.classList.add("dz-success"):void 0},successmultiple:i,canceled:function(e){return this.emit("error",e,"Upload canceled.")},canceledmultiple:i,complete:function(e){return e._removeLink&&(e._removeLink.textContent=this.options.dictRemoveFile),e.previewElement?e.previewElement.classList.add("dz-complete"):void 0},completemultiple:i,maxfilesexceeded:i,maxfilesreached:i,queuecomplete:i,addedfiles:i,previewTemplate:'<div class="dz-preview dz-file-preview">\n  <div class="dz-image"><img data-dz-thumbnail /></div>\n  <div class="dz-details">\n    <div class="dz-size"><span data-dz-size></span></div>\n    <div class="dz-filename"><span data-dz-name></span></div>\n  </div>\n  <div class="dz-progress"><span class="dz-upload" data-dz-uploadprogress></span></div>\n  <div class="dz-error-message"><span data-dz-errormessage></span></div>\n  <div class="dz-success-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n      <title>Check</title>\n      <defs></defs>\n      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <path d="M23.5,31.8431458 L17.5852419,25.9283877 C16.0248253,24.3679711 13.4910294,24.366835 11.9289322,25.9289322 C10.3700136,27.4878508 10.3665912,30.0234455 11.9283877,31.5852419 L20.4147581,40.0716123 C20.5133999,40.1702541 20.6159315,40.2626649 20.7218615,40.3488435 C22.2835669,41.8725651 24.794234,41.8626202 26.3461564,40.3106978 L43.3106978,23.3461564 C44.8771021,21.7797521 44.8758057,19.2483887 43.3137085,17.6862915 C41.7547899,16.1273729 39.2176035,16.1255422 37.6538436,17.6893022 L23.5,31.8431458 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" id="Oval-2" stroke-opacity="0.198794158" stroke="#747474" fill-opacity="0.816519475" fill="#FFFFFF" sketch:type="MSShapeGroup"></path>\n      </g>\n    </svg>\n  </div>\n  <div class="dz-error-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n      <title>Error</title>\n      <defs></defs>\n      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <g id="Check-+-Oval-2" sketch:type="MSLayerGroup" stroke="#747474" stroke-opacity="0.198794158" fill="#FFFFFF" fill-opacity="0.816519475">\n          <path d="M32.6568542,29 L38.3106978,23.3461564 C39.8771021,21.7797521 39.8758057,19.2483887 38.3137085,17.6862915 C36.7547899,16.1273729 34.2176035,16.1255422 32.6538436,17.6893022 L27,23.3431458 L21.3461564,17.6893022 C19.7823965,16.1255422 17.2452101,16.1273729 15.6862915,17.6862915 C14.1241943,19.2483887 14.1228979,21.7797521 15.6893022,23.3461564 L21.3431458,29 L15.6893022,34.6538436 C14.1228979,36.2202479 14.1241943,38.7516113 15.6862915,40.3137085 C17.2452101,41.8726271 19.7823965,41.8744578 21.3461564,40.3106978 L27,34.6568542 L32.6538436,40.3106978 C34.2176035,41.8744578 36.7547899,41.8726271 38.3137085,40.3137085 C39.8758057,38.7516113 39.8771021,36.2202479 38.3106978,34.6538436 L32.6568542,29 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" id="Oval-2" sketch:type="MSShapeGroup"></path>\n        </g>\n      </g>\n    </svg>\n  </div>\n</div>'},a=function(){var e,t,o,a,r,n,i;for(a=arguments[0],o=2<=arguments.length?s.call(arguments,1):[],n=0,i=o.length;i>n;n++){t=o[n];for(e in t)r=t[e],a[e]=r}return a},o.prototype.getAcceptedFiles=function(){var e,t,o,a,r;for(a=this.files,r=[],t=0,o=a.length;o>t;t++)e=a[t],e.accepted&&r.push(e);return r},o.prototype.getRejectedFiles=function(){var e,t,o,a,r;for(a=this.files,r=[],t=0,o=a.length;o>t;t++)e=a[t],e.accepted||r.push(e);return r},o.prototype.getFilesWithStatus=function(e){var t,o,a,r,n;for(r=this.files,n=[],o=0,a=r.length;a>o;o++)t=r[o],t.status===e&&n.push(t);return n},o.prototype.getQueuedFiles=function(){return this.getFilesWithStatus(o.QUEUED)},o.prototype.getUploadingFiles=function(){return this.getFilesWithStatus(o.UPLOADING)},o.prototype.getAddedFiles=function(){return this.getFilesWithStatus(o.ADDED)},o.prototype.getActiveFiles=function(){var e,t,a,r,n;for(r=this.files,n=[],t=0,a=r.length;a>t;t++)e=r[t],(e.status===o.UPLOADING||e.status===o.QUEUED)&&n.push(e);return n},o.prototype.init=function(){var e,t,a,r,n,i,c;for("form"===this.element.tagName&&this.element.setAttribute("enctype","multipart/form-data"),this.element.classList.contains("dropzone")&&!this.element.querySelector(".dz-message")&&this.element.appendChild(o.createElement('<div class="dz-default dz-message"><span>'+this.options.dictDefaultMessage+"</span></div>")),this.clickableElements.length&&(a=function(e){return function(){return e.hiddenFileInput&&e.hiddenFileInput.parentNode.removeChild(e.hiddenFileInput),e.hiddenFileInput=document.createElement("input"),e.hiddenFileInput.setAttribute("type","file"),(null==e.options.maxFiles||e.options.maxFiles>1)&&e.hiddenFileInput.setAttribute("multiple","multiple"),e.hiddenFileInput.className="dz-hidden-input",null!=e.options.acceptedFiles&&e.hiddenFileInput.setAttribute("accept",e.options.acceptedFiles),null!=e.options.capture&&e.hiddenFileInput.setAttribute("capture",e.options.capture),e.hiddenFileInput.style.visibility="hidden",e.hiddenFileInput.style.position="absolute",e.hiddenFileInput.style.top="0",e.hiddenFileInput.style.left="0",e.hiddenFileInput.style.height="0",e.hiddenFileInput.style.width="0",document.querySelector(e.options.hiddenInputContainer).appendChild(e.hiddenFileInput),e.hiddenFileInput.addEventListener("change",function(){var t,o,r,n;if(o=e.hiddenFileInput.files,o.length)for(r=0,n=o.length;n>r;r++)t=o[r],e.addFile(t);return e.emit("addedfiles",o),a()})}}(this))(),this.URL=null!=(i=window.URL)?i:window.webkitURL,c=this.events,r=0,n=c.length;n>r;r++)e=c[r],this.on(e,this.options[e]);return this.on("uploadprogress",function(e){return function(){return e.updateTotalUploadProgress()}}(this)),this.on("removedfile",function(e){return function(){return e.updateTotalUploadProgress()}}(this)),this.on("canceled",function(e){return function(t){return e.emit("complete",t)}}(this)),this.on("complete",function(e){return function(){return 0===e.getAddedFiles().length&&0===e.getUploadingFiles().length&&0===e.getQueuedFiles().length?setTimeout(function(){return e.emit("queuecomplete")},0):void 0}}(this)),t=function(e){return e.stopPropagation(),e.preventDefault?e.preventDefault():e.returnValue=!1},this.listeners=[{element:this.element,events:{dragstart:function(e){return function(t){return e.emit("dragstart",t)}}(this),dragenter:function(e){return function(o){return t(o),e.emit("dragenter",o)}}(this),dragover:function(e){return function(o){var a;try{a=o.dataTransfer.effectAllowed}catch(r){}return o.dataTransfer.dropEffect="move"===a||"linkMove"===a?"move":"copy",t(o),e.emit("dragover",o)}}(this),dragleave:function(e){return function(t){return e.emit("dragleave",t)}}(this),drop:function(e){return function(o){return t(o),e.drop(o)}}(this),dragend:function(e){return function(t){return e.emit("dragend",t)}}(this)}}],this.clickableElements.forEach(function(e){return function(t){return e.listeners.push({element:t,events:{click:function(a){return(t!==e.element||a.target===e.element||o.elementInside(a.target,e.element.querySelector(".dz-message")))&&e.hiddenFileInput.click(),!0}}})}}(this)),this.enable(),this.options.init.call(this)},o.prototype.destroy=function(){var e;return this.disable(),this.removeAllFiles(!0),(null!=(e=this.hiddenFileInput)?e.parentNode:void 0)&&(this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput),this.hiddenFileInput=null),delete this.element.dropzone,o.instances.splice(o.instances.indexOf(this),1)},o.prototype.updateTotalUploadProgress=function(){var e,t,o,a,r,n,i,c;if(a=0,o=0,e=this.getActiveFiles(),e.length){for(c=this.getActiveFiles(),n=0,i=c.length;i>n;n++)t=c[n],a+=t.upload.bytesSent,o+=t.upload.total;r=100*a/o}else r=100;return this.emit("totaluploadprogress",r,o,a)},o.prototype._getParamName=function(e){return"function"==typeof this.options.paramName?this.options.paramName(e):""+this.options.paramName+(this.options.uploadMultiple?"["+e+"]":"")},o.prototype._renameFilename=function(e){return"function"!=typeof this.options.renameFilename?e:this.options.renameFilename(e)},o.prototype.getFallbackForm=function(){var e,t,a,r;return(e=this.getExistingFallback())?e:(a='<div class="dz-fallback">',this.options.dictFallbackText&&(a+="<p>"+this.options.dictFallbackText+"</p>"),a+='<input type="file" name="'+this._getParamName(0)+'" '+(this.options.uploadMultiple?'multiple="multiple"':void 0)+' /><input type="submit" value="Upload!"></div>',t=o.createElement(a),"FORM"!==this.element.tagName?(r=o.createElement('<form action="'+this.options.url+'" enctype="multipart/form-data" method="'+this.options.method+'"></form>'),r.appendChild(t)):(this.element.setAttribute("enctype","multipart/form-data"),this.element.setAttribute("method",this.options.method)),null!=r?r:t)},o.prototype.getExistingFallback=function(){var e,t,o,a,r,n;for(t=function(e){var t,o,a;for(o=0,a=e.length;a>o;o++)if(t=e[o],/(^| )fallback($| )/.test(t.className))return t},n=["div","form"],a=0,r=n.length;r>a;a++)if(o=n[a],e=t(this.element.getElementsByTagName(o)))return e},o.prototype.setupEventListeners=function(){var e,t,o,a,r,n,i;for(n=this.listeners,i=[],a=0,r=n.length;r>a;a++)e=n[a],i.push(function(){var a,r;a=e.events,r=[];for(t in a)o=a[t],r.push(e.element.addEventListener(t,o,!1));return r}());return i},o.prototype.removeEventListeners=function(){var e,t,o,a,r,n,i;for(n=this.listeners,i=[],a=0,r=n.length;r>a;a++)e=n[a],i.push(function(){var a,r;a=e.events,r=[];for(t in a)o=a[t],r.push(e.element.removeEventListener(t,o,!1));return r}());return i},o.prototype.disable=function(){var e,t,o,a,r;for(this.clickableElements.forEach(function(e){return e.classList.remove("dz-clickable")}),this.removeEventListeners(),a=this.files,r=[],t=0,o=a.length;o>t;t++)e=a[t],r.push(this.cancelUpload(e));return r},o.prototype.enable=function(){return this.clickableElements.forEach(function(e){return e.classList.add("dz-clickable")}),this.setupEventListeners()},o.prototype.filesize=function(e){var t,o,a,r,n,i,c,s;if(a=0,r="b",e>0){for(i=["TB","GB","MB","KB","b"],o=c=0,s=i.length;s>c;o=++c)if(n=i[o],t=Math.pow(this.options.filesizeBase,4-o)/10,e>=t){a=e/Math.pow(this.options.filesizeBase,4-o),r=n;break}a=Math.round(10*a)/10}return"<strong>"+a+"</strong> "+r},o.prototype._updateMaxFilesReachedClass=function(){return null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(this.getAcceptedFiles().length===this.options.maxFiles&&this.emit("maxfilesreached",this.files),this.element.classList.add("dz-max-files-reached")):this.element.classList.remove("dz-max-files-reached")},o.prototype.drop=function(e){var t,o;e.dataTransfer&&(this.emit("drop",e),t=e.dataTransfer.files,this.emit("addedfiles",t),t.length&&(o=e.dataTransfer.items,o&&o.length&&null!=o[0].webkitGetAsEntry?this._addFilesFromItems(o):this.handleFiles(t)))},o.prototype.paste=function(e){var t,o;if(null!=(null!=e&&null!=(o=e.clipboardData)?o.items:void 0))return this.emit("paste",e),t=e.clipboardData.items,t.length?this._addFilesFromItems(t):void 0},o.prototype.handleFiles=function(e){var t,o,a,r;for(r=[],o=0,a=e.length;a>o;o++)t=e[o],r.push(this.addFile(t));return r},o.prototype._addFilesFromItems=function(e){var t,o,a,r,n;for(n=[],a=0,r=e.length;r>a;a++)o=e[a],n.push(null!=o.webkitGetAsEntry&&(t=o.webkitGetAsEntry())?t.isFile?this.addFile(o.getAsFile()):t.isDirectory?this._addFilesFromDirectory(t,t.name):void 0:null!=o.getAsFile&&(null==o.kind||"file"===o.kind)?this.addFile(o.getAsFile()):void 0);return n},o.prototype._addFilesFromDirectory=function(e,t){var o,a,r;return o=e.createReader(),a=function(e){return"undefined"!=typeof console&&null!==console&&"function"==typeof console.log?console.log(e):void 0},(r=function(e){return function(){return o.readEntries(function(o){var a,n,i;if(o.length>0){for(n=0,i=o.length;i>n;n++)a=o[n],a.isFile?a.file(function(o){return e.options.ignoreHiddenFiles&&"."===o.name.substring(0,1)?void 0:(o.fullPath=""+t+"/"+o.name,e.addFile(o))}):a.isDirectory&&e._addFilesFromDirectory(a,""+t+"/"+a.name);r()}return null},a)}}(this))()},o.prototype.accept=function(e,t){return e.size>1024*this.options.maxFilesize*1024?t(this.options.dictFileTooBig.replace("{{filesize}}",Math.round(e.size/1024/10.24)/100).replace("{{maxFilesize}}",this.options.maxFilesize)):o.isValidFile(e,this.options.acceptedFiles)?null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(t(this.options.dictMaxFilesExceeded.replace("{{maxFiles}}",this.options.maxFiles)),this.emit("maxfilesexceeded",e)):this.options.accept.call(this,e,t):t(this.options.dictInvalidFileType)},o.prototype.addFile=function(e){return e.upload={progress:0,total:e.size,bytesSent:0},this.files.push(e),e.status=o.ADDED,this.emit("addedfile",e),this._enqueueThumbnail(e),this.accept(e,function(t){return function(o){return o?(e.accepted=!1,t._errorProcessing([e],o)):(e.accepted=!0,t.options.autoQueue&&t.enqueueFile(e)),t._updateMaxFilesReachedClass()}}(this))},o.prototype.enqueueFiles=function(e){var t,o,a;for(o=0,a=e.length;a>o;o++)t=e[o],
this.enqueueFile(t);return null},o.prototype.enqueueFile=function(e){if(e.status!==o.ADDED||e.accepted!==!0)throw new Error("This file can't be queued because it has already been processed or was rejected.");return e.status=o.QUEUED,this.options.autoProcessQueue?setTimeout(function(e){return function(){return e.processQueue()}}(this),0):void 0},o.prototype._thumbnailQueue=[],o.prototype._processingThumbnail=!1,o.prototype._enqueueThumbnail=function(e){return this.options.createImageThumbnails&&e.type.match(/image.*/)&&e.size<=1024*this.options.maxThumbnailFilesize*1024?(this._thumbnailQueue.push(e),setTimeout(function(e){return function(){return e._processThumbnailQueue()}}(this),0)):void 0},o.prototype._processThumbnailQueue=function(){return this._processingThumbnail||0===this._thumbnailQueue.length?void 0:(this._processingThumbnail=!0,this.createThumbnail(this._thumbnailQueue.shift(),function(e){return function(){return e._processingThumbnail=!1,e._processThumbnailQueue()}}(this)))},o.prototype.removeFile=function(e){return e.status===o.UPLOADING&&this.cancelUpload(e),this.files=c(this.files,e),this.emit("removedfile",e),0===this.files.length?this.emit("reset"):void 0},o.prototype.removeAllFiles=function(e){var t,a,r,n;for(null==e&&(e=!1),n=this.files.slice(),a=0,r=n.length;r>a;a++)t=n[a],(t.status!==o.UPLOADING||e)&&this.removeFile(t);return null},o.prototype.createThumbnail=function(e,t){var o;return o=new FileReader,o.onload=function(a){return function(){return"image/svg+xml"===e.type?(a.emit("thumbnail",e,o.result),void(null!=t&&t())):a.createThumbnailFromUrl(e,o.result,t)}}(this),o.readAsDataURL(e)},o.prototype.createThumbnailFromUrl=function(e,t,o,a){var r;return r=document.createElement("img"),a&&(r.crossOrigin=a),r.onload=function(t){return function(){var a,i,c,s,p,l,u,d;return e.width=r.width,e.height=r.height,c=t.options.resize.call(t,e),null==c.trgWidth&&(c.trgWidth=c.optWidth),null==c.trgHeight&&(c.trgHeight=c.optHeight),a=document.createElement("canvas"),i=a.getContext("2d"),a.width=c.trgWidth,a.height=c.trgHeight,n(i,r,null!=(p=c.srcX)?p:0,null!=(l=c.srcY)?l:0,c.srcWidth,c.srcHeight,null!=(u=c.trgX)?u:0,null!=(d=c.trgY)?d:0,c.trgWidth,c.trgHeight),s=a.toDataURL("image/png"),t.emit("thumbnail",e,s),null!=o?o():void 0}}(this),null!=o&&(r.onerror=o),r.src=t},o.prototype.processQueue=function(){var e,t,o,a;if(t=this.options.parallelUploads,o=this.getUploadingFiles().length,e=o,!(o>=t)&&(a=this.getQueuedFiles(),a.length>0)){if(this.options.uploadMultiple)return this.processFiles(a.slice(0,t-o));for(;t>e;){if(!a.length)return;this.processFile(a.shift()),e++}}},o.prototype.processFile=function(e){return this.processFiles([e])},o.prototype.processFiles=function(e){var t,a,r;for(a=0,r=e.length;r>a;a++)t=e[a],t.processing=!0,t.status=o.UPLOADING,this.emit("processing",t);return this.options.uploadMultiple&&this.emit("processingmultiple",e),this.uploadFiles(e)},o.prototype._getFilesWithXhr=function(e){var t,o;return o=function(){var o,a,r,n;for(r=this.files,n=[],o=0,a=r.length;a>o;o++)t=r[o],t.xhr===e&&n.push(t);return n}.call(this)},o.prototype.cancelUpload=function(e){var t,a,r,n,i,c,s;if(e.status===o.UPLOADING){for(a=this._getFilesWithXhr(e.xhr),r=0,i=a.length;i>r;r++)t=a[r],t.status=o.CANCELED;for(e.xhr.abort(),n=0,c=a.length;c>n;n++)t=a[n],this.emit("canceled",t);this.options.uploadMultiple&&this.emit("canceledmultiple",a)}else((s=e.status)===o.ADDED||s===o.QUEUED)&&(e.status=o.CANCELED,this.emit("canceled",e),this.options.uploadMultiple&&this.emit("canceledmultiple",[e]));return this.options.autoProcessQueue?this.processQueue():void 0},r=function(){var e,t;return t=arguments[0],e=2<=arguments.length?s.call(arguments,1):[],"function"==typeof t?t.apply(this,e):t},o.prototype.uploadFile=function(e){return this.uploadFiles([e])},o.prototype.uploadFiles=function(e){var t,n,i,c,s,p,l,u,d,h,m,g,f,$,v,y,b,w,k,C,P,T,S,A,N,L,_,I,D,F,x,M,U,j;for(k=new XMLHttpRequest,C=0,A=e.length;A>C;C++)t=e[C],t.xhr=k;g=r(this.options.method,e),b=r(this.options.url,e),k.open(g,b,!0),k.withCredentials=!!this.options.withCredentials,v=null,i=function(o){return function(){var a,r,n;for(n=[],a=0,r=e.length;r>a;a++)t=e[a],n.push(o._errorProcessing(e,v||o.options.dictResponseError.replace("{{statusCode}}",k.status),k));return n}}(this),y=function(o){return function(a){var r,n,i,c,s,p,l,u,d;if(null!=a)for(n=100*a.loaded/a.total,i=0,p=e.length;p>i;i++)t=e[i],t.upload={progress:n,total:a.total,bytesSent:a.loaded};else{for(r=!0,n=100,c=0,l=e.length;l>c;c++)t=e[c],(100!==t.upload.progress||t.upload.bytesSent!==t.upload.total)&&(r=!1),t.upload.progress=n,t.upload.bytesSent=t.upload.total;if(r)return}for(d=[],s=0,u=e.length;u>s;s++)t=e[s],d.push(o.emit("uploadprogress",t,n,t.upload.bytesSent));return d}}(this),k.onload=function(t){return function(a){var r;if(e[0].status!==o.CANCELED&&4===k.readyState){if(v=k.responseText,k.getResponseHeader("content-type")&&~k.getResponseHeader("content-type").indexOf("application/json"))try{v=JSON.parse(v)}catch(n){a=n,v="Invalid JSON response from server."}return y(),200<=(r=k.status)&&300>r?t._finished(e,v,a):i()}}}(this),k.onerror=function(){return function(){return e[0].status!==o.CANCELED?i():void 0}}(this),$=null!=(D=k.upload)?D:k,$.onprogress=y,p={Accept:"application/json","Cache-Control":"no-cache","X-Requested-With":"XMLHttpRequest"},this.options.headers&&a(p,this.options.headers);for(c in p)s=p[c],s&&k.setRequestHeader(c,s);if(n=new FormData,this.options.params){F=this.options.params;for(m in F)w=F[m],n.append(m,w)}for(P=0,N=e.length;N>P;P++)t=e[P],this.emit("sending",t,k,n);if(this.options.uploadMultiple&&this.emit("sendingmultiple",e,k,n),"FORM"===this.element.tagName)for(x=this.element.querySelectorAll("input, textarea, select, button"),T=0,L=x.length;L>T;T++)if(u=x[T],d=u.getAttribute("name"),h=u.getAttribute("type"),"SELECT"===u.tagName&&u.hasAttribute("multiple"))for(M=u.options,S=0,_=M.length;_>S;S++)f=M[S],f.selected&&n.append(d,f.value);else(!h||"checkbox"!==(U=h.toLowerCase())&&"radio"!==U||u.checked)&&n.append(d,u.value);for(l=I=0,j=e.length-1;j>=0?j>=I:I>=j;l=j>=0?++I:--I)n.append(this._getParamName(l),e[l],this._renameFilename(e[l].name));return this.submitRequest(k,n,e)},o.prototype.submitRequest=function(e,t){return e.send(t)},o.prototype._finished=function(e,t,a){var r,n,i;for(n=0,i=e.length;i>n;n++)r=e[n],r.status=o.SUCCESS,this.emit("success",r,t,a),this.emit("complete",r);return this.options.uploadMultiple&&(this.emit("successmultiple",e,t,a),this.emit("completemultiple",e)),this.options.autoProcessQueue?this.processQueue():void 0},o.prototype._errorProcessing=function(e,t,a){var r,n,i;for(n=0,i=e.length;i>n;n++)r=e[n],r.status=o.ERROR,this.emit("error",r,t,a),this.emit("complete",r);return this.options.uploadMultiple&&(this.emit("errormultiple",e,t,a),this.emit("completemultiple",e)),this.options.autoProcessQueue?this.processQueue():void 0},o}(t),e.version="4.3.0",e.options={},e.optionsForElement=function(t){return t.getAttribute("id")?e.options[o(t.getAttribute("id"))]:void 0},e.instances=[],e.forElement=function(e){if("string"==typeof e&&(e=document.querySelector(e)),null==(null!=e?e.dropzone:void 0))throw new Error("No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.");return e.dropzone},e.autoDiscover=!0,e.discover=function(){var t,o,a,r,n,i;for(document.querySelectorAll?a=document.querySelectorAll(".dropzone"):(a=[],t=function(e){var t,o,r,n;for(n=[],o=0,r=e.length;r>o;o++)t=e[o],n.push(/(^| )dropzone($| )/.test(t.className)?a.push(t):void 0);return n},t(document.getElementsByTagName("div")),t(document.getElementsByTagName("form"))),i=[],r=0,n=a.length;n>r;r++)o=a[r],i.push(e.optionsForElement(o)!==!1?new e(o):void 0);return i},e.blacklistedBrowsers=[/opera.*Macintosh.*version\/12/i],e.isBrowserSupported=function(){var t,o,a,r,n;if(t=!0,window.File&&window.FileReader&&window.FileList&&window.Blob&&window.FormData&&document.querySelector)if("classList"in document.createElement("a"))for(n=e.blacklistedBrowsers,a=0,r=n.length;r>a;a++)o=n[a],o.test(navigator.userAgent)&&(t=!1);else t=!1;else t=!1;return t},c=function(e,t){var o,a,r,n;for(n=[],a=0,r=e.length;r>a;a++)o=e[a],o!==t&&n.push(o);return n},o=function(e){return e.replace(/[\-_](\w)/g,function(e){return e.charAt(1).toUpperCase()})},e.createElement=function(e){var t;return t=document.createElement("div"),t.innerHTML=e,t.childNodes[0]},e.elementInside=function(e,t){if(e===t)return!0;for(;e=e.parentNode;)if(e===t)return!0;return!1},e.getElement=function(e,t){var o;if("string"==typeof e?o=document.querySelector(e):null!=e.nodeType&&(o=e),null==o)throw new Error("Invalid `"+t+"` option provided. Please provide a CSS selector or a plain HTML element.");return o},e.getElements=function(e,t){var o,a,r,n,i,c,s,p;if(e instanceof Array){r=[];try{for(n=0,c=e.length;c>n;n++)a=e[n],r.push(this.getElement(a,t))}catch(l){o=l,r=null}}else if("string"==typeof e)for(r=[],p=document.querySelectorAll(e),i=0,s=p.length;s>i;i++)a=p[i],r.push(a);else null!=e.nodeType&&(r=[e]);if(null==r||!r.length)throw new Error("Invalid `"+t+"` option provided. Please provide a CSS selector, a plain HTML element or a list of those.");return r},e.confirm=function(e,t,o){return window.confirm(e)?t():null!=o?o():void 0},e.isValidFile=function(e,t){var o,a,r,n,i;if(!t)return!0;for(t=t.split(","),a=e.type,o=a.replace(/\/.*$/,""),n=0,i=t.length;i>n;n++)if(r=t[n],r=r.trim(),"."===r.charAt(0)){if(-1!==e.name.toLowerCase().indexOf(r.toLowerCase(),e.name.length-r.length))return!0}else if(/\/\*$/.test(r)){if(o===r.replace(/\/.*$/,""))return!0}else if(a===r)return!0;return!1},"undefined"!=typeof jQuery&&null!==jQuery&&(jQuery.fn.dropzone=function(t){return this.each(function(){return new e(this,t)})}),"undefined"!=typeof module&&null!==module?module.exports=e:window.Dropzone=e,e.ADDED="added",e.QUEUED="queued",e.ACCEPTED=e.QUEUED,e.UPLOADING="uploading",e.PROCESSING=e.UPLOADING,e.CANCELED="canceled",e.ERROR="error",e.SUCCESS="success",r=function(e){var t,o,a,r,n,i,c,s,p,l;for(c=e.naturalWidth,i=e.naturalHeight,o=document.createElement("canvas"),o.width=1,o.height=i,a=o.getContext("2d"),a.drawImage(e,0,0),r=a.getImageData(0,0,1,i).data,l=0,n=i,s=i;s>l;)t=r[4*(s-1)+3],0===t?n=s:l=s,s=n+l>>1;return p=s/i,0===p?1:p},n=function(e,t,o,a,n,i,c,s,p,l){var u;return u=r(t),e.drawImage(t,o,a,n,i,c,s,p,l/u)},a=function(e,t){var o,a,r,n,i,c,s,p,l;if(r=!1,l=!0,a=e.document,p=a.documentElement,o=a.addEventListener?"addEventListener":"attachEvent",s=a.addEventListener?"removeEventListener":"detachEvent",c=a.addEventListener?"":"on",n=function(o){return"readystatechange"!==o.type||"complete"===a.readyState?(("load"===o.type?e:a)[s](c+o.type,n,!1),!r&&(r=!0)?t.call(e,o.type||o):void 0):void 0},i=function(){var e;try{p.doScroll("left")}catch(t){return e=t,void setTimeout(i,50)}return n("poll")},"complete"!==a.readyState){if(a.createEventObject&&p.doScroll){try{l=!e.frameElement}catch(u){}l&&i()}return a[o](c+"DOMContentLoaded",n,!1),a[o](c+"readystatechange",n,!1),e[o](c+"load",n,!1)}},e._autoDiscoverFunction=function(){return e.autoDiscover?e.discover():void 0},a(window,e._autoDiscoverFunction)}.call(this),app.directive("userTrack",function(){return{restrict:"E",replace:!1,link:function(e,t,o){e.userTrack=function(t){writebdLog(e.category,t,"渠道号",e.gh)}}}}),app.config(["$stateProvider","$locationProvider",function(e,t){e.state("pcdRecharge",{url:"/pcdRecharge/index",templateUrl:"pages/phoneCard/recharge/index.html",controller:"pdRechargeController"})}]).controller("pdRechargeController",["$scope","$rootScope","$location","$http","$timeout",function(e,t,o,a,r){o.path("/phone/active/D/phones"),e.pageType="pcdRecharge",e.appType=systemName+"_recharge_"+e.pageType,e.category=e.appType,e.params=window.location.search,e.$root.share={homeLink:"http://app.yfq.cn/pcdRecharge/index"+window.location.search,shareTitle:"翼分期商城——话费充值优惠",shareDisc:"翼分期商城新用户专享，话费充100送100，充200送150，更多充值优惠等你来！",picUrl:"http://app.yfq.cn/images/phoneCard/recharge/share.jpg"},r(function(){writebdLog(e.category,"_Load","渠道号",e.gh)}),e.rechargeMobile=function(t){return e.rechargeStatus=void 0,!!e.checkoutForm.iccid.$valid&&($("#iccid").blur(),void a.jsonp(cfApi.apiHost+"/yfqcz/czOrdRechargeController.do?checkAllowCharge&rechargeMobile="+t+"&callback=JSON_CALLBACK").success(function(t,o,a,r){e.rechargeStatus=t.resultCode,writebdLog(e.category,"_InputIndexNumber","渠道号",e.gh)}).error(function(e,t,o,a){console.log(t)}))},a.jsonp(cfApi.apiHost+"/yfqcz/czProdProductsController.do?findRechargeProducts&callback=JSON_CALLBACK").success(function(t,o,a,r){e.rechargeProducts=t}).error(function(e,t,o,a){console.log(t)}),e.setProduct=function(t,o){var a=$(t.currentTarget);if(a.hasClass("disabled"))return!1;e.$root.toast.open();var n="";"充 100 元送 5 元"==o.name&&(n="Give5Y"),"充 50 元送 30 元"==o.name&&(n="Give30Y"),"充 50 元送 50 元"==o.name&&(n="Give50Y"),"充 100 元送 100 元"==o.name&&(n="Give100Y"),"充 100 元"==o.name&&(n="Charge100Y"),"充 200 元送 150 元"==o.name&&(n="Give150Y"),"充 500 元送 300 元"==o.name&&(n="Give300Y"),writebdLog(e.category,"_"+n,"渠道号",e.gh),e.product=o,r(function(){$("#checkoutForm").submit()})},e.showRechargeTip=function(t){var o=$("#rechargeTipsPanel").html();e.$root.Overlay.open(o)},e.getContact=function(t){getMeiqia(),_MEIQIA("showPanel"),writebdLog(scope.category,"_CustConsult","渠道号",e.gh)},e.writeClickEvent=function(t,o){var a=$(t.currentTarget);return a.hasClass("disabled")?(t.preventDefault(),!1):void writebdLog(e.category,"_"+o,"渠道号",e.gh)}}]),app.config(["$stateProvider","$locationProvider",function(e,t){e.state("flowCardIn",{url:"/fd/fds/:appType",templateUrl:"pages/flowCard/flowCard-details/in/flowCard-details.html",controller:"fdProInController"})}]).controller("fdProInController",["$scope","$rootScope","$location",function(e,t,o){window.location.href=cfApi.apiHost+"/yfqcz/#/",e.appType=systemName+"_FlowPackage",e.category=e.appType,writebdLog(e.category,"_Load","渠道号",e.gh)}]),app.config(["$stateProvider","$locationProvider",function(e,t){e.state("flowCard",{url:"/fd/product",templateUrl:"pages/flowCard/flowCard-details/default/flowCard-details.html",controller:"fdProController"}).state("flowCardMifi",{url:"/fd/mifi",templateUrl:"pages/flowCard/flowCard-details/default/flowCard-details.html",controller:"fdProController"})}]).controller("fdProController",["$scope","$rootScope","$location",function(e,t,o){window.location.href=cfApi.apiHost+"/yfqcz/#/",e.appType=systemName+"_FlowPackage","/fd/mifi"==o.path()&&(e.appType=systemName+"_FlowPackage_MiFi"),e.category=e.appType,writebdLog(e.category,"_Load","渠道号",e.gh)}]),app.config(["$stateProvider","$locationProvider",function(e,t){e.state("flowCardV3",{url:"/fd/v3/:productId",templateUrl:"pages/flowCard/flowCard-details/v3/v3.html",controller:"flowCardV3Controller"})}]).controller("flowCardV3Controller",["$scope","$rootScope","$stateParams","$location","$http",function($scope,$rootScope,$stateParams,$location,$http){$scope.activeTag="mifitc",$scope.pageType="A",$scope.category=systemName+"_mifitc_"+$scope.pageType,writebdLog($scope.category,"_Load","渠道号",$scope.gh),$http.jsonp(cfApi.apiHost+"/product/getProDetial.html?productId="+$stateParams.productId+"&activeTag=mifitc&s=wap&callback=JSON_CALLBACK").success(function(e,t,o,a){$scope.product=e,$scope.selectedMifis=[$scope.product.activityproductId],$scope.packageItem=e.packageProductList[0];var r=[];$.each(e.phoneTypes,function(e,t){r.push({productId:t.productId,productName:t.productName,salePrice:t.salePrice,selected:!1})}),$scope.mifis=r,$scope.totalPrice=parseInt($scope.product.packageProductList[0].salesPrice),$scope.$root.share={homeLink:"http://app.yfq.cn/fd/v3/"+$stateParams.productId+window.location.search,shareTitle:"不限流量套餐，重磅推出，人均仅38元/月！送无线WIFI设备！",shareDisc:"一人付费，全家分享！无线广东流量，6G全国流量，1000分钟国内通话，抢先办理！",picUrl:"http://app.yfq.cn/images/flow/flowcard/v3/nativeShare.jpg"}}).error(function(e,t,o,a){console.log(t)}),$location.search().duplicateNum&&$scope.dialog.open("系统提示","您选择的号码："+$location.search().duplicateNum+"已被购买，请重新选择"),$scope.autoSelect=!0,$scope.setAutoSelect=function(e){$scope.autoSelect=e,writebdLog($scope.category,"_SystemNumber"+e,"渠道号",$scope.gh)};for(var objGetters=new Array,i=0;i<=10;i++)objGetters.push({txt:getRandomName()+"("+getRandomReceiverPhone()+") 领取无限流量套餐 <span>"+getRanDomTime()+"分钟前</span>"});$scope.getters=objGetters,$container=$(".content-scrollable"),$scope.goToSelect=function(){var e=$(".select-area");$container.animate({scrollTop:e.offset().top-$container.offset().top+$container.scrollTop()})},$scope.goTo=function(e){var t=$(e);$container.animate({scrollTop:t.offset().top-$container.offset().top+$container.scrollTop()})},$scope.$on("ngRepeatFinished",function(e){$(".getters").slide({mainCell:"ul",autoPage:!0,effect:"topMarquee",autoPlay:!0,interTime:50,vis:5})}),$http.jsonp(cfApi.apiHost+"/wap/taokafanghaoNew/fetchLuckNumber.html?time="+(new Date).getTime()+"&callback=JSON_CALLBACK").success(function(data,status,headers,config){var _data=[],inputData1=[],inputData2=[],inputData3=[];$.each(eval(data),function(e,t){t.s<=800&&0==t.t&&_data.push(t)}),$.each(_data,function(e,t){e<_data.length/3-1?inputData1.push(t):e>2*_data.length/3+1?inputData2.push(t):inputData3.push(t)}),$scope.inputData=inputData1,$scope.inputData1=inputData2,$scope.inputData2=inputData3}),$scope.setItem=function(e,t,o){$scope.mifis[t].selected=!$scope.mifis[t].selected,writebdLog($scope.category,"_SelectMIFI"+o.productId,"渠道号",$scope.gh)},$scope.mainPanel=!1,$scope.showMainPanel=function(){$scope.mainPanel=!$scope.mainPanel,writebdLog($scope.category,"_PanelMain"+$scope.mainPanel,"渠道号",$scope.gh)},$scope.subPanel=!1,$scope.showSubPanel=function(){$scope.subPanel=!$scope.subPanel,writebdLog($scope.category,"_PanelSub"+$scope.subPanel,"渠道号",$scope.gh)},$scope.thirdPanel=!1,$scope.showThirdPanel=function(){$scope.thirdPanel=!$scope.thirdPanel,writebdLog($scope.category,"_PanelThrid"+$scope.thirdPanel,"渠道号",$scope.gh)},$scope.getContact=function(){writebdLog($scope.category,"_CustConsult","渠道号",$scope.gh)},$scope.selectedData={},$scope.submitForm=function(e){var t=$("#checkoutForm");if(!$scope.checkoutForm.mainNumber.$valid)return $scope.mainNumberWarn=!0,$scope.goTo("#mainNumberArea"),!1;if(!$scope.autoSelect){if(!$scope.checkoutForm.subNumber.$valid)return $scope.subNumberWarn=!0,$scope.goTo("#subNumberArea"),!1;if(!$scope.checkoutForm.thirdNumber.$valid)return $scope.thirdNumberWarn=!0,$scope.goTo("#thirdNumberArea"),!1}if(!$scope.checkAddress())return $scope.goTo("#receiverAddress"),!1;if(!$scope.$root.checkActiveCode())return $scope.goTo("#receiverAddress"),!1;cfApi.apiHost+"/product/checkPhoneState.html?number=["+$scope.selectedData.mainNumber.n+","+$scope.selectedData.subNumber.n+","+$scope.selectedData.thirdNumber.n+"]&s=wap&callback=JSON_CALLBACK";t.submit(),writebdLog($scope.category,"_BuyNow","渠道号",$scope.gh)},$scope.fqaMore=!1,$scope.setFqaMore=function(){$scope.fqaMore=!$scope.fqaMore},$scope.$watch("mifis",function(e,t,o){e!==t&&void 0!==e&&(o.selectedMifis=[o.product.activityproductId],o.totalPrice=parseInt(o.product.packageProductList[0].salesPrice),$.each(e,function(e,t){t.selected&&(o.totalPrice=o.totalPrice+t.salePrice,o.selectedMifis.push(t.productId))}))},!0),$scope.$watch("outputData",function(e,t,o){e!==t&&void 0!==e&&("mainNumber"===e.numberType&&(o.selectedData.mainNumber=e.number,o.mainPanel=!1,o.mainNumberWarn=!1),"subNumber"===e.numberType&&(o.selectedData.subNumber=e.number,e.number?(o.subPanel=!1,o.subNumberWarn=!1):o.subPanel=!0),"thirdNumber"===e.numberType&&(o.selectedData.thirdNumber=e.number,e.number?(o.thirdPanel=!1,o.thirdNumberWarn=!1):o.thirdPanel=!0))},!0)}]),app.config(["$stateProvider","$locationProvider",function(e,t){e.state("referrerSysLogin",{url:"/referrerSys/login",templateUrl:"pages/referrerSys/login/login.html",controller:"referrerSysLoginController"})}]).controller("referrerSysLoginController",["$scope","$rootScope","$location","$http",function(e,t,o,a){e.homeUrl="http://app.yfq.cn/phone/active/B",e.searchOrder=cfApi.apiHost+"/wap/customer/searchIndexA.html",e.$root.dialogClass="referrer-dialog",e.$root.hasMoreBtn=!0,e.login=function(t,o){e.referrerForm.referrerNo.$valid&&a.jsonp(cfApi.apiHost+"/product/getQrCode.html?referrerNo="+o+"&gh=jktchd&activity=jktchd&url="+e.homeUrl+"&callback=JSON_CALLBACK").success(function(t,r,n,i){var c="<div class='img-box'><img src='"+t[0].upCodePath+"'></div><p><a href='"+e.homeUrl+"?gh=jktchd&activity=jktchd&referrerNo="+o+"'>进入官网</a></p>";a.jsonp(cfApi.apiHost+"/product/getQrCode.html?referrerNo="+o+"&gh=jktchd&activity=jktchd&url="+e.searchOrder+"&callback=JSON_CALLBACK").success(function(t,a,r,n){c=c+"<div class='img-box'><img src='"+t[0].upCodePath+"'></div><p><a href='"+e.searchOrder+"?gh=jktchd&activity=jktchd&referrerNo="+o+"'>查询订单</a></p>",e.dialog.open("",c)}).error(function(e,t,o,a){console.log("error")})}).error(function(e,t,o,a){console.log("error")})}}]),app.config(["$stateProvider","$locationProvider",function(e,t){e.state("phoneIndex",{url:"/phone/:pageType/index",templateUrl:function(e){return"pages/phone/index/"+e.pageType+"/index.html"},controller:"pIndexController"})}]).controller("pIndexController",["$scope","$location","$http","$stateParams","$interval","$timeout",function(e,t,o,a,r,n){function i(t){writebdLog(e.category,c[t],"渠道号",e.gh)}e.pageType=a.pageType,void 0!=e.pageType&&"C"==e.pageType?e.appType=systemName+"_sdhd_"+e.pageType+"_index":e.appType=systemName+"_mysy_"+e.pageType+"_index",e.category=e.appType,e.params=window.location.search,writebdLog(e.category,"_Load","渠道号",e.gh),e.getContact=function(){getMeiqia(),_MEIQIA("showPanel"),writebdLog(e.category,"_CustConsult","渠道号",e.gh)},o.jsonp(cfApi.apiHost+"/product/getPackageList.html?activeTag=bdtc&s=wap&callback=JSON_CALLBACK").success(function(t,o,a,r){e.pkgs=t}).error(function(e,t,o,a){console.log(t)}),o.jsonp(cfApi.apiHost+"/product/getProList.html?activeTag=lj&s=wap&callback=JSON_CALLBACK").success(function(t,o,a,r){e.singlePhones=t}).error(function(e,t,o,a){console.log(t)}),o.jsonp(cfApi.apiHost+"/product/getProList.html?activeTag=mysy&s=wap&callback=JSON_CALLBACK").success(function(t,o,a,r){e.doublePhones=t}).error(function(e,t,o,a){console.log(t)}),e.st=function(e){var t=$(".content-scrollable"),o=$(e);t.animate({scrollTop:o.offset().top-t.offset().top+t.scrollTop()})},e.btNavItem=function(t,o,a){var r=$(t.currentTarget);0==o||1==o?(r.siblings().removeClass("curr"),r.addClass("curr"),$(".tab-item").eq(o).trigger("click"),e.st(a)):2==o?(r.siblings().removeClass("curr"),r.addClass("curr"),e.st(a)):3==o&&(getMeiqia(),_MEIQIA("showPanel")),i(o)};var c=["_MYSYBt","_BKDJBt","_CZTCBt","_CustConsult"];r(function(){e.selkillTxt=getRandomName()+"，刚刚购买了 "+getRandomProduct()},2e3),e.writeSelectFoods=function(t,o,a){writebdLog(e.category,"_"+o+a,"渠道号",e.gh)},e.$on("ngRepeatFinished",function(e){$("img.lazy").lazyload({effect:"fadeIn",skip_invisible:!1,container:$(".content-scrollable")})}),$("img.lazy").lazyload({effect:"fadeIn",skip_invisible:!1,container:$(".content-scrollable")}),e.openCardPkg=function(t){var o=$("#"+t).html();e.$root.Overlay.open(o)},e.gotoOrderContent=function(){var t=$(".content-scrollable"),o=$(".order-content");t.animate({scrollTop:o.offset().top-t.offset().top+t.scrollTop()-50}),writebdLog(e.category,"_ClickReceive","渠道号",e.gh)},e.submitFormCommon=function(){return e.toast.open(),e.checkMachineName()&&e.checkAddress()&&e.checkActiveCode()?(e.gh||(e.gh=""),e.activity||(e.activity="sdhd"),e.submitUrl=cfApi.apiHost+"/wap/taokafanghaoNew/submitOrderCommon.html?activeTag=sdhd&brand="+encodeURI(encodeURI(e.machineName))+"&gh="+e.gh+"&activity="+e.activity+"&reciverName="+encodeURI(encodeURI(e.receiver.name))+"&receiverMobile="+e.receiver.mobile+"&receiverCity="+encodeURI(encodeURI(e.receiver.city))+"&receiverRoom="+encodeURI(encodeURI(e.receiver.room))+"&payType=1&category="+e.category+"&callback=JSON_CALLBACK",o.jsonp(e.submitUrl).success(function(t,o,a,r){if(e.toast.close(),"0"==t[0].resultCode){e.orderNo=t[0].resultMsg;n(function(){var t=$("#wxQrCode").html();e.Overlay.open(t)},100)}else e.dialog.open("系统提示",t[0].resultMsg)}).error(function(e,t,o,a){console.log(t)}),void writebdLog(e.category,"_BuyNow","渠道号",e.gh)):(e.toast.close(),!1)}}]),app.directive("pkgInfo",["$http","$stateParams","$q",function(e,t,o){return{restrict:"C",scope:{ssDd:"="},templateUrl:"modules/cardPackage/d/cardPkg.html",link:function(e,t,o){e.openCardPkg=function(t,o){var a=$(o.currentTarget),r=a.siblings(".pcd-infos").html();e.$root.Overlay.open(r)}}}}]),app.config(["$stateProvider","$locationProvider",function(e,t){e.state("selectPkg",{url:"/phs/sg/C/:phoneId/selectPkg",templateUrl:function(e){return"pages/phone/selectPkg/selectPkg.html"},controller:"selectPkgController",onExit:function(){$("#container").removeClass("overlay-open"),$("#overlay-hook").html("")}})}]).controller("selectPkgController",["$scope","$rootScope","$location","$stateParams","$http","Phone",function(e,t,o,a,r,n){e.pageType="C",e.activeTag="lj";var i=o.search().headCategory;void 0!=i&&null!=i?e.category=i+"_SinglePhones":e.category=systemName+"_mysy_"+e.pageType+"_SinglePhones",e.phoneQueryUrl="http://"+o.host()+o.url(),writebdLog(e.category,"_Load","渠道号",e.gh),r.jsonp(cfApi.apiHost+"/product/getProDetial.html?productId="+a.phoneId+"&activeTag=jjk&s=wap&callback=JSON_CALLBACK").success(function(t,o,a,r){e.phone=t}).error(function(e,t,o,a){console.log(t)})}]),app.directive("phoneQuery",["$cookieStore",function(e){return{restrict:"E",templateUrl:"modules/common/phoneQuery/phoneQuery.html",controller:"phoneQueryController",link:function(t,o,a){$container=$("#container");var r;if(e.get("orderState")){e.get("orderState")}t.npHide=function(){$container.removeClass("phone-query"),$("#numberPanel").hide()},t.npShow=function(e){$container.addClass("phone-query"),$("#numberPanel").show(),r=e,"numberPanel"==e&&writebdLog(t.category,"_CuteNumber","渠道号",t.gh)},t.showOverLay=function(e){var o=$("#"+e).html();t.$root.Overlay.open(o),writebdLog(t.category,"_IsContractPackage","渠道号",t.gh)},t.checkPhone=function(){return!!t.checkoutForm.phoneNumber.$valid},t.setNumberItem=function(e,o){e.preventDefault(),t.phoneNumber=o.n;var a=$(e.currentTarget);a.parent().siblings().children().removeClass("curr"),a.addClass("curr"),writebdLog(t.category,"_SelectNumber","渠道号",t.gh)},t.getNumber=function(){if(t.checkPhone()){t.npHide();var e=$("#phoneQuery"),o=$(".content-scrollable");o.animate({scrollTop:e.offset().top-o.offset().top+o.scrollTop()}),writebdLog(t.category,"_ConfirmNumber","渠道号",t.gh)}else t.$root.dialog.open("","请您选择号码！")}}}}]).controller("phoneQueryController",["$scope","$cookieStore","$http","$compile",function($scope,$cookieStore,$http){$scope.phoneData=new Array,$scope.phoneFilter=function(e){var t=new Array;""!=e?($.each($scope.phoneData,function(o,a){a.n.indexOf(e)>=0&&t.push(a)}),$scope.filterData=t):$scope.filterData=$scope.phoneData,$scope.items=$scope.filterData.slice(0,$scope.pageSize),$scope.dataInit()},$scope.inputNumber=function(e){""!=e&&writebdLog($scope.category,"_InputNumber","渠道号",$scope.gh)},$http.jsonp(cfApi.apiHost+"/wap/taokafanghaoNew/fetchNumber.html?callback=JSON_CALLBACK").success(function(data,status,headers,config){$.each(eval(data),function(e,t){t.t||$scope.phoneData.push(t)}),$scope.dataInit=function(){$scope.selPage=1,$scope.pageList=[],$scope.pages=Math.ceil($scope.filterData.length/$scope.pageSize),$scope.newPages=$scope.pages>5?5:$scope.pages;for(var e=0;e<$scope.newPages;e++)$scope.pageList.push(e+1)},$scope.filterData=$scope.phoneData,$scope.pageSize=10,$scope.setData=function(){$scope.items=$scope.filterData.slice($scope.pageSize*($scope.selPage-1),$scope.selPage*$scope.pageSize)},$scope.items=$scope.filterData.slice(0,$scope.pageSize),$scope.dataInit(),$scope.selectPage=function(e){if(!(e<1||e>$scope.pages)){if(e>2){for(var t=[],o=e-3;o<(e+2>$scope.pages?$scope.pages:e+2);o++)t.push(o+1);$scope.pageList=t}$scope.selPage=e,$scope.setData(),$scope.isActivePage(e)}},$scope.isActivePage=function(e){return $scope.selPage==e},$scope.Previous=function(){$scope.selectPage($scope.selPage-1)},$scope.Next=function(){$scope.selectPage($scope.selPage+1),writebdLog($scope.category,"_ChangeALot","渠道号",$scope.gh)}}).error(function(e,t,o,a){console.log(t)})}]),app.directive("toast",["$timeout",function(e){return{restrict:"E",templateUrl:"modules/common/toast/toast.html",link:function(t,o,a){var r=$("#loadingToast");t.$root.toast={open:function(){r.show(),e(function(){r.hide()},2e3)},openUnLimit:function(){r.show()},close:function(){r.hide()}},t.$root.toast.close()}}}]),app.directive("nFooterNav",["$http","$location",function($http,$location){return{restrict:"E",templateUrl:"modules/footerNav/n/footerNav.html",link:function(scope,element,attrs){function getRTime(){var e,t=new Date,o=t.getFullYear()+"/"+(t.getMonth()+1)+"/"+t.getDate()+" 23:59:00",a=new Date(o),r=new Date,n=a.getTime()-r.getTime(),t=Math.floor(n/1e3/60/60/24),i=Math.floor(n/1e3/60/60%24);parseInt(i)<10&&(i="0"+i);var c=Math.floor(n/1e3/60%60);parseInt(c)<10&&(c="0"+c);var s=Math.floor(n/1e3%60);parseInt(s)<10&&(s="0"+s),e="<em>"+i+"</em><em>：</em><em>"+c+"</em><em>：</em><em>"+s+"</em>",$(".stimer").html(e)}var $form=$(attrs.submit),$container=$(".content-scrollable"),$scrollTo;$location.search().duplicateNum&&(Array.isArray($location.search().duplicateNum)?scope.dialog.open("系统提示","您选择的号码："+$location.search().duplicateNum[0]+"已被购买，请重新选择"):scope.dialog.open("系统提示","您选择的号码："+$location.search().duplicateNum+"已被购买，请重新选择")),scope.checks=eval(attrs.checks),scope.getContent=function(){getMeiqia(),_MEIQIA("showPanel",{groupToken:"93b053a08494a8319cba2ce52b3d1e58"}),writebdLog(scope.category,"_CustConsult","渠道号",scope.gh)},scope.checkForm=function(){scope.$root.checkActiveCode()?(writebdLog(scope.category,"_BuyNow","渠道号",scope.gh),scope.$root.toast.open(),$form.submit()):($scrollTo=$("#receiverAddress"),$container.animate({scrollTop:$scrollTo.offset().top-$container.offset().top+$container.scrollTop()}),$("#receiverAddressPanel").slideDown(),$(".adr-tab").addClass("down"))},scope.submitForm=function(e,t){var o=$(e.currentTarget);if(o.hasClass("disabled"))return!1;if(1==scope.buyType)if(attrs.checkMainNumber){if(attrs.checkSubNumber){if(scope.checkMainNumber()&&scope.checkSubNumber())if(scope.checkAddress())scope.checkForm();else{var a=$("#receiverAddress");$container.animate({scrollTop:a.offset().top-$container.offset().top+$container.scrollTop()-50}),$("#receiverAddressPanel").slideDown(),$(".adr-tab").addClass("down")}}else if(attrs.checkSimType){if(scope.checkMainNumber()&&scope.checkSimType())if(scope.checkAddress())scope.checkForm();else{var a=$("#receiverAddress");$container.animate({scrollTop:a.offset().top-$container.offset().top+$container.scrollTop()-50}),$("#receiverAddressPanel").slideDown(),$(".adr-tab").addClass("down")}}else if(scope.checkMainNumber())if(scope.checkAddress())scope.checkForm();else{var a=$("#receiverAddress");$container.animate({scrollTop:a.offset().top-$container.offset().top+$container.scrollTop()-50}),$("#receiverAddressPanel").slideDown(),$(".adr-tab").addClass("down")}}else if(scope.checkAddress())scope.checkForm();else{var a=$("#receiverAddress");$container.animate({scrollTop:a.offset().top-$container.offset().top+$container.scrollTop()-50}),$("#receiverAddressPanel").slideDown(),$(".adr-tab").addClass("down")}else if(scope.checkAddress())scope.checkForm();else{var a=$("#receiverAddress");$container.animate({scrollTop:a.offset().top-$container.offset().top+$container.scrollTop()-50}),$("#receiverAddressPanel").slideDown(),$(".adr-tab").addClass("down")}},setInterval(getRTime,1e3)}}}]),app.directive("mainColors",["$http","$q","$timeout",function(e,t,o){return{restrict:"E",templateUrl:"modules/phoneColors/mainColors/colors.html",
link:function(e,t,o){e.mainColorTitle=o.title,e.mainColorSubTitle=o.subTitle,e.$root.mainColor=e.phone.phoneTypes[0].mediaProductList[getIndex(e.phone.phoneTypes[0].mediaProductList,"selected",1)],e.setMainPhoneColor=function(t,o){t.preventDefault();var a=$(t.currentTarget);return!a.hasClass("disabled")&&(a.parent().siblings().children().removeClass("curr"),a.addClass("curr"),e.$root.mainColor=o,writebdLog(e.category,"_mainFuselageColor","渠道号",e.gh),void 0)}}}}]),app.directive("mainColorsLj",["$http","$q","$timeout","$location",function(e,t,o,a){return{restrict:"E",templateUrl:"modules/phoneColors/mainColorsLj/colors.html",link:function(e,t,o){e.mainColorTitle=o.title,e.mainColorSubTitle=o.subTitle,"red"==a.search().colorTag?(e.mainColorIndex=getIndex(e.phone.phoneTypes[0].mediaProductList,"name","红色"),void 0!=e.mainColorIndex&&0!=e.phone.phoneTypes[0].mediaProductList[e.mainColorIndex].stock||(e.mainColorIndex=getIndex(e.phone.phoneTypes[0].mediaProductList,"selected",1))):e.mainColorIndex=getIndex(e.phone.phoneTypes[0].mediaProductList,"selected",1),e.$root.mainColor=e.phone.phoneTypes[0].mediaProductList[e.mainColorIndex],e.setMainPhoneColor=function(t,o){t.preventDefault();var a=$(t.currentTarget);return!a.hasClass("disabled")&&(a.parent().siblings().children().removeClass("curr"),a.addClass("curr"),e.$root.mainColor=o,writebdLog(e.category,"_mainFuselageColor","渠道号",e.gh),void 0)}}}}]),app.directive("couponList",["$http","$q","$timeout",function(e,t,o){return{restrict:"E",templateUrl:"modules/coupon/couponList/couponList.html",link:function(t,a,r){Date.parse(new Date);t.selectCoupon=function(e,o){t.$root.coupons[o].available&&(t.$root.coupons[o].checked=!t.$root.coupons[o].checked)},t.$watch("receiver.mobile",function(t,a,r){void 0!=t&&""!=t&&e.jsonp(cfApi.apiHost+"/product/getCouponList.html?recieverMobile="+t+"&activity="+r.activity+"&s=wap&callback=JSON_CALLBACK").success(function(e,t,a,n){r.$root.coupons={},o(function(){var t,o,a,n,i,c;if(0==e.length){r.$root.hasCoupon=!1;for(var s=0;s<r.$root.coupons.length;s++)r.$root.coupons[s].checked=!1}else r.$root.hasCoupon=!0;$.each(e,function(s,p){"JM"==e[s].couponBatchName&&(t="exemptionCertificate",o=p.couponNo,a="￥800满减券",n="每满￥100送￥5",i=!0,c=!0,366!=r.phone.activityproductId&&367!=r.phone.activityproductId&&368!=r.phone.activityproductId&&369!=r.phone.activityproductId||(i=!1,c=!1),r.$root.coupons.jm={couponType:t,couponNo:o,couponName:a,couponTips:n,available:i,checked:c}),"MX"==e[s].couponBatchName&&(t="interestCoupons",o=p.couponNo,a="12期免息券",n="19家银行信用卡免息",i=!0,c=!0,366!=r.phone.activityproductId&&367!=r.phone.activityproductId&&368!=r.phone.activityproductId&&369!=r.phone.activityproductId||(i=!1,c=!1),r.$root.coupons.mx={couponType:t,couponNo:o,couponName:a,couponTips:n,available:i,checked:c}),"HF"==e[s].couponBatchName&&(t="billVoucher",o=p.couponNo,a="￥720话费券",n="每月返还￥20话费",i=!0,c=!0,366!=r.phone.activityproductId&&367!=r.phone.activityproductId&&368!=r.phone.activityproductId&&369!=r.phone.activityproductId||(i=!1,c=!1),r.$root.coupons.hf={couponType:t,couponNo:o,couponName:a,couponTips:n,available:i,checked:c})})})}).error(function(e,t,o,a){console.log(t)})}),t.$watch("gettedCoupon",function(t,o,a){void 0!=t&&""!=t&&e.jsonp(cfApi.apiHost+"/product/getCouponList.html?recieverMobile="+a.receiver.mobile+"&activity="+a.activity+"&s=wap&callback=JSON_CALLBACK").success(function(e,t,o,r){a.$root.coupons={};var n,i,c,s,p,l;if(0==e.length){a.$root.hasCoupon=!1;for(var u=0;u<a.$root.coupons.length;u++)a.$root.coupons[u].checked=!1}else a.$root.hasCoupon=!0;$.each(e,function(t,o){"JM"==e[t].couponBatchName&&(n="exemptionCertificate",i=o.couponNo,c="￥800满减券",s="每满￥100送￥10",p=!0,l=!0,a.$root.coupons.jm={couponType:n,couponNo:i,couponName:c,couponTips:s,available:p,checked:l}),"MX"==e[t].couponBatchName&&(n="interestCoupons",i=o.couponNo,c="12期免息券",s="19家银行信用卡免息",p=!0,l=!0,a.$root.coupons.mx={couponType:n,couponNo:i,couponName:c,couponTips:s,available:p,checked:l}),"HF"==e[t].couponBatchName&&(n="billVoucher",i=o.couponNo,c="12期免息券",s="19家银行信用卡免息",p=!0,l=!0,a.$root.coupons.hf={couponType:n,couponNo:i,couponName:c,couponTips:s,available:p,checked:l})})}).error(function(e,t,o,a){console.log(t)})})}}}]),app.directive("subColors",["$http","$q","$timeout",function(e,t,o){return{restrict:"E",templateUrl:"modules/phoneColors/subColors/colors.html",link:function(e,t,o){e.subColorTitle=o.title,e.subColorSubTitle=o.subTitle,e.subColor=e.phone.phoneTypes[1].mediaProductList[0],e.setSubPhoneColor=function(t,o){t.preventDefault();var a=$(t.currentTarget);return!a.hasClass("disabled")&&(a.parent().siblings().children().removeClass("curr"),a.addClass("curr"),e.subColor=o,writebdLog(e.category,"_subFuselageColor","渠道号",e.gh),void 0)}}}}]),app.directive("nPayType",["$location","$compile","$q",function(e,t,o){return{restrict:"E",templateUrl:"modules/payType/n/payType.html",link:function(e,t,o){function a(t){r=n[t],writebdLog(e.category,"_"+r,"渠道号",e.gh)}e.payTitle=o.title,e.paySubTitle=o.subTitle,e.details="预付首月月租",e.visibility=o.visibility,"false"===e.visibility&&$(t).addClass("hide");$(o.submit);e.setDefaultPayType=function(t,o){e.payType=t,e.payTypeName=o},e.setDefaultPayType(2,"信用卡分期"),e.cardPay&&e.setDefaultPayType(0,"在线支付"),e.totolPrice<1500&&e.setDefaultPayType(0,"一次性支付"),"pcd"==e.pageType&&(e.details="￥9.9元掏靓号"),e.setPayType=function(t,o){t.preventDefault(),e.payType=o;var r=$(t.currentTarget);e.payTypeName=r.find(".title").html(),a(o)};var r,n=["payAll","payCOD","payMonthly"]}}}]),app.directive("aPayType",["$location","$compile","$q",function(e,t,o){return{restrict:"E",templateUrl:"modules/payType/a/payType.html",link:function(e,t,o){function a(t){r=n[t],writebdLog(e.category,"_"+r,"渠道号",e.gh)}e.payTitle=o.title,e.paySubTitle=o.subTitle,e.details="预付首月月租",e.visibility=o.visibility,"false"===e.visibility&&$(t).addClass("hide");$(o.submit);e.setDefaultPayType=function(t,o){e.payType=t,e.payTypeName=o},e.setPayType=function(t,o){t.preventDefault(),e.payType=o;var r=$(t.currentTarget);e.payTypeName=r.data("title"),a(o)};var r,n=["payAll","payCOD","payMonthly"]}}}]),app.directive("phoneBPackage",["$http","$stateParams","$q","$cookieStore","$location",function(e,t,o,a,r){return{restrict:"E",templateUrl:"modules/phonePackage/b/b.html",controller:"numberBController",link:function(e,o,n){e.packageTitle=n.title,e.packageSubTitle=n.subTitle,e.packageType=n.type,e["class"]=n.addClass,e.visibility=n.visibility;var i=$(".content-scrollable");e.queryNumber=!0,"false"===e.visibility&&$(o).addClass("hide"),e.showTime=n.showTime,e.reChoose=function(){e.queryNumber=!0},e.setPhonePackage=function(t,o){t.preventDefault();var a=$(t.currentTarget);e["package"]=o,$(".pick-panel").hide(),e.pickPanelShow=!0,a.siblings(".pick-number").find(".pick-panel").show(),e.queryNumber=!0,writebdLog(e.category,"_SelectPackage","渠道号",e.gh)},e.showOverLay=function(t){var o=$("#"+t).html();e.$root.Overlay.open(o),writebdLog(e.category,"_IsContractPackage","渠道号",e.gh)};var i=$(".content-scrollable");e.$root.checkMainNumber=function(){if(!e.couponForm.mainNumber.$valid){var t=$("#phonePackage");return i.animate({scrollTop:t.offset().top-i.offset().top+i.scrollTop()-50}),!1}return!0},e.$root.checkMainProductId=function(){if(!e.couponForm.mainProductId.$valid){var t=$("#pickPackagePanel");return i.animate({scrollTop:t.offset().top-i.offset().top+i.scrollTop()-50}),!1}return!0},e.setMainNumber=function(t,o){t.preventDefault();$(t.currentTarget);checkSameNumber(o.n,e.subNumber)?(e.mainNumber=o.n,e.queryNumber=!1,writebdLog(e.category,"_mainSelectNumber","渠道号",e.gh)):e.$root.dialog.open("系统提示","您选择的主卡号码和副卡号码相同，请重新选择")},e.showMNumberPn=function(t){"true"!=n.noAnimate&&($("#pickMainNumberPanel").slideToggle(),$(t.currentTarget).toggleClass("down")),writebdLog(e.category,"_mainCuteNumber","渠道号",e.gh)},e.ok=function(){e.$root.checkMainProductId()||e.$root.dialog.open("系统提示","请选择套餐"),e.$root.checkMainNumber()||e.$root.dialog.open("系统提示","请选择手机号码"),a.put("pkgAndNumber",{pkg:e.pkg,number:e.mainNumber}),r.path("/phs/sg/C/"+t.phoneId)}}}}]).controller("numberBController",["$scope","$cookieStore","$http","$compile",function($scope,$cookieStore,$http){$scope.phoneData=new Array,$scope.phoneSubData=new Array,$scope.phoneMainFilter=function(e){var t=new Array;""!=e?($.each($scope.phoneData,function(o,a){a.n.indexOf(e)>=0&&t.push(a)}),$scope.filterData=t):$scope.filterData=$scope.phoneData,$scope.mainItems=$scope.filterData.slice(0,$scope.pageSize),$scope.dataInit()},$scope.phoneSubFilter=function(e){var t=new Array;""!=e?($.each($scope.phoneSubData,function(o,a){a.n.indexOf(e)>=0&&t.push(a)}),$scope.filterSubData=t):$scope.filterSubData=$scope.phoneSubData,$scope.subItems=$scope.filterSubData.slice(0,$scope.pageSize),$scope.dataInit()},$scope.inputNumber=function(e,t){""!=e&&writebdLog($scope.category,"_"+t+"InputNumber","渠道号",$scope.gh)},$http.jsonp(cfApi.apiHost+"/wap/taokafanghaoNew/fetchLuckNumber.html?time="+(new Date).getTime()+"&callback=JSON_CALLBACK").success(function(data,status,headers,config){data=data.sort(function(e,t){return t.s-e.s}),$.each(eval(data),function(e,t){t.s<=800&&($scope.phoneData.push(t),0==t.t&&$scope.phoneSubData.push(t))}),$scope.dataInit=function(){$scope.selPage=1,$scope.pageList=[],$scope.pages=Math.ceil($scope.filterData.length/$scope.pageSize),$scope.newPages=$scope.pages>5?5:$scope.pages;for(var e=0;e<$scope.newPages;e++)$scope.pageList.push(e+1)},$scope.filterData=$scope.phoneData,$scope.filterSubData=$scope.phoneSubData,$scope.pageSize=6,$scope.setData=function(e){"main"==e?$scope.mainItems=$scope.filterData.slice($scope.pageSize*($scope.selPage-1),$scope.selPage*$scope.pageSize):$scope.subItems=$scope.filterSubData.slice($scope.pageSize*($scope.selPage-1),$scope.selPage*$scope.pageSize)},$scope.mainItems=$scope.filterData.slice(0,$scope.pageSize),$scope.subItems=$scope.filterSubData.slice(0,$scope.pageSize),$scope.dataInit(),$scope.selectPage=function(e,t){if(!(e<1||e>$scope.pages)){if(e>2){for(var o=[],a=e-3;a<(e+2>$scope.pages?$scope.pages:e+2);a++)o.push(a+1);$scope.pageList=o}$scope.selPage=e,$scope.setData(t),$scope.isActivePage(e)}},$scope.isActivePage=function(e){return $scope.selPage==e},$scope.Previous=function(e){$scope.selectPage($scope.selPage-1,e)},$scope.Next=function(e){$scope.selectPage($scope.selPage+1,e),writebdLog($scope.category,"_"+e+"ChangeALot","渠道号",$scope.gh)}}).error(function(e,t,o,a){console.log(t)})}]),app.directive("cPayType",["$location","$compile","$q",function(e,t,o){return{restrict:"E",templateUrl:"modules/payType/c/payType.html",link:function(e,t,o){function a(t){r=n[t],writebdLog(e.category,"_"+r,"渠道号",e.gh)}e.payTitle=o.title,e.paySubTitle=o.subTitle,e.details="预付首月月租",e.visibility=o.visibility,"false"===e.visibility&&$(t).addClass("hide");$(o.submit);e.setDefaultPayType=function(t,o){e.payType=t,e.payTypeName=o},e.cardPay&&e.setDefaultPayType(0,"在线支付"),e.totolPrice<1500&&e.setDefaultPayType(0,"马上付款"),"pcd"==e.pageType&&(e.details="￥9.9元掏靓号"),e.setPayType=function(t,o){t.preventDefault(),e.payType=o;var r=$(t.currentTarget);e.payTypeName=r.data("title"),a(o)};var r,n=["payAll","payCOD","payMonthly"]}}}]),app.directive("phoneDPackage",["$http","$stateParams","$q","$cookieStore","$location",function(e,t,o,a,r){return{restrict:"E",templateUrl:"modules/phonePackage/d/d.html",controller:"numberDController",link:function(e,o,n){e.packageTitle=n.title,e.packageSubTitle=n.subTitle,e.packageType=n.type,e["class"]=n.addClass,e.visibility=n.visibility;var i=$(".content-scrollable");e.queryNumber=!0,"false"===e.visibility&&$(o).addClass("hide"),e.showTime=n.showTime,e.reChoose=function(){e.queryNumber=!0},e.setPhonePackage=function(t,o){t.preventDefault();var a=$(t.currentTarget);e["package"]=o,$(".pick-panel").hide(),e.pickPanelShow=!0,a.siblings(".pick-number").find(".pick-panel").show(),e.queryNumber=!0,writebdLog(e.category,"_SelectPackage","渠道号",e.gh)},e.showOverLay=function(t){var o=$("#"+t).html();e.$root.Overlay.open(o),writebdLog(e.category,"_IsContractPackage","渠道号",e.gh)};var i=$(".content-scrollable");e.$root.checkMainNumber=function(){if(!e.checkoutForm.mainNumber.$valid){var t=$("#phonePackage");return i.animate({scrollTop:t.offset().top-i.offset().top+i.scrollTop()-50}),!1}return!0},e.$root.checkMainProductId=function(){if(!e.checkoutForm.mainProductId.$valid){var t=$("#pickPackagePanel");return i.animate({scrollTop:t.offset().top-i.offset().top+i.scrollTop()-50}),!1}return!0},e.setMainNumber=function(t,o){t.preventDefault();$(t.currentTarget);checkSameNumber(o.n,e.subNumber)?(e.mainNumber=o.n,e.queryNumber=!1,writebdLog(e.category,"_mainSelectNumber","渠道号",e.gh)):e.$root.dialog.open("系统提示","您选择的主卡号码和副卡号码相同，请重新选择")},e.showMNumberPn=function(t){"true"!=n.noAnimate&&($("#pickMainNumberPanel").slideToggle(),$(t.currentTarget).toggleClass("down")),writebdLog(e.category,"_mainCuteNumber","渠道号",e.gh)},e.ok=function(){e.$root.checkMainProductId()||e.$root.dialog.open("系统提示","请选择套餐"),e.$root.checkMainNumber()||e.$root.dialog.open("系统提示","请选择手机号码"),a.put("pkgAndNumber",{pkg:e.pkg,number:e.mainNumber}),r.path("/phs/sg/C/"+t.phoneId)}}}}]).controller("numberDController",["$scope","$cookieStore","$http","$compile",function($scope,$cookieStore,$http){$scope.phoneData=new Array,$scope.phoneSubData=new Array,$scope.phoneMainFilter=function(e){var t=new Array;""!=e?($.each($scope.phoneData,function(o,a){a.n.indexOf(e)>=0&&t.push(a)}),$scope.filterData=t):$scope.filterData=$scope.phoneData,$scope.mainItems=$scope.filterData.slice(0,$scope.pageSize),$scope.dataInit()},$scope.phoneSubFilter=function(e){var t=new Array;""!=e?($.each($scope.phoneSubData,function(o,a){a.n.indexOf(e)>=0&&t.push(a)}),$scope.filterSubData=t):$scope.filterSubData=$scope.phoneSubData,$scope.subItems=$scope.filterSubData.slice(0,$scope.pageSize),$scope.dataInit()},$scope.inputNumber=function(e,t){""!=e&&writebdLog($scope.category,"_"+t+"InputNumber","渠道号",$scope.gh)},$http.jsonp(cfApi.apiHost+"/wap/taokafanghaoNew/fetchLuckNumber.html?time="+(new Date).getTime()+"&callback=JSON_CALLBACK").success(function(data,status,headers,config){data=data.sort(function(e,t){return t.s-e.s}),$.each(eval(data),function(e,t){t.s<=800&&($scope.phoneData.push(t),0==t.t&&$scope.phoneSubData.push(t))}),$scope.dataInit=function(){$scope.selPage=1,$scope.pageList=[],$scope.pages=Math.ceil($scope.filterData.length/$scope.pageSize),$scope.newPages=$scope.pages>5?5:$scope.pages;for(var e=0;e<$scope.newPages;e++)$scope.pageList.push(e+1)},$scope.filterData=$scope.phoneData,$scope.filterSubData=$scope.phoneSubData,$scope.pageSize=6,$scope.setData=function(e){"main"==e?$scope.mainItems=$scope.filterData.slice($scope.pageSize*($scope.selPage-1),$scope.selPage*$scope.pageSize):$scope.subItems=$scope.filterSubData.slice($scope.pageSize*($scope.selPage-1),$scope.selPage*$scope.pageSize)},$scope.mainItems=$scope.filterData.slice(0,$scope.pageSize),$scope.subItems=$scope.filterSubData.slice(0,$scope.pageSize),$scope.dataInit(),$scope.selectPage=function(e,t){if(!(e<1||e>$scope.pages)){if(e>2){for(var o=[],a=e-3;a<(e+2>$scope.pages?$scope.pages:e+2);a++)o.push(a+1);$scope.pageList=o}$scope.selPage=e,$scope.setData(t),$scope.isActivePage(e)}},$scope.isActivePage=function(e){return $scope.selPage==e},$scope.Previous=function(e){$scope.selectPage($scope.selPage-1,e)},$scope.Next=function(e){$scope.selectPage($scope.selPage+1,e),writebdLog($scope.category,"_"+e+"ChangeALot","渠道号",$scope.gh)}}).error(function(e,t,o,a){console.log(t)})}]),app.directive("phoneNPackage",["$http","$stateParams","$q",function(e,t,o){return{restrict:"E",templateUrl:"modules/phonePackage/n/n.html",link:function(e,t,o){e.packageTitle=o.title,e.packageSubTitle=o.subTitle,e.packageType=o.type,e["class"]=o.addClass,e.visibility=o.visibility,"false"===e.visibility&&$(t).addClass("hide"),e.showTime=o.showTime}}}]),app.directive("phoneCPackage",["$http","$stateParams","$q","$cookieStore","$location",function(e,t,o,a,r){return{restrict:"E",templateUrl:"modules/phonePackage/c/c.html",controller:"numberCController",link:function(e,o,n){e.packageTitle=n.title,e.packageSubTitle=n.subTitle,e.packageType=n.type,e["class"]=n.addClass,e.visibility=n.visibility;var i=$(".content-scrollable");e.queryNumber=!0,"false"===e.visibility&&$(o).addClass("hide"),e.showTime=n.showTime,e.reChoose=function(){e.queryNumber=!0},e.setPhonePackage=function(t,o){t.preventDefault();var a=$(t.currentTarget);e["package"]=o,$(".pick-panel").hide(),e.pickPanelShow=!0,a.siblings(".pick-number").find(".pick-panel").show(),e.queryNumber=!0,writebdLog(e.category,"_SelectPackage","渠道号",e.gh)},e.showOverLay=function(t){var o=$("#"+t).html();e.$root.Overlay.open(o),writebdLog(e.category,"_IsContractPackage","渠道号",e.gh)};var i=$(".content-scrollable");e.$root.checkMainNumber=function(){if(!e.checkoutForm.mainNumber.$valid){var t=$("#phonePackage");return i.animate({scrollTop:t.offset().top-i.offset().top+i.scrollTop()-50}),!1}return!0},e.$root.checkMainProductId=function(){if(!e.checkoutForm.mainProductId.$valid){var t=$("#pickPackagePanel");return i.animate({scrollTop:t.offset().top-i.offset().top+i.scrollTop()-50}),!1}return!0},e.setMainNumber=function(t,o){t.preventDefault();$(t.currentTarget);checkSameNumber(o.n,e.subNumber)?(e.mainNumber=o.n,e.queryNumber=!1,writebdLog(e.category,"_mainSelectNumber","渠道号",e.gh)):e.$root.dialog.open("系统提示","您选择的主卡号码和副卡号码相同，请重新选择")},e.showMNumberPn=function(t){"true"!=n.noAnimate&&($("#pickMainNumberPanel").slideToggle(),$(t.currentTarget).toggleClass("down")),writebdLog(e.category,"_mainCuteNumber","渠道号",e.gh)},e.ok=function(){e.$root.checkMainProductId()||e.$root.dialog.open("系统提示","请选择套餐"),e.$root.checkMainNumber()||e.$root.dialog.open("系统提示","请选择手机号码"),a.put("pkgAndNumber",{pkg:e.pkg,number:e.mainNumber}),r.path("/phs/sg/C/"+t.phoneId)}}}}]).controller("numberCController",["$scope","$cookieStore","$http","$compile",function($scope,$cookieStore,$http){$scope.phoneData=new Array,$scope.phoneSubData=new Array,$scope.phoneMainFilter=function(e){var t=new Array;""!=e?($.each($scope.phoneData,function(o,a){a.n.indexOf(e)>=0&&t.push(a)}),$scope.filterData=t):$scope.filterData=$scope.phoneData,$scope.mainItems=$scope.filterData.slice(0,$scope.pageSize),$scope.dataInit()},$scope.phoneSubFilter=function(e){var t=new Array;""!=e?($.each($scope.phoneSubData,function(o,a){a.n.indexOf(e)>=0&&t.push(a)}),$scope.filterSubData=t):$scope.filterSubData=$scope.phoneSubData,$scope.subItems=$scope.filterSubData.slice(0,$scope.pageSize),$scope.dataInit()},$scope.inputNumber=function(e,t){""!=e&&writebdLog($scope.category,"_"+t+"InputNumber","渠道号",$scope.gh)},$http.jsonp(cfApi.apiHost+"/wap/taokafanghaoNew/fetchLuckNumber.html?time="+(new Date).getTime()+"&callback=JSON_CALLBACK").success(function(data,status,headers,config){data=data.sort(function(e,t){return t.s-e.s}),$.each(eval(data),function(e,t){t.s<=800&&($scope.phoneData.push(t),0==t.t&&$scope.phoneSubData.push(t))}),$scope.dataInit=function(){$scope.selPage=1,$scope.pageList=[],$scope.pages=Math.ceil($scope.filterData.length/$scope.pageSize),$scope.newPages=$scope.pages>5?5:$scope.pages;for(var e=0;e<$scope.newPages;e++)$scope.pageList.push(e+1)},$scope.filterData=$scope.phoneData,$scope.filterSubData=$scope.phoneSubData,$scope.pageSize=6,$scope.setData=function(e){"main"==e?$scope.mainItems=$scope.filterData.slice($scope.pageSize*($scope.selPage-1),$scope.selPage*$scope.pageSize):$scope.subItems=$scope.filterSubData.slice($scope.pageSize*($scope.selPage-1),$scope.selPage*$scope.pageSize)},$scope.mainItems=$scope.filterData.slice(0,$scope.pageSize),$scope.subItems=$scope.filterSubData.slice(0,$scope.pageSize),$scope.dataInit(),$scope.selectPage=function(e,t){if(!(e<1||e>$scope.pages)){if(e>2){for(var o=[],a=e-3;a<(e+2>$scope.pages?$scope.pages:e+2);a++)o.push(a+1);$scope.pageList=o}$scope.selPage=e,$scope.setData(t),$scope.isActivePage(e)}},$scope.isActivePage=function(e){return $scope.selPage==e},$scope.Previous=function(e){$scope.selectPage($scope.selPage-1,e)},$scope.Next=function(e){$scope.selectPage($scope.selPage+1,e),writebdLog($scope.category,"_"+e+"ChangeALot","渠道号",$scope.gh)}}).error(function(e,t,o,a){console.log(t)})}]),app.directive("flowCards",["$http",function(e){return{restrict:"E",templateUrl:"modules/recharge/flowCards/flowCards.html",link:function(t,o,a){var r=$(".flow-cards");t.getFlowCard=function(e,o){t.flowCard=o,r.slideUp()},t.$watch("receiverMobile",function(t,o,a){if(t!=o){var r=baseApiUri+"/getUserFlowCards/"+t;e.get(r).success(function(e){a.flowCards=e})}})}}}]),app.directive("flowUsing",[function(){return{restrict:"E",templateUrl:"modules/recharge/flowUsing/flowUsing.html",link:function(e,t,o){}}}]),app.directive("adr",["$compile","$cookieStore","$http","$interval",function($compile,$cookieStore,$http,$interval){return{restrict:"E",templateUrl:"modules/receiverAddress/n/adr.html",link:function(scope,element,attrs){function writeAddressBar(){$("#receiverAddressPanel").is(":hidden")?writebdLog(scope.category,"_ShowAddressBar","渠道号",scope.gh):writebdLog(scope.category,"_StopAddressBar","渠道号",scope.gh)}scope.receiverTitle=attrs.title,$compile($("#address-panel").clone().appendTo(".page"))(scope),$compile($(".address-overlay").clone().appendTo(".page"))(scope),$(".address #address-panel").remove(),$(".address .address-overlay").remove();var value1,value2,value3,value4,$inputsStoreSelect=$(element).find("#inputsStoreSelect"),$storeSelector=$("#container"),$storeClose=$storeSelector.find(".close"),$objTabItem=$("#cfStock .tab").find("li"),$dataAreas=$("#cfStock").find(".mc"),$areaList=$dataAreas.find(".area-list");$cookieStore.get("receiver")?scope.receiver=$cookieStore.get("receiver"):scope.receiver={name:"",mobile:"",city:"",room:""},$cookieStore.get("activeCode")?scope.activeCode=$cookieStore.get("activeCode"):scope.activeCode="";var stockHide=function(){$storeSelector.removeClass("hover"),$storeClose.hide()},stockShow=function(){$storeSelector.addClass("hover"),$storeClose.show()},tabShow=function(e){$objTabItem.removeClass("curr"),$objTabItem.eq(e).addClass("curr")},dataAreaShow=function(e){$dataAreas.hide(),$dataAreas.eq(e).show()};scope.inputHomeCode=function(){writebdLog(scope.category,"_InputHomeCode","渠道号",scope.gh)},scope.inputAddress=function(e){void 0==e||""==e||e.length<=3||writebdLog(scope.category,"_Address","渠道号",scope.gh)},scope.paracont="获取验证码",scope.paraclass="but_null";var second=59,timePromise=void 0;scope.getActiveCode=function(e,t){$(t.currentTarget).hasClass("not"),scope.toast.open(),$http.get("http://app.yfq.cn:3099/api/getActiveCode/"+e).success(function(e){scope.toast.close(),""==e&&(timePromise=$interval(function(){second<=0?($interval.cancel(timePromise),timePromise=void 0,second=59,scope.paracont="重发验证码",scope.paraclass="but_null"):(scope.paracont=second+"秒后可重发",scope.paraclass="not but_null",second--)},1e3,100))}),writebdLog(scope.category,"_VariHomeCode","渠道号",scope.gh)},scope.$root.checkActiveCode=function(){return scope.checkoutForm.activeCode.$valid?checkMobileCode(scope.receiver.mobile,scope.activeCode)?($cookieStore.put("activeCode",scope.activeCode),!0):($(".input-vcode").removeClass("weui-cell_success"),$(".input-vcode").addClass("weui-cell_warn"),!1):($(".input-vcode").addClass("weui-cell_warn"),!1)};var getArea=function(id,index,province,city,district){var url,thisHtml;url=0===index?cfApi.apiHost+"/wap/comm/czCommonController/getRegion.html?need=province&key="+new Date:1===index?cfApi.apiHost+"/wap/comm/czCommonController/getRegion.html?need=city&province="+encodeURI(province)+"&key="+new Date:2===index?cfApi.apiHost+"/wap/comm/czCommonController/getRegion.html?need=district&province="+encodeURI(province)+"&city="+encodeURI(city)+"&key="+new Date:cfApi.apiHost+"/wap/comm/czCommonController/getRegion.html?need=street&province="+encodeURI(province)+"&city="+encodeURI(city)+"&district="+encodeURI(district)+"&key="+new Date,$areaList.eq(index).html(""),$.ajax({dataType:"jsonp",type:"get",contentType:"application/json; charset=utf-8",url:url,jsonp:"callback",jsonpCallback:"getAreaList",success:function(json){$.each(eval(json),function(e,t){t.name.length>6?$areaList.eq(index).append("<li data-value="+t.name+" class='long-area'><a data-value="+t.name+"has-hash='false' href='javascript:userTrack("+t.name+");'>"+t.name+"</a></li>"):$areaList.eq(index).append("<li data-value="+t.name+"><a data-value="+t.name+"has-hash='false' href='javascript:userTrack("+t.name+");'>"+t.name+"</a></li>")})},error:function(e){alert("获取地址信息失败，请联系客服")}})};$inputsStoreSelect.click(function(){getArea(0,0,"","",""),stockShow(),dataAreaShow(0),tabShow(0)}),$objTabItem.click(function(e){var t=$(this).index();return 0===t?stockHide():(tabShow(t-1),dataAreaShow(t-1)),!1}),$areaList.on("click","li",function(e){var t,o,a=$(this);return o=a.parentsUntil("#cfStock",".mc").data("area"),t=a.find("a").data("value"),0===o?(dataAreaShow(1),tabShow(1),value1=a.data("value"),getArea(t,1,value1,"","")):1===o?(dataAreaShow(2),tabShow(2),value2=a.data("value"),getArea(t,2,value1,value2,"")):2===o?(value3=a.data("value"),stockHide(),$("#store-text").find("div").html(value1+value2+value3),scope.receiver.city=value1+value2+value3):3===o&&(value4=a.data("value"),stockHide(),$("#store-text").find("div").html(value1+value2+value3+value4),scope.receiver.city=value1+value2+value3+value4),scope.$apply(),!1}),scope.$root.checkAddress=function(){return $("#receiverAddress").find(".weui_cell").removeClass("weui-cell_warn"),scope.checkoutForm.reciverName.$valid?scope.checkoutForm.receiverMobile.$valid?scope.checkoutForm.receiverCity.$valid?scope.checkoutForm.receiverRoom.$valid?($cookieStore.put("receiver",scope.receiver),!0):($(".input-room").addClass("weui-cell_warn"),!1):($(".input-city").addClass("weui-cell_warn"),!1):($(".input-mobile").addClass("weui-cell_warn"),!1):($(".input-name").addClass("weui-cell_warn"),!1)},scope.showReceiverPn=function(e){writeAddressBar(),"true"!=attrs.noAnimate&&($("#receiverAddressPanel").slideToggle(),$(".adr-tab").toggleClass("down"))},scope.adrOk=function(){scope.showReceiverPn()}}}}]),app.directive("gzs",["$compile","$cookieStore","$http","$interval",function($compile,$cookieStore,$http,$interval){return{restrict:"E",templateUrl:"modules/receiverAddress/gzs/gzs.html",link:function(scope,element,attrs){function writeAddressBar(){$("#receiverAddressPanel").is(":hidden")?writebdLog(scope.category,"_ShowAddressBar","渠道号",scope.gh):writebdLog(scope.category,"_StopAddressBar","渠道号",scope.gh)}scope.receiverTitle=attrs.title,$compile($("#address-panel").clone().appendTo(".page"))(scope),$compile($(".address-overlay").clone().appendTo(".page"))(scope),$(".address #address-panel").remove(),$(".address .address-overlay").remove();var value1,value2,value3,value4,$inputsStoreSelect=$(element).find("#inputsStoreSelect"),$storeSelector=$("#container"),$storeClose=$storeSelector.find(".close"),$objTabItem=$("#cfStock .tab").find("li"),$dataAreas=$("#cfStock").find(".mc"),$areaList=$dataAreas.find(".area-list");$cookieStore.get("receiver")?scope.receiver=$cookieStore.get("receiver"):scope.receiver={name:"",mobile:"",city:"",room:""},$cookieStore.get("activeCode")?scope.activeCode=$cookieStore.get("activeCode"):scope.activeCode="";var stockHide=function(){$storeSelector.removeClass("hover"),$storeClose.hide()},stockShow=function(){$storeSelector.addClass("hover"),$storeClose.show()},tabShow=function(e){$objTabItem.removeClass("curr"),$objTabItem.eq(e).addClass("curr")},dataAreaShow=function(e){$dataAreas.hide(),$dataAreas.eq(e).show()};scope.inputHomeCode=function(){writebdLog(scope.category,"_InputHomeCode","渠道号",scope.gh)},scope.inputAddress=function(e){void 0==e||""==e||e.length<=3||writebdLog(scope.category,"_Address","渠道号",scope.gh)},scope.paracont="获取验证码",scope.paraclass="but_null";var second=59,timePromise=void 0;scope.getActiveCode=function(e){$http.get("http://app.yfq.cn:3099/api/getActiveCode/"+e).success(function(e){""==e&&(timePromise=$interval(function(){second<=0?($interval.cancel(timePromise),timePromise=void 0,second=59,scope.paracont="重发验证码",scope.paraclass="but_null"):(scope.paracont=second+"秒后可重发",scope.paraclass="not but_null",second--)},1e3,100))}),writebdLog(scope.category,"_VariHomeCode","渠道号",scope.gh)},scope.$root.checkActiveCode=function(){return scope.checkoutForm.activeCode.$valid?checkMobileCode(scope.receiver.mobile,scope.activeCode)?($cookieStore.put("activeCode",scope.activeCode),!0):($(".input-vcode").removeClass("weui-cell_success"),$(".input-vcode").addClass("weui-cell_warn"),!1):($(".input-vcode").addClass("weui-cell_warn"),!1)};var getArea=function(id,index,province,city,district){var url,thisHtml;url=0===index?cfApi.apiHost+"/wap/comm/czCommonController/getRegion.html?need=province&key="+new Date:1===index?cfApi.apiHost+"/wap/comm/czCommonController/getRegion.html?need=city&province="+encodeURI(province)+"&key="+new Date:2===index?cfApi.apiHost+"/wap/comm/czCommonController/getRegion.html?need=district&province="+encodeURI(province)+"&city="+encodeURI(city)+"&key="+new Date:cfApi.apiHost+"/wap/comm/czCommonController/getRegion.html?need=street&province="+encodeURI(province)+"&city="+encodeURI(city)+"&district="+encodeURI(district)+"&key="+new Date,$areaList.eq(index).html(""),$.ajax({dataType:"jsonp",type:"get",contentType:"application/json; charset=utf-8",url:url,jsonp:"callback",jsonpCallback:"getAreaList",success:function(json){$.each(eval(json),function(e,t){t.name.length>6?$areaList.eq(index).append("<li data-value="+t.name+" class='long-area'><a data-value="+t.name+">"+t.name+"</a></li>"):$areaList.eq(index).append("<li data-value="+t.name+"><a data-value="+t.name+">"+t.name+"</a></li>")})},error:function(e){alert("获取地址信息失败，请联系客服")}})};$inputsStoreSelect.click(function(){getArea("广州市",2,"广东省","广州市",""),stockShow(),dataAreaShow(2),tabShow(2)}),$areaList.on("click","li",function(e){var t,o,a=$(this);return o=a.parentsUntil("#cfStock",".mc").data("area"),t=a.find("a").data("value"),0===o?(dataAreaShow(1),tabShow(1),value1=a.data("value"),getArea(t,1,value1,"","")):1===o?(dataAreaShow(2),tabShow(2),value2=a.data("value"),getArea(t,2,value1,value2,"")):2===o?(value3=a.data("value"),stockHide(),$("#store-text").find("div").html("广东省广州市"+value3),scope.receiver.city="广东省广州市"+value3):3===o&&(value4=a.data("value"),stockHide(),$("#store-text").find("div").html(value1+value2+value3+value4),scope.receiver.city=value1+value2+value3+value4),scope.$apply(),!1}),scope.$root.checkAddress=function(){return $("#receiverAddress").find(".weui_cell").removeClass("weui-cell_warn"),scope.checkoutForm.reciverName.$valid?scope.checkoutForm.receiverMobile.$valid?scope.checkoutForm.receiverCity.$valid?scope.checkoutForm.receiverRoom.$valid?($cookieStore.put("receiver",scope.receiver),!0):($(".input-room").addClass("weui-cell_warn"),!1):($(".input-city").addClass("weui-cell_warn"),!1):($(".input-mobile").addClass("weui-cell_warn"),!1):($(".input-name").addClass("weui-cell_warn"),!1)},scope.showReceiverPn=function(e){writeAddressBar(),"true"!=attrs.noAnimate&&($("#receiverAddressPanel").slideToggle(),$(".adr-tab").toggleClass("down"))},scope.adrOk=function(){scope.showReceiverPn()}}}}]),app.directive("rechargeCards",["$http",function(e){return{restrict:"E",templateUrl:"modules/recharge/rechargeCards/rechargeCards.html",link:function(t,o,a){t.recharge=function(e,o){return e.stopPropagation(),!!$(e.currentTarget).hasClass("active")&&($("#loadingToast").show(),window.location.href="http://m.gd189fq.com/yfqcz/czOrdRechargeController.do?gotoPay&pid="+o+"&iccid="+t.flowCard.iccid,setTimeout(function(){$("#loadingToast").hide()},2e3),void 0)},e.get(baseApiUri+"/getFlowRechargeCard").success(function(e){t.rechargeCards=e})}}}]),app.directive("receiverOAddress",["$compile","$cookieStore","$http","$interval",function($compile,$cookieStore,$http,$interval){return{restrict:"E",templateUrl:"modules/receiverAddress/other/receiverAddress.html",link:function(scope,element,attrs){
scope.receiverTitle=attrs.title,$compile($("#address-panel").clone().appendTo(".page"))(scope),$compile($(".address-overlay").clone().appendTo(".page"))(scope),$(".address #address-panel").remove(),$(".address .address-overlay").remove();var value1,value2,value3,value4,$inputsStoreSelect=$(element).find("#inputsStoreSelect"),$storeSelector=$("#container"),$storeClose=$storeSelector.find(".close"),$objTabItem=$("#cfStock .tab").find("li"),$dataAreas=$("#cfStock").find(".mc"),$areaList=$dataAreas.find(".area-list");$cookieStore.get("receiver")?scope.receiver=$cookieStore.get("receiver"):scope.receiver={name:"",mobile:"",city:"",room:""},$cookieStore.get("activeCode")?scope.activeCode=$cookieStore.get("activeCode"):scope.activeCode="";var stockHide=function(){$storeSelector.removeClass("hover"),$storeClose.hide()},stockShow=function(){$storeSelector.addClass("hover"),$storeClose.show()},tabShow=function(e){$objTabItem.removeClass("curr"),$objTabItem.eq(e).addClass("curr")},dataAreaShow=function(e){$dataAreas.hide(),$dataAreas.eq(e).show()};scope.inputHomeCode=function(){writebdLog(scope.category,"_InputHomeCode","渠道号",scope.gh)},scope.inputAddress=function(e){void 0==e||""==e||e.length<=3||writebdLog(scope.category,"_Address","渠道号",scope.gh)},scope.paracont="获取验证码",scope.paraclass="but_null";var second=59,timePromise=void 0;scope.getActiveCode=function(e,t){$(t.currentTarget).hasClass("not"),scope.toast.open(),$http.get("http://app.yfq.cn:3099/api/getActiveCode/"+e).success(function(e){scope.toast.close(),""==e&&(timePromise=$interval(function(){second<=0?($interval.cancel(timePromise),timePromise=void 0,second=59,scope.paracont="重发验证码",scope.paraclass="but_null"):(scope.paracont=second+"秒后可重发",scope.paraclass="not but_null",second--)},1e3,100))}),writebdLog(scope.category,"_VariHomeCode","渠道号",scope.gh)},scope.$root.checkActiveCode=function(){return scope.checkoutForm.activeCode.$valid?checkMobileCode(scope.receiver.mobile,scope.activeCode)?($cookieStore.put("activeCode",scope.activeCode),!0):($(".input-vcode").removeClass("weui-cell_success"),$(".input-vcode").addClass("weui-cell_warn"),!1):($(".input-vcode").addClass("weui-cell_warn"),!1)};var getArea=function(id,index,province,city,district){var url,thisHtml;url=0===index?cfApi.apiHost+"/wap/comm/czCommonController/getRegion.html?need=province&key="+new Date:1===index?cfApi.apiHost+"/wap/comm/czCommonController/getRegion.html?need=city&province="+encodeURI(province)+"&key="+new Date:2===index?cfApi.apiHost+"/wap/comm/czCommonController/getRegion.html?need=district&province="+encodeURI(province)+"&city="+encodeURI(city)+"&key="+new Date:cfApi.apiHost+"/wap/comm/czCommonController/getRegion.html?need=street&province="+encodeURI(province)+"&city="+encodeURI(city)+"&district="+encodeURI(district)+"&key="+new Date,$areaList.eq(index).html(""),$.ajax({dataType:"jsonp",type:"get",contentType:"application/json; charset=utf-8",url:url,jsonp:"callback",jsonpCallback:"getAreaList",success:function(json){$.each(eval(json),function(e,t){t.name.length>6?$areaList.eq(index).append("<li data-value="+t.name+" class='long-area'><a data-value="+t.name+">"+t.name+"</a></li>"):$areaList.eq(index).append("<li data-value="+t.name+"><a data-value="+t.name+">"+t.name+"</a></li>")})},error:function(e){alert("获取地址信息失败，请联系客服")}})};$inputsStoreSelect.click(function(){getArea(0,0,"","",""),stockShow(),dataAreaShow(0),tabShow(0)}),$objTabItem.click(function(e){var t=$(this).index();return 0===t?stockHide():(tabShow(t-1),dataAreaShow(t-1)),!1}),$areaList.on("click","li",function(e){var t,o,a=$(this);return o=a.parentsUntil("#cfStock",".mc").data("area"),t=a.find("a").data("value"),0===o?(dataAreaShow(1),tabShow(1),value1=a.data("value"),getArea(t,1,value1,"","")):1===o?(dataAreaShow(2),tabShow(2),value2=a.data("value"),getArea(t,2,value1,value2,"")):2===o?(value3=a.data("value"),stockHide(),$("#store-text").find("div").html(value1+value2+value3),scope.receiver.city=value1+value2+value3):3===o&&(value4=a.data("value"),stockHide(),$("#store-text").find("div").html(value1+value2+value3+value4),scope.receiver.city=value1+value2+value3+value4),scope.$apply(),!1}),scope.checkAddress=function(){return $("#receiverAddress").find(".weui_cell").removeClass("weui-cell_warn"),scope.checkoutForm.reciverName.$valid?scope.checkoutForm.receiverMobile.$valid?scope.checkoutForm.receiverCity.$valid?scope.checkoutForm.receiverRoom.$valid?($cookieStore.put("receiver",scope.receiver),!0):($(".input-room").addClass("weui-cell_warn"),!1):($(".input-city").addClass("weui-cell_warn"),!1):($(".input-mobile").addClass("weui-cell_warn"),!1):($(".input-name").addClass("weui-cell_warn"),!1)}}}}]),app.config(["$stateProvider","$locationProvider",function(e,t){e.state("product",{url:"/pd/:pageType/:productId",templateUrl:function(e){return"pages/phoneCard/phoneCard-details/"+e.pageType+"/phoneCard-details.html"},controller:"pdProController"})}]).controller("pdProController",["$scope","$rootScope","$location","$http","$stateParams",function(e,t,o,a,r){e.pageType=r.pageType,e.appType=systemName+"_"+e.pageType+"phoneCard",e.category=e.appType,e.phone=[],a.get("/data/phonePackage.json").success(function(t){e.phone.packages=t,e.pkg=t[1]}),e.$watch("pkg",function(t,o,a){t!==o&&(e.mainPrice=t.price)}),androidInputBugFix()}]),app.config(["$stateProvider","$locationProvider",function(e,t){e.state("productC",{url:"/pd/productC",templateUrl:"pages/phoneCard/phoneCard-details/C/phoneCard-details.html",controller:"pdProController"})}]),app.config(["$stateProvider","$locationProvider",function(e,t){e.state("activeIndex",{url:"/phone/active/A",templateUrl:function(e){return"pages/phone/active/A/hotPhones/hotPhones.html"},controller:"pActivePhonesController"})}]).controller("pActiveController",["$scope","$location","$http","$stateParams","$interval","$timeout","$cookieStore",function(e,t,o,a,r,n,i){e.pageType=a.pageType,e.appType=systemName+"_coupon_"+e.pageType,e.category=e.appType,e.activePage="index",e.homeUrl=t.protocol()+"://"+t.host()+"/phone/active/A/phones",e.$root.share={homeLink:"http://app.yfq.cn/phone/active/A"+window.location.search,shareTitle:"我领到1888元购机年终奖！年前换个好手机，开开心心回家过大年！",shareDisc:"苹果、OPPO、华为、VIVO等大牌手机直降！用券购再立减！戳我抢→",picUrl:"http://app.yfq.cn/images/active/share_active.jpg"},i.get("couponStore")?e.cookieStore=i.get("couponStore"):e.cookieStore=i.put("couponStore",199),e.cookieStore=i.get("couponStore"),e.params=window.location.search,e.$root.apiCode=2,e.toggleClose=!0,e.fqaToggleClose=function(){e.toggleClose=!e.toggleClose,e.toggleClose?writebdLog(e.category,"_CouExplainStop","渠道号",e.gh):writebdLog(e.category,"_CouExplainShow","渠道号",e.gh)},writebdLog(e.category,"_Load","渠道号",e.gh);for(var c=new Array,s=0;s<=10;s++)c.push({txt:getRandomReceiverPhone()+" 领取了1888元大红包 <span>"+getRanDomTime()+"秒前</span>"});e.getters=c,e.writeClickEvent=function(t){writebdLog(e.category,"_"+t,"渠道号",e.gh)},e.$on("ngRepeatFinished",function(e){$(".getters").slide({mainCell:"ul",autoPage:!0,effect:"topMarquee",autoPlay:!0,interTime:50,vis:5})})}]),app.config(["$stateProvider","$locationProvider",function(e,t){e.state("DctiveIndex",{url:"/phone/active/D",templateUrl:function(e){return"pages/phone/active/D/index.html"},controller:"pDctivePhonesController"})}]).controller("pDctiveController",["$scope","$location","$http","$stateParams","$interval","$timeout","$cookieStore",function(e,t,o,a,r,n,i){e.pageType=a.pageType,e.appType=systemName+"_coupon_"+e.pageType,e.category=e.appType,e.activePage="indexD",e.homeUrl=t.protocol()+"://"+t.host()+"/phone/active/D",e.$root.share={homeLink:"http://app.yfq.cn/phone/active/D/phones"+window.location.search,shareTitle:"震惊！电信新入网，只要预存话费就可0元购机！领券最高再减800元！",shareDisc:"预存话费直抵购机价，信用卡用户在享0息分期，广州地区可即日送货上门验机后办理！",picUrl:"http://app.yfq.cn/images/active/d/share_active.jpg"},i.get("couponStore")?e.cookieStore=i.get("couponStore"):e.cookieStore=i.put("couponStore",199),e.cookieStore=i.get("couponStore"),e.params=window.location.search,e.$root.apiCode=2,e.toggleClose=!0,e.fqaToggleClose=function(){e.toggleClose=!e.toggleClose,e.toggleClose?writebdLog(e.category,"_CouExplainStop","渠道号",e.gh):writebdLog(e.category,"_CouExplainShow","渠道号",e.gh)},writebdLog(e.category,"_Load","渠道号",e.gh);for(var c=new Array,s=0;s<=10;s++)c.push({txt:getRandomReceiverPhone()+" 领取了1888元大红包 <span>"+getRanDomTime()+"秒前</span>"});e.getters=c,e.writeClickEvent=function(t){writebdLog(e.category,"_"+t,"渠道号",e.gh)},e.$on("ngRepeatFinished",function(e){$(".getters").slide({mainCell:"ul",autoPage:!0,effect:"topMarquee",autoPlay:!0,interTime:50,vis:5})})}]),app.config(["$stateProvider","$locationProvider",function(e,t){e.state("phone",{url:"/:ghType/:pageType/:phoneId",templateUrl:function(e){return"pages/phone/phone-details/"+e.ghType+"/details.html"},controller:"pProController"})}]).controller("pProController",["$scope","$rootScope","$location","$stateParams","$http","Phone","$cookieStore",function(e,t,o,a,r,n,i){e.pageType=a.pageType,e.phone=n.get({phoneId:a.phoneId},function(t){e.productId=t.productId,e.appType=systemName+"_"+e.pageType+"_"+t.phoneModel,e.category=e.appType,writebdLog(e.category,"_Load","渠道号",e.gh)}),i.put("phoneQueryUrl",window.location.href),i.get("phoneQueryUrl")&&(e.phoneQueryUrl=i.get("phoneQueryUrl")),$("img.lazy").lazyload({effect:"fadeIn",skip_invisible:!1,container:$(".content-scrollable")}),e.$watch("productId",function(e,t,o){e!=t&&r.get("/data/phones/"+o.productId+".json").success(function(e){o.phone=e,o.storage=e.storages[getIndex(e.storages,"curr")],o.pkg=e.packages[0],o.phoneType=e.phoneTypes[getIndex(e.phoneTypes,"curr")],o.mainPrice=e.price})}),androidInputBugFix()}]),app.config(["$stateProvider","$locationProvider",function(e,t){e.state("phoneCardDetails",{url:"/phs/cd/:pageType/:cardId",templateUrl:function(e){return"pages/phone/phone-details/card/"+e.pageType+"/details.html"},controller:"pCardProController"})}]).controller("pCardProController",["$scope","$rootScope","$location","$stateParams","$http","Phone",function(e,t,o,a,r,n){function i(t){p=l[t],writebdLog(e.category,"_"+p,"渠道号",e.gh)}e.pageType=a.pageType,e.activeTag="mysytc";var c="_mysy_"+e.pageType;"pcdB"==e.pageType&&(c="_yucun_A"),"pcdC"==e.pageType&&(c="_yucun_B"),e.category=systemName+c+"_FlowPackages",e.phoneQueryUrl="http://"+o.host()+o.url(),e.stores=Math.round(100*Math.random()),e.sold=Math.round(5e3*Math.random()),writebdLog(e.category,"_Load","渠道号",e.gh),e.pkgs=[{message:"50",network:"3.5",oldPrice:"204.00",productId:252,productName:"5折预存102/月（3.5G流量900分钟通话）",salesPrice:"102.00",talkTime:"900",pkgType:"dkyc50"},{message:"50",network:"4.5",oldPrice:"304.00",productId:254,productName:"5折预存156/月（4.5G流量 1800分钟通话）",salesPrice:"156.00",talkTime:"1800",pkgType:"dkyc100"},{message:"50",network:"4.5",oldPrice:"259.00",productId:351,productName:"155元/月(900分钟通话,4.5G流量,50短信)",salesPrice:"155.00",talkTime:"900",pkgType:"dkyc100"},{message:"50",network:"2.5",oldPrice:"174.00",productId:251,productName:"5折预存101/月（2.5G流量 850分钟）",salesPrice:"101.00",talkTime:"850",pkgType:"dkyc50"}],"pcd"==e.pageType&&(e.$root.share={homeLink:"http://app.yfq.cn/spc/pcd/index.html"+window.location.search,shareTitle:"翼分期商城——电信新入网套餐5折起",shareDisc:"中国电信流量大降价，9.9元办五折优惠套餐，3.5G全国流量，仅102元/月！",picUrl:"http://app.yfq.cn/spc/img/pcd/1.jpg"}),"pcdB"==e.pageType&&(e.$root.share={homeLink:"http://app.yfq.cn/spc/pcd/indexB.html"+window.location.search,shareTitle:"翼分期商城——电信新入网套餐存100赠840",shareDisc:"4G月租优惠套餐，最低仅102元/月，3.5G全国流量！限时限量，手快有！",picUrl:"http://app.yfq.cn/spc/img/pcd/B/tx1.png"}),"pcdC"==e.pageType&&(e.$root.share={homeLink:"http://app.yfq.cn/spc/pcd/indexB.html"+window.location.search,shareTitle:"翼分期商城——电信新入网套餐存100赠840",shareDisc:"4G月租优惠套餐，最低仅102元/月，3.5G全国流量！限时限量，手快有！",picUrl:"http://app.yfq.cn/spc/img/pcd/B/tx1.png"});var s;s=""==a.cardId?cfApi.apiHost+"/product/getPackageInfo.html?productId="+e.pkgs[0].productId+"&s=wap&callback=JSON_CALLBACK":cfApi.apiHost+"/product/getPackageInfo.html?productId="+a.cardId+"&s=wap&callback=JSON_CALLBACK",r.jsonp(s).success(function(t,o,a,r){e.card=t,e.totolPrice=t.salesPrice,e.showPrice=50,254!=t.productId&&351!=t.productId||(e.showPrice=100)}).error(function(e,t,o,a){console.log(t)}),$("img.lazy").lazyload({effect:"fadeIn",skip_invisible:!1,container:$(".content-scrollable")}),e.cardPay=!0,e.buyType=1,e.setSbPayType=function(t,o){e.payType=t,e.payTypeName=o,$(".pay-item").removeClass("on"),$("#payType"+t).addClass("on"),i(t)};var p,l=["payAll","payCOD","payMonthly"];e.setBuyType=function(t,o){t.preventDefault(),e.buyType=o;var a=$(t.currentTarget);a.parent().siblings().children().removeClass("curr"),a.addClass("curr"),0==o?(e.activeTag="lj",e.totolPrice=e.phone.phonePrice,e.totolPrice<1500&&e.setSbPayType(0,"一次性支付")):(e.totolPrice=e.phone.phoneBillPrice+e.phone.phonePrice,e.activeTag="jjk")},e.setPackage=function(t,o){e["package"]=o,e.card=o,e.showPrice=50,254!=o.productId&&351!=o.productId||(e.showPrice=100);var a=$(t.currentTarget);a.parent().siblings().removeClass("on"),a.parent().addClass("on"),$("#pickPackagePanel").slideUp()},e.checkPackage=function(){if(!scope.checkoutForm.productId.$valid){var e=$(".card-details");return $container.animate({scrollTop:e.offset().top-$container.offset().top+$container.scrollTop()-50}),$("#pickPackagePanel").slideDown(),!1}return!0},e.showPkgPn=function(){$("#pickPackagePanel").slideToggle()},e.$watch("productId",function(e,t,o){e!=t&&r.get(cfApi.apiHost+"/product/getProDetial.html?productId="+e+"&s=wap&callback=JSON_CALLBACK").success(function(e){})}),androidInputBugFix()}]),app.config(["$stateProvider","$locationProvider",function(e,t){e.state("phoneDouble",{url:"/phs/db/:pageType/:phoneId",templateUrl:function(e){return"pages/phone/phone-details/double/A/details.html"},controller:"pDoubleProController",onExit:function(){$("#container").removeClass("overlay-open"),$("#overlay-hook").html("")}})}]).controller("pDoubleProController",["$scope","$rootScope","$location","$stateParams","$http","Phone",function(e,t,o,a,r,n){e.pageType=a.pageType,e.activeTag="mysy",e.appType=systemName+"_mysy_"+e.pageType+"_DoublePhones",e.category=e.appType,e.phoneQueryUrl=window.location.href,writebdLog(e.category,"_Load","渠道号",e.gh),e.buyType=1,r.jsonp(cfApi.apiHost+"/product/getProDetial.html?productId="+a.phoneId+"&activeTag=mysy&s=wap&callback=JSON_CALLBACK").success(function(t,o,a,r){e.phone=t,e.totolPrice=t.salePrice}).error(function(e,t,o,a){console.log(t)}),$("img.lazy").lazyload({effect:"fadeIn",skip_invisible:!1,container:$(".content-scrollable")}),e.$watch("productId",function(e,t,o){e!=t&&r.get(cfApi.apiHost+"/product/getProDetial.html?productId="+e+"&s=wap&callback=JSON_CALLBACK").success(function(e){})}),androidInputBugFix()}]),app.config(["$stateProvider","$locationProvider",function(e,t){e.state("phoneHu",{url:"/huPhones/:pageType/:phoneId",templateUrl:"pages/phone/phone-details/hu/phone-details.html",controller:"pProController"})}]),app.config(["$stateProvider","$locationProvider",function(e,t){e.state("BctiveIndex",{url:"/phone/active/B",templateUrl:function(e){return"pages/phone/active/B/index.html"},controller:"pBctiveController"})}]).controller("pBctiveController",["$scope","$location","$http","$stateParams","$interval","$timeout","$cookieStore",function(e,t,o,a,r,n,i){function c(){var e,t=new Date,o=t.getFullYear()+"/"+(t.getMonth()+1)+"/"+t.getDate()+" 23:59:00",a=new Date(o),r=new Date,n=a.getTime()-r.getTime(),t=Math.floor(n/1e3/60/60/24),i=Math.floor(n/1e3/60/60%24);parseInt(i)<10&&(i="0"+i);var c=Math.floor(n/1e3/60%60);parseInt(c)<10&&(c="0"+c);var s=Math.floor(n/1e3%60);parseInt(s)<10&&(s="0"+s),e="<em>"+i.toString().slice(0,1)+"</em><em>"+i.toString().slice(1,2)+"</em><span>时</span><em>"+c.toString().slice(0,1)+"</em><em>"+c.toString().slice(1,2)+"</em><span>分</span><em>"+s.toString().slice(0,1)+"</em><em>"+s.toString().slice(1,2)+"</em><span>秒</span>",$(".timer").html(e)}e.pageType="B",e.appType=systemName+"_xxyx_"+e.pageType,e.category=e.appType,e.activePage="index",e.homeUrl=t.protocol()+"://"+t.host()+"/phone/active/A/phones",e.params=window.location.search,e.paracont="获取验证码",e.paraclass="but_null";var s=59,p=void 0;e.$root.share={homeLink:"http://app.yfq.cn/phone/active/B"+window.location.search,shareTitle:"中国电信“0”机价即可拿iPhone，最高还送6388元话费！先到先得！",shareDisc:"多重优惠！广州地区可送货上门验机，今日下单可享12期0息分期！",picUrl:"http://app.yfq.cn/images/active/share_active-1.png"},i.get("rasherStore")?e.rasherStore=i.get("rasherStore"):e.rasherStore=i.put("rasherStore",8437),i.get("couponStore")?e.couponStore=i.get("couponStore"):e.couponStore=i.put("couponStore",35),writebdLog(e.category,"_Load","渠道号",e.gh),e.rasherStore=i.get("rasherStore"),e.couponStore=i.get("couponStore");var l=["_InputIndexName","_InputIndexNumber","_InputIndexCode"];e.$root.inputHomeArgs=function(t){writebdLog(e.category,l[t],"渠道号",e.gh)},e.checkCouponMobile=function(){return $("#couponForm").find(".weui_cell").removeClass("weui-cell_warn"),!!e.couponForm.couponMobile.$valid||($(".input-mobile").addClass("weui-cell_warn"),!1)},e.checkCouponName=function(){return $("#couponForm").find(".weui_cell").removeClass("weui-cell_warn"),!!e.couponForm.couponName.$valid||($(".input-name").addClass("weui-cell_warn"),!1)},e.checkCouponActiveCode=function(){return e.couponForm.couponActiveCode.$valid?!!checkMobileCode(e.coupon.mobile,e.coupon.activeCode)||($(".input-vcode").removeClass("weui-cell_success"),$(".input-vcode").addClass("weui-cell_warn"),!1):($(".input-vcode").addClass("weui-cell_warn"),!1)},e.getCouponActiveCode=function(t,a){return!$(t.currentTarget).hasClass("not")&&(e.toast.openUnLimit(),e.checkCouponMobile()?(o.get("http://m.yfq.cn:3099/api/getActiveCode/"+a).success(function(t){""==t&&(e.toast.close(),p=r(function(){s<=0?(r.cancel(p),p=void 0,s=59,e.paracont="重发验证码",e.paraclass="but_null"):(e.paracont=s+"秒后可重发",e.paraclass="not but_null",s--)},1e3,100))}),void writebdLog(e.category,"_VariIndexCode","渠道号",e.gh)):(e.toast.close(),e.dialog.open("系统提示","请输入正确的手机号码！"),!1))},e.getQuan=function(){if(e.toast.open(),!e.checkCouponName())return e.toast.close(),e.dialog.open("系统提示","请输入正确的姓名！"),!1;if(!e.checkCouponMobile())return e.toast.close(),e.dialog.open("系统提示","请输入正确的手机号码！"),!1;if(!e.checkCouponActiveCode())return e.toast.close(),e.dialog.open("系统提示","请输入正确的验证码！"),!1;var a=t.search().headCategory,r=e.category;void 0!=a&&null!=a&&(r=a),o.jsonp(cfApi.apiHost+"/product/doReceiveMultipleCoupon.html?recieverMobile="+e.coupon.mobile+"&couponType=HF-MX-JM&gh="+e.gh+"&category="+r+"&s=wap&callback=JSON_CALLBACK").success(function(t,a,r,n){i.put("couponStore",i.get("couponStore")-1),e.couponStore=i.get("couponStore")-1,i.put("rasherStore",i.get("rasherStore")+1),e.rasherStore=i.get("rasherStore")+1,o.jsonp(cfApi.apiHost+"/product/intentionLog.html?activeTag=jktchd&dataType=tchd&operationName="+e.coupon.mobile+"&operationValue="+encodeURI(e.coupon.name)+"&s=wap&s=wap&callback=JSON_CALLBACK").success(function(t,o,a,r){e.toast.close();var n;n=""==e.params?"?receiverName="+e.coupon.name+"&receiverMobile="+e.coupon.mobile:e.params+"&receiverName="+e.coupon.name+"&receiverMobile="+e.coupon.mobile,200==t.resultCode&&(window.location.href="/phone/active/B/phones"+n)}).error(function(e,t,o,a){console.log(t)})}).error(function(e,t,o,a){console.log(t)}),writebdLog(e.category,"_NextOrder","渠道号",e.gh)},setInterval(c,1e3)}]),app.config(["$stateProvider","$locationProvider",function(e,t){e.state("phoneMo",{url:"/moPhones/:pageType/:phoneId",templateUrl:"pages/phone/phone-details/mo/phone-details.html",controller:"pProController"})}]),app.directive("subNumber",["$cookieStore",function(e){return{restrict:"E",templateUrl:"modules/common/phoneQuery/subNumber/n.html",controller:"numberController",link:function(e,t,o){var a=$(".content-scrollable");e.checkSubNumber=function(){if(!e.checkoutForm.subNumber.$valid){var t=$("#pickSubNumber");return a.animate({scrollTop:t.offset().top-a.offset().top+a.scrollTop()-50}),$("#pickSubNumberPanel").slideDown(),!1}return!0},e.setSubNumber=function(t,o){t.preventDefault();var a=$(t.currentTarget);checkSameNumber(e.mainNumber,o.n)?(e.subNumber=o.n,a.parent().siblings().children().removeClass("curr"),a.addClass("curr"),$("#pickSubNumberPanel").slideToggle(),$("#pickSubNumber .weui-cells").toggleClass("down"),writebdLog(e.category,"_subSelectNumber","渠道号",e.gh)):e.$root.dialog.open("系统提示","您选择的主卡号码和副卡号码相同，请重新选择")},e.showSNumberPn=function(t){$("#pickSubNumberPanel").slideToggle(),$(t.currentTarget).toggleClass("down"),writebdLog(e.category,"_subCuteNumber","渠道号",e.gh)}}}}]),app.directive("mainNumber",["$cookieStore",function(e){return{restrict:"E",templateUrl:"modules/common/phoneQuery/mainNumber/n.html",controller:"numberController",link:function(e,t,o){e.phoneTitle=o.title;var a=$(".content-scrollable");e.$root.checkMainNumber=function(){if(!e.checkoutForm.mainNumber.$valid){var t=$("#pickMainNumber");return a.animate({scrollTop:t.offset().top-a.offset().top+a.scrollTop()-50}),$("#pickMainNumberPanel").slideDown(),!1}return!0},e.setMainNumber=function(t,a){t.preventDefault();var r=$(t.currentTarget);checkSameNumber(a.n,e.subNumber)?(e.mainNumber=a.n,r.parent().siblings().children().removeClass("curr"),r.addClass("curr"),"true"!=o.noAnimate&&($("#pickMainNumberPanel").slideToggle(),$("#pickMainNumber .weui-cells").toggleClass("down")),writebdLog(e.category,"_mainSelectNumber","渠道号",e.gh)):e.$root.dialog.open("系统提示","您选择的主卡号码和副卡号码相同，请重新选择")},e.showMNumberPn=function(t){"true"!=o.noAnimate&&($("#pickMainNumberPanel").slideToggle(),$(t.currentTarget).toggleClass("down")),writebdLog(e.category,"_mainCuteNumber","渠道号",e.gh)}}}}]).controller("numberController",["$scope","$cookieStore","$http","$compile",function($scope,$cookieStore,$http){$scope.phoneData=new Array,$scope.phoneSubData=new Array,$scope.phoneMainFilter=function(e){var t=new Array;""!=e?($.each($scope.phoneData,function(o,a){a.n.indexOf(e)>=0&&t.push(a)}),$scope.filterData=t):$scope.filterData=$scope.phoneData,$scope.mainItems=$scope.filterData.slice(0,$scope.pageSize),$scope.dataInit()},$scope.phoneSubFilter=function(e){var t=new Array;""!=e?($.each($scope.phoneSubData,function(o,a){a.n.indexOf(e)>=0&&t.push(a)}),$scope.filterSubData=t):$scope.filterSubData=$scope.phoneSubData,$scope.subItems=$scope.filterSubData.slice(0,$scope.pageSize),$scope.dataInit()},$scope.inputNumber=function(e,t){""!=e&&writebdLog($scope.category,"_"+t+"InputNumber","渠道号",$scope.gh)},$http.jsonp(cfApi.apiHost+"/wap/taokafanghaoNew/fetchLuckNumber.html?time="+(new Date).getTime()+"&callback=JSON_CALLBACK").success(function(data,status,headers,config){data=data.sort(function(e,t){return t.s-e.s}),$.each(eval(data),function(e,t){t.s<=800&&($scope.phoneData.push(t),0==t.t&&$scope.phoneSubData.push(t))}),$scope.dataInit=function(){$scope.selPage=1,$scope.pageList=[],$scope.pages=Math.ceil($scope.filterData.length/$scope.pageSize),$scope.newPages=$scope.pages>5?5:$scope.pages;for(var e=0;e<$scope.newPages;e++)$scope.pageList.push(e+1)},$scope.filterData=$scope.phoneData,$scope.filterSubData=$scope.phoneSubData,$scope.pageSize=12,$scope.setData=function(e){"main"==e?$scope.mainItems=$scope.filterData.slice($scope.pageSize*($scope.selPage-1),$scope.selPage*$scope.pageSize):$scope.subItems=$scope.filterSubData.slice($scope.pageSize*($scope.selPage-1),$scope.selPage*$scope.pageSize)},$scope.mainItems=$scope.filterData.slice(0,$scope.pageSize),$scope.subItems=$scope.filterSubData.slice(0,$scope.pageSize),$scope.dataInit(),$scope.selectPage=function(e,t){if(!(e<1||e>$scope.pages)){if(e>2){for(var o=[],a=e-3;a<(e+2>$scope.pages?$scope.pages:e+2);a++)o.push(a+1);$scope.pageList=o}$scope.selPage=e,$scope.setData(t),$scope.isActivePage(e)}},$scope.isActivePage=function(e){return $scope.selPage==e},$scope.Previous=function(e){$scope.selectPage($scope.selPage-1,e)},$scope.Next=function(e){$scope.selectPage($scope.selPage+1,e),writebdLog($scope.category,"_"+e+"ChangeALot","渠道号",$scope.gh)}}).error(function(e,t,o,a){console.log(t)})}]),app.config(["$stateProvider","$locationProvider",function(e,t){e.state("ljADetail",{url:"/phs/lj/A/:phoneId",templateUrl:function(e){return"pages/phone/lj/A/detail/detail.html"},controller:"ljADetailController",onExit:function(){$("#container").removeClass("overlay-open"),$("#overlay-hook").html("")}})}]).controller("ljADetailController",["$scope","$rootScope","$location","$stateParams","$http","Phone","$cookieStore","$timeout",function(e,t,o,a,r,n,i,c){e.pageType="A",e.activeTag="ljzma",e.homeUrl=o.protocol()+"://"+o.host()+"/phone/active/D/phones",e.limitNo=5,e.setlimitNo=function(t){e.limitNo=t},e.sold=Math.round(50*Math.random());var s=o.search().headCategory;void 0!=s&&null!=s?e.category=s+"_SinglePhones":e.category=systemName+"_ljzm_"+e.pageType+"_SinglePhones",e.phoneQueryUrl="http://"+o.host()+o.url(),writebdLog(e.category,"_Load","渠道号",e.gh),$container=$(".content-scrollable"),e.productId=a.phoneId,r.jsonp(cfApi.apiHost+"/product/getProDetial.html?productId="+a.phoneId+"&activeTag=ljzma&s=wap&callback=JSON_CALLBACK").success(function(t,o,n,i){e.phone=t,e.imgUrls=[];for(var c=0;c<t.phoneTypes[0].mediaProductList.length;c++)e.imgUrls.push("http://www.yfq.cn:8899/fileserver/medias/"+t.phoneTypes[0].mediaProductList[c].mediaUrl);r.jsonp(cfApi.czHost+"/yfqcz/czInterfaceController.do?messageDetail&productId="+a.phoneId+"&s=wap&callback=JSON_CALLBACK").success(function(t,o,a,r){e.feedbacks=t,e.feedbackType="all"}).error(function(e,t,o,a){console.log(t)}),r.jsonp(cfApi.apiHost+"/product/getProList.html?activeTag=ljzma&s=wap&callback=JSON_CALLBACK").success(function(t,o,a,r){e.singlePhones=t,e.hotPhones=[],$.each(e.singlePhones,function(t,o){Math.abs(o.salePrice-e.phone.salePrice)<=1500&&e.hotPhones.push(o)}),e.hotPhones.length<6&&$.each(e.singlePhones,function(t,o){t<6-e.hotPhones.length&&e.hotPhones.push(o),Math.abs(o.salePrice-e.phone.salePrice)>1500&&e.hotPhones.push(o)})}).error(function(e,t,o,a){console.log(t)}),e.$root.share={homeLink:"http://app.yfq.cn/phs/lj/A/"+a.phoneId+window.location.search,shareTitle:"想换"+e.phone.productName+"？这里全场降价后再享95折，先抢了再说！",shareDisc:"iPhone、OPPO、华为各大品牌新品现货抢购，最高可享12期0息分期！",picUrl:"http://www.yfq.cn:8899/fileserver/medias/"+e.phone.phoneTypes[0].mediaProductList[0].mediaUrl}}).error(function(e,t,o,a){console.log(t)}),$("img.lazy").lazyload({effect:"fadeIn",skip_invisible:!1,container:$(".content-scrollable")});e.writebdLogByValue=function(t){writebdLog(e.category,"_"+t,"渠道号",e.gh)},o.search().duplicateNum&&(Array.isArray(o.search().duplicateNum)?e.dialog.open("系统提示","您选择的号码："+o.search().duplicateNum[0]+"已被购买，请重新选择"):e.dialog.open("系统提示","您选择的号码："+o.search().duplicateNum+"已被购买，请重新选择")),e.setFlashDriver=function(t,o){var a=$(t.currentTarget);return!a.hasClass("disabled")&&(e.productId=o.productId,void writebdLog(e.category,"_FuselageMemory","渠道号",e.gh))},e.showActionsheet=function(t){showTheActionSheet(t),writebdLog(e.category,"_show"+t.replace("#",""),"渠道号",e.gh)},e.hideActionsheet=function(t){hideTheActionSheet(t),writebdLog(e.category,"_hide"+t.replace("#",""),"渠道号",e.gh)},e.makeSelected=function(t,o){return!$(t.currentTarget).hasClass("disabled")&&void e.hideActionsheet(o)},e.checkForm=function(){var t=$("#checkoutForm");if(e.$root.checkActiveCode())writebdLog(e.category,"_BuyNow","渠道号",e.gh),e.$root.toast.open(),t.submit();else{var o=$("#receiverAddress");$container.animate({scrollTop:o.offset().top-$container.offset().top+$container.scrollTop()}),$("#receiverAddressPanel").slideDown(),$(".adr-tab").addClass("down")}},e.seeAll=function(){$(".half").removeClass("half"),$(".html-ft").hide()},e.payType=0,e.payTypeName="马上付款",e.loadedCheck=function(){return!!e.checkoutForm.reciverName.$valid&&(!!e.checkoutForm.receiverMobile.$valid&&(!!e.checkoutForm.receiverCity.$valid&&!!e.checkoutForm.receiverRoom.$valid))},c(function(){e.loadedCheck()||($(".adr-tab").toggleClass("down"),$("#receiverAddressPanel").slideDown())}),e.submitForm=function(t){if($(t.currentTarget).hasClass("disabled"))return!1;if(e.checkAddress())e.checkForm();else{var o=$("#receiverAddress");$container.animate({scrollTop:o.offset().top-$container.offset().top+$container.scrollTop()-50}),$("#receiverAddressPanel").slideDown(),$(".adr-tab").addClass("down")}},e.setFeedbackType=function(t){e.feedbackType=t,writebdLog(e.category,"_"+t,"渠道号",e.gh)},e.goToDetail=function(){$("#scrollAnimate").animate({scrollTop:$(".dj-detail").offset().top-$("#scrollAnimate").offset().top+$("#scrollAnimate").scrollTop()-50})},$("#scrollAnimate").bind("scroll",function(e){var t=$(".dj-detail").offset().top-$(this).offset().top+$(this).scrollTop(),o=$(".dj-bottom").offset().top-$(this).offset().top+$(this).scrollTop()-$(this).height();$(this).scrollTop()>=t&&$(this).scrollTop()<=o?$(".dj-detail").find(".weui-navbar").addClass("fixed-top"):$(".dj-detail").find(".weui-navbar").removeClass("fixed-top")}),e.$watch("feedbackType",function(e,t,o){o.typeFeedbacks=[],void 0!=e&&e!=t&&o.feedbacks.success&&("all"===e&&$.each(o.feedbacks.result,function(e,t){o.typeFeedbacks.push(t)}),"best"===e&&$.each(o.feedbacks.result,function(e,t){var a=parseInt(t.starRating1)+parseInt(t.starRating2)+parseInt(t.starRating3);a/3>=4&&o.typeFeedbacks.push(t)}),"good"===e&&$.each(o.feedbacks.result,function(e,t){var a=parseInt(t.starRating1)+parseInt(t.starRating2)+parseInt(t.starRating3);a/3>2&&a/3<4&&o.typeFeedbacks.push(t)}),"bad"===e&&$.each(o.feedbacks.result,function(e,t){var a=parseInt(t.starRating1)+parseInt(t.starRating2)+parseInt(t.starRating3);a/3<=2&&o.typeFeedbacks.push(t)}))}),e.$watch("productId",function(e,t,o){e!=t&&(r.jsonp(cfApi.apiHost+"/product/getProDetial.html?productId="+e+"&activeTag=ljzma&s=wap&callback=JSON_CALLBACK").success(function(t,a,n,i){o.phone=t;var c=(t.phoneTypes[0].mediaProductList,getIndex(t.phoneTypes[0].mediaProductList,"name",o.$root.mainColor.name));void 0==c||0==t.phoneTypes[0].mediaProductList[c].stock?o.$root.mainColor=t.phoneTypes[0].mediaProductList[getIndex(t.phoneTypes[0].mediaProductList,"selected",1)]:o.$root.mainColor=t.phoneTypes[0].mediaProductList[c],o.hotPhones=[],$.each(o.singlePhones,function(e,t){Math.abs(t.salePrice-o.phone.salePrice)<=1500&&o.hotPhones.push(t)}),o.hotPhones.length<6&&$.each(o.singlePhones,function(e,t){e<6-o.hotPhones.length&&o.hotPhones.push(t),Math.abs(t.salePrice-o.phone.salePrice)>1500&&o.hotPhones.push(t)}),r.jsonp(cfApi.czHost+"/yfqcz/czInterfaceController.do?messageDetail&productId="+e+"&s=wap&callback=JSON_CALLBACK").success(function(e,t,a,r){o.feedbacks=e,o.feedbackType="all"}).error(function(e,t,o,a){console.log(t)})}).error(function(e,t,o,a){console.log(t)}),o.$root.share={homeLink:"http://app.yfq.cn/phs/lj/A/"+e+window.location.search,shareTitle:"想换"+o.phone.productName+"？这里全场降价后再享95折，先抢了再说！",shareDisc:"iPhone、OPPO、华为各大品牌新品现货抢购，最高可享12期0息分期！",picUrl:"http://www.yfq.cn:8899/fileserver/medias/"+o.phone.phoneTypes[0].mediaProductList[0].mediaUrl})}),androidInputBugFix()}]),app.config(["$stateProvider","$locationProvider",function(e,t){e.state("ljIndexAPhones",{url:"/phone/lj/A/phones",templateUrl:function(e){return"pages/phone/lj/A/index/index.html"},controller:"ljIndexAPhonesController"})}]).controller("ljIndexAPhonesController",["$scope","$location","$http","$stateParams","$interval","$timeout","$cookieStore",function(e,t,o,a,r,n,i){function c(t){writebdLog(e.category,s[t],"渠道号",e.gh)}e.pageType="A",e.appType=systemName+"_ljzm_"+e.pageType,e.category=e.appType;e.activePage="hotPhones",e.params=window.location.search,e.homeUrl=t.protocol()+"://"+t.host()+"/phone/lj/A/phones",e.$root.share={homeLink:"http://app.yfq.cn/phone/lj/A/phones"+window.location.search,shareTitle:"想换手机？这里全场降价后再享95折，先抢了再说！",shareDisc:"iPhone、OPPO、华为各大品牌新品现货抢购，最高可享12期0息分期！",picUrl:"http://app.yfq.cn/images/lj/share_active.jpg"},writebdLog(e.category,"_Load","渠道号",e.gh),e.getContact=function(){getMeiqia(),_MEIQIA("showPanel"),writebdLog(e.category,"_CustConsult","渠道号",e.gh)},e.goToTop=function(){var e=$(".content-scrollable");e.animate({scrollTop:0})},o.jsonp(cfApi.apiHost+"/product/getProList.html?activeTag=ljzma&s=wap&callback=JSON_CALLBACK").success(function(t,o,a,r){
e.singlePhones=t,e.brands=[{brandName:"全部",brandSort:0,tag:!1},{brandName:"热门机型",brandSort:1,tag:!0},{brandName:"iPhone",brandSort:2,tag:!1},{brandName:"华为",brandSort:3,tag:!1},{brandName:"OPPO",brandSort:4,tag:!1},{brandName:"vivo",brandSort:5,tag:!1},{brandName:"小米",brandSort:6,tag:!1},{brandName:"其它机型",brandSort:999,tag:!1}],i.get("brand")?(e.brand=i.get("brand"),e.brandIndex=getIndex(e.brands,"brandName",e.brand.brandName)):e.brand=e.brands[0]}).error(function(e,t,o,a){console.log(t)}),e.$root.btNavItem=function(e){c(e)},e.showFqa=function(){$(".fqa-lists").toggleClass("close"),$(".fqa-more").toggleClass("close")};var s=["_MyCoupon","_MyOrder","_CustConsult"];$("img.lazy").lazyload({effect:"fadeIn",skip_invisible:!1,container:$(".content-scrollable")}),e.$on("ngRepeatFinished",function(e){$("img.lazy").lazyload({effect:"fadeIn",skip_invisible:!1,container:$(".content-scrollable")})}),e.setMachine=function(t,o){writebdLog(e.category,"_ClickGoods"+o,"渠道号",e.gh)},e.$watch("brand",function(e,t,o){t!==e&&void 0!==e&&(o.brandPhones=[],"全部"==e.brandName?o.brandNavName="选择类别":o.brandNavName=e.brandName,$.each(o.singlePhones,function(t,a){""==e.brandName||"全部"==e.brandName?o.brandPhones.push(a):"其它机型"==e.brandName?"iPhone"!=a.brandName&&"华为"!=a.brandName&&"OPPO"!=a.brandName&&"vivo"!=a.brandName&&"小米"!=a.brandName&&o.brandPhones.push(a):"热门机型"==e.brandName?1==a.ifHot&&o.brandPhones.push(a):a.brandName===e.brandName&&o.brandPhones.push(a)}))},!0)}]),app.directive("appNumber",["$cookieStore","$timeout",function(e,t){return{restrict:"E",scope:{inputData:"=",outputData:"=",selectedData:"=",autoSelect:"="},templateUrl:"modules/common/phoneQuery/number/number.html",link:function(e,o,a){e.pageSize=6,e.numberType=a.numberType,e.setNumber=function(t,o,a){var r=$(t.currentTarget);return!r.hasClass("disabled")&&(e.outputData={numberType:o,number:a},void(e.thisNumber={numberType:o,number:a}))},e.dataInit=function(){e.selPage=1,e.pages=Math.ceil(e.numbers.length/e.pageSize),e.items=e.numbers.slice(0,e.pageSize),"subNumber"===e.numberType&&(e.outputData={numberType:e.numberType,number:e.items[1]},e.thisNumber={numberType:e.numberType,number:e.items[1]}),t(function(){"thirdNumber"===e.numberType&&(e.outputData={numberType:e.numberType,number:e.items[2]},e.thisNumber={numberType:e.numberType,number:e.items[2]})})},e.setData=function(){e.items=e.numbers.slice(e.pageSize*(e.selPage-1),e.selPage*e.pageSize)},e.selectPage=function(t){t<1||t>e.pages||(e.selPage=t,e.setData())},e.Previous=function(){e.selectPage(e.selPage-1)},e.Next=function(){e.selectPage(e.selPage+1)},e.$watch("inputData",function(e,t,o){e!==t&&void 0!==e&&(o.numbers=e,o.dataInit())},!0),e.$watch("autoSelect",function(e,o,a){e!==o&&void 0!==e&&(e?("subNumber"===a.numberType&&(a.outputData={numberType:a.numberType,number:a.items[1]},a.thisNumber={numberType:a.numberType,number:a.items[1]}),t(function(){"thirdNumber"===a.numberType&&(a.outputData={numberType:a.numberType,number:a.items[2]},a.thisNumber={numberType:a.numberType,number:a.items[2]})})):("subNumber"===a.numberType&&(a.outputData={numberType:a.numberType},a.thisNumber={numberType:a.numberType}),t(function(){"thirdNumber"===a.numberType&&(a.outputData={numberType:a.numberType},a.thisNumber={numberType:a.numberType})})))})}}}]),app.config(["$stateProvider","$locationProvider",function(e,t){e.state("activeCPhones",{url:"/phone/active/C/phones",templateUrl:function(e){return"pages/phone/active/C/hotPhones/hotPhones.html"},controller:"pCctivePhonesController"})}]).controller("pCctivePhonesController",["$scope","$location","$http","$stateParams","$interval","$timeout","$cookieStore","$compile",function($scope,$location,$http,$stateParams,$interval,$timeout,$cookieStore,$compile){function writeBrand(e){return"华为"==e&&(e="huawei"),"小米"==e&&(e="mi"),"美图"==e&&(e="meitu"),e}$location.path("/phone/active/D/phones"),$scope.pageType="C",$scope.activeTag="jktchd",$scope.appType=systemName+"_xxyx_"+$scope.pageType,$scope.category=$scope.appType,$scope.homeUrl=$location.protocol()+"://"+$location.host()+"/phone/active/C/phones",$scope.payType=0,$scope.activePage="hotPhones",$scope.params=window.location.search,$scope.paracont="获取验证码",$scope.paraclass="but_null";var second=59,timePromise=void 0;$scope.$root.share={homeLink:"http://app.yfq.cn/phone/active/C/phones"+window.location.search,shareTitle:"中国电信“0”机价即可拿iPhone，最高还送6388元话费！先到先得！",shareDisc:"多重优惠！广州地区可送货上门验机，今日下单可享12期0息分期！",picUrl:"http://app.yfq.cn/images/active/share_active-1.png"};var $container=$(".content-scrollable");$scope.receiver={name:"",mobile:"",city:"",room:""};var $areaList=$(".area-list");writebdLog($scope.category,"_Order_Load","渠道号",$scope.gh),$scope.getContact=function(){getMeiqia(),_MEIQIA("showPanel"),writebdLog($scope.category,"_CustConsult","渠道号",$scope.gh)},$scope.setPayType=function(e){$scope.payType=e,writebdLog($scope.category,"_PayType"+e,"渠道号",$scope.gh)},$scope.goToTop=function(){var e=$(".content-scrollable");e.animate({scrollTop:0})},$http.jsonp(cfApi.apiHost+"/product/getPackageList.html?activeTag=fqssj&s=wap&callback=JSON_CALLBACK").success(function(e,t,o,a){$scope.pkgs=e}).error(function(e,t,o,a){console.log(t)}),$http.jsonp(cfApi.apiHost+"/product/getProList.html?activeTag=jktchd&s=wap&callback=JSON_CALLBACK").success(function(e,t,o,a){$scope.phones=e,$scope.brands=[],$scope.brandsArry=[],$.each(e,function(e,t){if($scope.brandsArry.indexOf(t.brandName)==-1&&""!=t.brandName){var o={brandName:t.brandName,brandSort:t.brandSort};$scope.brandsArry.push(t.brandName),$scope.brands.push(o)}}),$scope.brands=$scope.brands.sort(function(e,t){return e.brandSort-t.brandSort}),$scope.brand=$scope.brands[0]}).error(function(e,t,o,a){console.log(t)}),$scope.setMachine=function(e,t){writebdLog($scope.category,"_"+t,"渠道号",$scope.gh)},$scope.setMainPhoneBrand=function(e,t){$scope.brand=t,writebdLog($scope.category,"_"+writeBrand(t.brandName),"渠道号",$scope.gh)},$scope.setMainPhone=function(e,t){$scope.phoneId=t,writebdLog($scope.category,"_"+t,"渠道号",$scope.gh)},$scope.setMainPhonePkg=function(e,t){$scope["package"]=t,writebdLog($scope.category,"_SelectPackage","渠道号",$scope.gh)},$scope.setAddress=function(e,t,o,a,r){$scope.receiver.city=t+o+a+r,$scope.addressShow=!1},$scope.checkCouponActiveCode=function(){return $scope.couponForm.couponActiveCode.$valid?!!checkMobileCode($scope.receiver.mobile,$scope.coupon.activeCode)||($(".input-vcode").removeClass("weui-cell_success"),$(".input-vcode").addClass("weui-cell_warn"),!1):($(".input-vcode").addClass("weui-cell_warn"),!1)},$scope.checkCouponName=function(){return $("#couponForm").find(".weui_cell").removeClass("weui-cell_warn"),!!$scope.couponForm.reciverName.$valid||($(".input-name").addClass("weui-cell_warn"),!1)},$scope.checkCouponMobile=function(){return $("#couponForm").find(".weui_cell").removeClass("weui-cell_warn"),!!$scope.couponForm.receiverMobile.$valid||($(".input-mobile").addClass("weui-cell_warn"),!1)},$scope.getCouponActiveCode=function(e,t){return!$(e.currentTarget).hasClass("not")&&($scope.$root.toast.openUnLimit(),$scope.checkCouponMobile()?($http.get("http://m.yfq.cn:3099/api/getActiveCode/"+t).success(function(e){""==e&&($scope.$root.toast.close(),timePromise=$interval(function(){second<=0?($interval.cancel(timePromise),timePromise=void 0,second=59,$scope.paracont="重发验证码",$scope.paraclass="but_null"):($scope.paracont=second+"秒后可重发",$scope.paraclass="not but_null",second--)},1e3,100))}),void writebdLog($scope.category,"_VariIndexCode","渠道号",$scope.gh)):($scope.$root.toast.close(),$scope.dialog.open("系统提示","请输入正确的手机号码！"),!1))},$scope.getStreet=function(e,province,city,district){var _html="";$http.jsonp(cfApi.apiHost+"/wap/comm/czCommonController/getRegion.html?need=street&province="+province+"&city="+city+"&district="+district+"&callback=JSON_CALLBACK&s=wap").success(function(data,status,headers,config){$areaList.html(""),$.each(eval(data),function(e,t){_html=_html+"<li><a ng-click=\"setAddress(e,'"+province+"','"+city+"','"+district+"','"+t.name+"')\">"+t.name+"</a></li>"}),$compile($areaList.append(_html))($scope),$scope.addressShow=!0}).error(function(e,t,o,a){console.log(t)})},$scope.hideAddress=function(){$scope.addressShow=!1},$scope.getDistricts=function(e,province,city){var _html="";$http.jsonp(cfApi.apiHost+"/wap/comm/czCommonController/getRegion.html?need=district&province="+province+"&city="+city+"&callback=JSON_CALLBACK&s=wap").success(function(data,status,headers,config){$areaList.html(""),$.each(eval(data),function(e,t){_html=_html+"<li><a ng-click=\"getStreet(e,'"+province+"','"+city+"','"+t.name+"')\">"+t.name+"</a></li>"}),$compile($areaList.append(_html))($scope),$scope.addressShow=!0}).error(function(e,t,o,a){console.log(t)})},$scope.$root.writeReceiver=function(){writebdLog($scope.category,"_Address","渠道号",$scope.gh)},$scope.checkAddress=function(){return $("#receiverAddress").find(".weui_cell").removeClass("weui-cell_warn"),$scope.couponForm.reciverName.$valid?$scope.couponForm.receiverMobile.$valid?$scope.couponForm.receiverCity.$valid?$scope.couponForm.receiverRoom.$valid?($cookieStore.put("receiver",$scope.receiver),!0):($(".input-room").addClass("weui-cell_warn"),$scope.dialog.open("系统提示","请输入详细地址！"),!1):($(".input-city").addClass("weui-cell_warn"),$scope.dialog.open("系统提示","请选择收件区域！"),!1):($scope.dialog.open("系统提示","请输入正确的手机号码！"),$(".input-mobile").addClass("weui-cell_warn"),!1):($scope.dialog.open("系统提示","请输入正确的姓名！"),$(".input-name").addClass("weui-cell_warn"),!1)},$scope.submit=function(){if($scope.$root.toast.open(),3==$scope.payType){if(!$scope.checkCouponName())return $scope.toast.close(),$scope.dialog.open("系统提示","请输入正确的姓名！"),!1;if(!$scope.checkCouponMobile())return $scope.toast.close(),$scope.dialog.open("系统提示","请输入正确的手机号码！"),!1;if(!$scope.checkCouponActiveCode())return $scope.toast.close(),$scope.dialog.open("系统提示","请输入正确的验证码！"),!1;$("#couponForm").submit()}else{if(!$scope.checkAddress()){$scope.$root.toast.close();var e=$(".quan-form");return $container.animate({scrollTop:e.offset().top-$container.offset().top+$container.scrollTop()-50}),!1}if(!$scope.checkCouponActiveCode()){$scope.$root.toast.close(),$scope.dialog.open("系统提示","请输入正确的验证码！");var e=$(".quan-form");return $container.animate({scrollTop:e.offset().top-$container.offset().top+$container.scrollTop()-50}),!1}$("#couponForm").submit()}writebdLog($scope.category,"_BuyNow","渠道号",$scope.gh)},$scope.$watch("brand",function(e,t,o){t!==e&&void 0!==e&&(o.brandPhones=[],$.each(o.phones,function(t,a){""!=a.brandName&&a.brandName===e.brandName&&o.brandPhones.push(a)}),o.phoneId=o.brandPhones[0].activityproductId)},!0),$scope.$watch("phoneId",function(n,o,$scope){o!==n&&void 0!==n&&$http.jsonp(cfApi.apiHost+"/product/getProDetial.html?productId="+n+"&activeTag=jjk&s=wap&callback=JSON_CALLBACK").success(function(data,status,headers,config){$scope.phone=data,$scope.$root.mainColor=data.phoneTypes[0].mediaProductList[0],$scope.packages=[],$scope.comparePrices=[],$scope.packageIndex=0;var distance;$.each(eval(data.cardItems.split(";")),function(e,t){var o=$scope.pkgs[getIndex($scope.pkgs,"productId",t.slice(0,t.indexOf(":")))];t.slice(t.indexOf(":")+1,t.length)>=data.phoneBillPrice?o.phonePrice=t.slice(t.indexOf(":")+1,t.length):o.phonePrice=data.phoneBillPrice,$scope.packages.push(o),$scope.comparePrices.push(data.salePrice-o.salesPrice)});for(var i=1;i<$scope.comparePrices.length;i++)Math.abs($scope.comparePrices[i])<Math.abs($scope.comparePrices[$scope.packageIndex])&&($scope.packageIndex=i);$scope["package"]=$scope.packages[$scope.packageIndex]}).error(function(e,t,o,a){console.log(t)})},!0);var homeArgs=["_InputIndexName","_InputIndexNumber","_InputIndexCode"];$scope.$root.inputHomeArgs=function(e){writebdLog($scope.category,homeArgs[e],"渠道号",$scope.gh)}}]),app.config(["$stateProvider","$locationProvider",function(e,t){e.state("CctiveSuccess",{url:"/phone/active/C/success",templateUrl:function(e){return"pages/phone/active/C/success/success.html"},controller:"pCctiveSController"})}]).controller("pCctiveSController",["$scope","$location","$http","$stateParams","$interval","$timeout","$cookieStore",function(e,t,o,a,r,n,i){e.pageType="C",e.appType=systemName+"_xxyx_"+e.pageType,e.category=e.appType,e.params=window.location.search,e.$root.share={homeLink:"http://app.yfq.cn/phone/active/C/phones"+window.location.search,shareTitle:"中国电信“0”机价即可拿iPhone，最高还送6388元话费！先到先得！",shareDisc:"多重优惠！广州地区可送货上门验机，今日下单可享12期0息分期！",picUrl:"http://app.yfq.cn/images/active/share_active-1.png"},e.getContact=function(){getMeiqia(),_MEIQIA("showPanel"),writebdLog(e.category,"_CustConsult","渠道号",e.gh)},e.getOrderQuery=function(){writebdLog(e.category,"_OrderQuery","渠道号",e.gh)}}]),app.config(["$stateProvider","$locationProvider",function(e,t){e.state("DctiveSuccess",{url:"/phone/active/D/success",templateUrl:function(e){return"pages/phone/active/D/success/success.html"},controller:"pDctiveSController"})}]).controller("pDctiveSController",["$scope","$location","$http","$stateParams","$interval","$timeout","$cookieStore",function(e,t,o,a,r,n,i){e.pageType="D",e.appType=systemName+"_coupon_"+e.pageType,e.category=e.appType,e.params=window.location.search,e.$root.share={homeLink:"http://app.yfq.cn/phone/active/D/phones"+window.location.search,shareTitle:"震惊！电信新入网，只要预存话费就可0元购机！领券最高再减800元！",shareDisc:"预存话费直抵购机价，信用卡用户在享0息分期，广州地区可即日送货上门验机后办理！",picUrl:"http://app.yfq.cn/images/active/d/share_active.jpg"},e.getContact=function(){getMeiqia(),_MEIQIA("showPanel"),writebdLog(e.category,"_CustConsult","渠道号",e.gh)},e.getOrderQuery=function(){writebdLog(e.category,"_OrderQuery","渠道号",e.gh)}}]),app.config(["$stateProvider","$locationProvider",function(e,t){e.state("activePhones",{url:"/phone/active/A/phones",templateUrl:function(e){return"pages/phone/active/A/hotPhones/hotPhones.html"},controller:"pActivePhonesController"})}]).controller("pActivePhonesController",["$scope","$location","$http","$stateParams","$interval","$timeout","$cookieStore",function(e,t,o,a,r,n,i){function c(t){writebdLog(e.category,s[t],"渠道号",e.gh)}e.pageType="A",e.appType=systemName+"_coupon_"+e.pageType,e.category=e.appType,e.activePage="hotPhones",e.homeUrl=t.protocol()+"://"+t.host()+"/phone/active/A/phones",e.params=window.location.search,e.$root.share={homeLink:"http://app.yfq.cn/phone/active/A"+window.location.search,shareTitle:"我领到1888元购机年终奖！年前换个好手机，开开心心回家过大年！",shareDisc:"苹果、OPPO、华为、VIVO等大牌手机直降！用券购再立减！戳我抢→",picUrl:"http://app.yfq.cn/images/active/share_active.jpg"},writebdLog(e.category,"_Load","渠道号",e.gh),e.getContact=function(){getMeiqia(),_MEIQIA("showPanel"),writebdLog(e.category,"_CustConsult","渠道号",e.gh)},e.goToTop=function(){var e=$(".content-scrollable");e.animate({scrollTop:0})},o.jsonp(cfApi.apiHost+"/product/getProList.html?activeTag=lj&s=wap&callback=JSON_CALLBACK").success(function(t,o,a,r){e.singlePhones=t}).error(function(e,t,o,a){console.log(t)}),e.$root.btNavItem=function(e){c(e)};var s=["_MyCoupon","_MyOrder","_CustConsult"];$("img.lazy").lazyload({effect:"fadeIn",skip_invisible:!1,container:$(".content-scrollable")}),e.setMachine=function(t,o){writebdLog(e.category,"_"+o,"渠道号",e.gh)}}]),app.config(["$stateProvider","$locationProvider",function(e,t){e.state("activeDPhones",{url:"/phone/active/D/phones",templateUrl:function(e){return"pages/phone/active/D/hotPhones/hotPhones.html"},controller:"pDctivePhonesController"})}]).controller("pDctivePhonesController",["$scope","$location","$http","$stateParams","$interval","$timeout","$cookieStore",function(e,t,o,a,r,n,i){function c(t){writebdLog(e.category,s[t],"渠道号",e.gh)}e.pageType="D",e.appType=systemName+"_coupon_"+e.pageType,e.category=e.appType;e.activePage="hotPhones",e.params=window.location.search,e.homeUrl=t.protocol()+"://"+t.host()+"/phone/active/D/phones",e.$root.share={homeLink:"http://app.yfq.cn/phone/active/D/phones"+window.location.search,shareTitle:"震惊！电信新入网，只要预存话费就可0元购机！领券最高再减800元！",shareDisc:"预存话费直抵购机价，信用卡用户在享0息分期，广州地区可即日送货上门验机后办理！",picUrl:"http://app.yfq.cn/images/active/d/share_active.jpg"},writebdLog(e.category,"_Load","渠道号",e.gh),e.getContact=function(){getMeiqia(),_MEIQIA("showPanel"),writebdLog(e.category,"_CustConsult","渠道号",e.gh)},e.goToTop=function(){var e=$(".content-scrollable");e.animate({scrollTop:0})},o.jsonp(cfApi.apiHost+"/product/getProList.html?activeTag=jjk&s=wap&callback=JSON_CALLBACK").success(function(t,o,a,r){e.singlePhones=t,e.brands=[{brandName:"全部",brandSort:0,tag:!1},{brandName:"0元购机",brandSort:1,tag:!0},{brandName:"iPhone",brandSort:2,tag:!1},{brandName:"华为",brandSort:3,tag:!1},{brandName:"OPPO",brandSort:4,tag:!1},{brandName:"VIVO",brandSort:5,tag:!1},{brandName:"小米",brandSort:6,tag:!1},{brandName:"其它机型",brandSort:999,tag:!1}],e.brand=e.brands[0]}).error(function(e,t,o,a){console.log(t)}),e.$root.btNavItem=function(e){c(e)},e.showFqa=function(){$(".fqa-lists").toggleClass("close"),$(".fqa-more").toggleClass("close")};var s=["_MyCoupon","_MyOrder","_CustConsult"];$("img.lazy").lazyload({effect:"fadeIn",skip_invisible:!1,container:$(".content-scrollable")}),e.setMachine=function(t,o){writebdLog(e.category,"_"+o,"渠道号",e.gh)},e.$watch("brand",function(e,t,o){t!==e&&void 0!==e&&(o.brandPhones=[],"全部"==e.brandName?o.brandNavName="选择类别":o.brandNavName=e.brandName,$.each(o.singlePhones,function(t,a){""==e.brandName||"全部"==e.brandName?o.brandPhones.push(a):"其它机型"==e.brandName?"iPhone"!=a.brandName&&"华为"!=a.brandName&&"OPPO"!=a.brandName&&"VIVO"!=a.brandName&&"小米"!=a.brandName&&o.brandPhones.push(a):"0元购机"==e.brandName?a.cardItems==a.fanhuan&&o.brandPhones.push(a):a.brandName===e.brandName&&o.brandPhones.push(a)}),"0元购机"==e.brandName&&(o.brandPhones=o.brandPhones.sort(function(e,t){return parseInt(e.cardItems)-parseInt(t.cardItems)})))},!0)}]),app.config(["$stateProvider","$locationProvider",function(e,t){e.state("BctiveSuccess",{url:"/phone/active/B/success",templateUrl:function(e){return"pages/phone/active/B/success/success.html"},controller:"pBctiveSController"})}]).controller("pBctiveSController",["$scope","$location","$http","$stateParams","$interval","$timeout","$cookieStore",function(e,t,o,a,r,n,i){e.pageType="B",e.appType=systemName+"_xxyx_"+e.pageType,e.category=e.appType,e.params=window.location.search,e.$root.share={homeLink:"http://app.yfq.cn/phone/active/B"+window.location.search,shareTitle:"中国电信“0”机价即可拿iPhone，最高还送6388元话费！先到先得！",shareDisc:"多重优惠！广州地区可送货上门验机，今日下单可享12期0息分期！",picUrl:"http://app.yfq.cn/images/active/share_active-1.png"},e.getContact=function(){getMeiqia(),_MEIQIA("showPanel"),writebdLog(e.category,"_CustConsult","渠道号",e.gh)},e.getOrderQuery=function(){writebdLog(e.category,"_OrderQuery","渠道号",e.gh)}}]),app.config(["$stateProvider","$locationProvider",function(e,t){e.state("activeBPhones",{url:"/phone/active/B/phones",templateUrl:function(e){return"pages/phone/active/B/hotPhones/hotPhones.html"},controller:"pBctivePhonesController"})}]).controller("pBctivePhonesController",["$scope","$location","$http","$stateParams","$interval","$timeout","$cookieStore","$compile",function($scope,$location,$http,$stateParams,$interval,$timeout,$cookieStore,$compile){function writeBrand(e){return"华为"==e&&(e="huawei"),"小米"==e&&(e="mi"),"美图"==e&&(e="meitu"),e}$scope.pageType="B",$scope.activeTag="jktchd",$scope.appType=systemName+"_xxyx_"+$scope.pageType,$scope.category=$scope.appType;var butie="358:6388;359:5388;360:3880;361:2980;362:2400";$scope.payType=0,$scope.activePage="hotPhones",$scope.params=window.location.search,$scope.$root.share={homeLink:"http://app.yfq.cn/phone/active/B"+window.location.search,shareTitle:"中国电信“0”机价即可拿iPhone，最高还送6388元话费！先到先得！",shareDisc:"多重优惠！广州地区可送货上门验机，今日下单可享12期0息分期！",picUrl:"http://app.yfq.cn/images/active/share_active-1.png"};var $container=$(".content-scrollable");$scope.receiver={name:$location.search().receiverName,mobile:$location.search().receiverMobile,city:"",room:""};var $areaList=$(".area-list");writebdLog($scope.category,"_Order_Load","渠道号",$scope.gh),$scope.getContact=function(){getMeiqia(),_MEIQIA("showPanel"),writebdLog($scope.category,"_CustConsult","渠道号",$scope.gh)},$scope.setPayType=function(e){$scope.payType=e,writebdLog($scope.category,"_PayType"+e,"渠道号",$scope.gh)},$scope.goToTop=function(){var e=$(".content-scrollable");e.animate({scrollTop:0})},$http.jsonp(cfApi.apiHost+"/product/getProList.html?activeTag=jktchd&s=wap&callback=JSON_CALLBACK").success(function(e,t,o,a){$scope.phones=e,$scope.brands=[],$scope.brandsArry=[],$.each(e,function(e,t){if($scope.brandsArry.indexOf(t.brandName)==-1&&""!=t.brandName){var o={brandName:t.brandName,brandSort:t.brandSort};$scope.brandsArry.push(t.brandName),$scope.brands.push(o)}}),$scope.brands=$scope.brands.sort(function(e,t){return e.brandSort-t.brandSort}),$scope.brand=$scope.brands[0]}).error(function(e,t,o,a){console.log(t)}),$scope.setMachine=function(e,t){writebdLog($scope.category,"_"+t,"渠道号",$scope.gh)},$scope.setMainPhoneBrand=function(e,t){$scope.brand=t,writebdLog($scope.category,"_"+writeBrand(t.brandName),"渠道号",$scope.gh)},$scope.setMainPhone=function(e,t){$scope.phoneId=t,writebdLog($scope.category,"_"+t,"渠道号",$scope.gh)},$scope.setMainPhonePkg=function(e,t){$scope["package"]=t,writebdLog($scope.category,"_SelectPackage","渠道号",$scope.gh)},$scope.setAddress=function(e,t,o,a,r){$scope.receiver.city=t+o+a+r,$scope.addressShow=!1},$scope.getCity=function(e,province){var _html="";$http.jsonp(cfApi.apiHost+"/wap/comm/czCommonController/getRegion.html?need=city&province="+province+"&callback=JSON_CALLBACK&s=wap").success(function(data,status,headers,config){$areaList.html(""),$.each(eval(data),function(e,t){_html=_html+"<li><a ng-click=\"getDistricts(e,'"+province+"','"+t.name+"')\">"+t.name+"</a></li>"}),$compile($areaList.append(_html))($scope),$scope.addressShow=!0}).error(function(e,t,o,a){console.log(t)})},$scope.hideAddress=function(){$scope.addressShow=!1},$scope.getStreet=function(e,province,city,district){var _html="";$http.jsonp(cfApi.apiHost+"/wap/comm/czCommonController/getRegion.html?need=street&province="+province+"&city="+city+"&district="+district+"&callback=JSON_CALLBACK&s=wap").success(function(data,status,headers,config){$areaList.html(""),$.each(eval(data),function(e,t){_html=_html+"<li><a ng-click=\"setAddress(e,'"+province+"','"+city+"','"+district+"','"+t.name+"')\">"+t.name+"</a></li>"}),$compile($areaList.append(_html))($scope),$scope.addressShow=!0}).error(function(e,t,o,a){console.log(t)})},$scope.hideAddress=function(){$scope.addressShow=!1},$scope.getDistricts=function(e,province,city){var _html="";$http.jsonp(cfApi.apiHost+"/wap/comm/czCommonController/getRegion.html?need=district&province="+province+"&city="+city+"&callback=JSON_CALLBACK&s=wap").success(function(data,status,headers,config){$areaList.html(""),$.each(eval(data),function(e,t){_html=_html+"<li><a ng-click=\"getStreet(e,'"+province+"','"+city+"','"+t.name+"')\">"+t.name+"</a></li>"}),$compile($areaList.append(_html))($scope),$scope.addressShow=!0}).error(function(e,t,o,a){console.log(t)})},$scope.$root.writeReceiver=function(){writebdLog($scope.category,"_Address","渠道号",$scope.gh)},$scope.checkAddress=function(){return $("#receiverAddress").find(".weui_cell").removeClass("weui-cell_warn"),$scope.couponForm.reciverName.$valid?$scope.couponForm.receiverMobile.$valid?$scope.couponForm.receiverCity.$valid?$scope.couponForm.receiverRoom.$valid?($cookieStore.put("receiver",$scope.receiver),!0):($(".input-room").addClass("weui-cell_warn"),$scope.dialog.open("系统提示","请输入详细地址！"),!1):($(".input-city").addClass("weui-cell_warn"),$scope.dialog.open("系统提示","请选择收件区域！"),!1):($(".input-mobile").addClass("weui-cell_warn"),$scope.dialog.open("系统提示","请输入正确的手机号码！"),!1):($(".input-name").addClass("weui-cell_warn"),$scope.dialog.open("系统提示","请输入正确的姓名！"),!1)},$scope.submit=function(){if($scope.checkMainNumber()){if(!$scope.checkAddress()){var e=$(".quan-form");return $container.animate({scrollTop:e.offset().top-$container.offset().top+$container.scrollTop()-50}),!1}$scope.$root.toast.open(),$("#couponForm").submit()}writebdLog($scope.category,"_BuyNow","渠道号",$scope.gh)},$scope.$watch("brand",function(e,t,o){t!==e&&void 0!==e&&(o.brandPhones=[],$.each(o.phones,function(t,a){""!=a.brandName&&a.brandName===e.brandName&&o.brandPhones.push(a)}),o.phoneId=o.brandPhones[0].activityproductId)},!0),$scope.$watch("phoneId",function(n,o,$scope){o!==n&&void 0!==n&&$http.jsonp(cfApi.apiHost+"/product/getProDetial.html?productId="+n+"&activeTag=jjk&s=wap&callback=JSON_CALLBACK").success(function(data,status,headers,config){$scope.phone=data,$http.jsonp(cfApi.apiHost+"/product/getPackageList.html?activeTag=fqssj&s=wap&callback=JSON_CALLBACK").success(function(data,status,headers,config){$scope.pkgs=data,$scope.packageIndex=0;var cardItems=$scope.phone.cardItems.split(";").sort(function(e,t){return e.slice(e.indexOf(":")+1,e.length)-t.slice(t.indexOf(":")+1,t.length)});$scope.packages=[],$.each(eval(cardItems),function(i,k){var obj=$scope.pkgs[getIndex($scope.pkgs,"productId",k.slice(0,k.indexOf(":")))];obj.phonePrice=k.slice(k.indexOf(":")+1,k.length),obj.comparePrices=$scope.phone.phoneBillPrice-obj.salesPrice,$.each(eval(butie.split(";")),function(e,t){t.split(":")[0]==k.slice(0,k.indexOf(":"))&&($scope.phone.salePrice>t.split(":")[1]?obj.comparePrices=18*obj.oldPrice+($scope.phone.salePrice-t.split(":")[1]):obj.comparePrices=18*obj.oldPrice)}),$scope.packages.push(obj)});for(var i=1;i<$scope.packages.length;i++)$scope.packages[i].comparePrices<$scope.packages[$scope.packageIndex].comparePrices&&($scope.packageIndex=i);$scope["package"]=$scope.packages[$scope.packageIndex]}).error(function(e,t,o,a){console.log(t)})}).error(function(e,t,o,a){console.log(t)})},!0),$scope.$watch("package",function(n,o,$scope){n!=o&&($.each(eval(butie.split(";")),function(e,t){t.split(":")[0]==n.productId&&($scope.btp=t.split(":")[1])}),$scope.phone.salePrice>$scope.btp?$scope.totalPrice=18*$scope["package"].oldPrice+($scope.phone.salePrice-$scope.btp):$scope.totalPrice=18*$scope["package"].oldPrice)},!0)}]),app.config(["$stateProvider","$locationProvider",function(e,t){e.state("phoneASingle",{url:"/phs/sg/A/:phoneId",templateUrl:function(e){return"pages/phone/phone-details/single/A/details.html"},controller:"pASingleProController",onExit:function(){$("#container").removeClass("overlay-open"),$("#overlay-hook").html("")}})}]).controller("pASingleProController",["$scope","$rootScope","$location","$stateParams","$http","Phone",function(e,t,o,a,r,n){function i(t){s=p[t],writebdLog(e.category,"_"+s,"渠道号",e.gh)}e.pageType="A",e.activeTag="jjk",e.homeUrl=o.protocol()+"://"+o.host()+"/phone/active/A/phones";var c=o.search().headCategory;void 0!=c&&null!=c?e.category=c+"_SinglePhones":e.category=systemName+"_mysy_"+e.pageType+"_SinglePhones",e.phoneQueryUrl="http://"+o.host()+o.url(),writebdLog(e.category,"_Load","渠道号",e.gh),r.jsonp(cfApi.apiHost+"/product/getProDetial.html?productId="+a.phoneId+"&activeTag=jjk&s=wap&callback=JSON_CALLBACK").success(function(t,o,a,r){e.phone=t,e["package"]=e.phone.packageProductList[0],e.totolPrice=t.salePrice}).error(function(e,t,o,a){console.log(t)}),$("img.lazy").lazyload({effect:"fadeIn",skip_invisible:!1,container:$(".content-scrollable")}),e.buyType=1,e.activeTagName="裸机送0元4G流量卡",e.setSbPayType=function(t,o){e.payType=t,e.payTypeName=o,i(t)};var s,p=["payAll","payCOD","payMonthly"];e.setBuyType=function(t,o,a){t.preventDefault(),e.buyType=o;var r=$(t.currentTarget);r.parent().siblings().children().removeClass("curr"),r.addClass("curr"),0==o?(e.activeTag="lj",e.activeTagName=a,2==e.payType&&e.setSbPayType(0,"一次性支付")):(e.activeTag="jjk",e.activeTagName=a),writebdLog(e.category,"_SelectBuyType","渠道号",e.gh)},e.setPackage=function(t,o){e["package"]=o;var a=$(t.currentTarget);a.parent().siblings().removeClass("on-cardetails"),a.parent().addClass("on-cardetails"),$("#pickPackagePanel").slideUp(),writebdLog(e.category,"_SelectPackage","渠道号",e.gh)},e.checkPackage=function(){if(!scope.checkoutForm.productId.$valid){var e=$(".card-details");return $container.animate({scrollTop:e.offset().top-$container.offset().top+$container.scrollTop()-50}),$("#pickPackagePanel").slideDown(),!1}return!0},e.showPkgPn=function(){$("#pickPackagePanel").slideToggle(),writebdLog(e.category,"_SelectBillPackage","渠道号",e.gh)},e.$watch("productId",function(e,t,o){e!=t&&r.get(cfApi.apiHost+"/product/getProDetial.html?productId="+e+"&s=wap&callback=JSON_CALLBACK").success(function(e){})}),e.$watch("activeTag",function(e,t,o){e!=t&&r.jsonp(cfApi.apiHost+"/product/getProDetial.html?productId="+a.phoneId+"&activeTag="+e+"&s=wap&callback=JSON_CALLBACK").success(function(e,t,a,r){o.totolPrice=e.salePrice}).error(function(e,t,o,a){console.log(t)})}),androidInputBugFix()}]),app.config(["$stateProvider","$locationProvider",function(e,t){e.state("phoneBSingle",{url:"/phs/sg/B/:phoneId",templateUrl:function(e){return"pages/phone/phone-details/single/B/details.html"},controller:"pBSingleProController",onExit:function(){$("#container").removeClass("overlay-open"),$("#overlay-hook").html("")}})}]).controller("pBSingleProController",["$scope","$rootScope","$location","$stateParams","$http","Phone",function(e,t,o,a,r,n){function i(t){s=p[t],writebdLog(e.category,"_"+s,"渠道号",e.gh)}e.pageType="B",e.activeTag="jjk",e.homeUrl=o.protocol()+"://"+o.host()+"/phone/active/B/phones";var c=o.search().headCategory;void 0!=c&&null!=c?e.category=c+"_SinglePhones":e.category=systemName+"_mysy_"+e.pageType+"_SinglePhones",e.phoneQueryUrl="http://"+o.host()+o.url(),writebdLog(e.category,"_Load","渠道号",e.gh),r.jsonp(cfApi.apiHost+"/product/getProDetial.html?productId="+a.phoneId+"&activeTag=jjk&s=wap&callback=JSON_CALLBACK").success(function(t,o,a,r){e.phone=t,e["package"]=e.phone.packageProductList[0],e.totolPrice=t.salePrice}).error(function(e,t,o,a){console.log(t)}),$("img.lazy").lazyload({effect:"fadeIn",skip_invisible:!1,container:$(".content-scrollable")}),e.buyType=1,e.activeTagName="裸机送0元4G流量卡",e.setSbPayType=function(t,o){e.payType=t,e.payTypeName=o,i(t)};var s,p=["payAll","payCOD","payMonthly"];e.setBuyType=function(t,o,a){t.preventDefault(),e.buyType=o;var r=$(t.currentTarget);r.parent().siblings().children().removeClass("curr"),r.addClass("curr"),0==o?(e.activeTag="lj",e.activeTagName=a,2==e.payType&&e.setSbPayType(0,"一次性支付")):(e.activeTag="jjk",e.activeTagName=a),writebdLog(e.category,"_SelectBuyType","渠道号",e.gh)},e.setPackage=function(t,o){e["package"]=o;var a=$(t.currentTarget);a.parent().siblings().removeClass("on-cardetails"),a.parent().addClass("on-cardetails"),$("#pickPackagePanel").slideUp(),writebdLog(e.category,"_SelectPackage","渠道号",e.gh)},e.checkPackage=function(){if(!scope.checkoutForm.productId.$valid){var e=$(".card-details");return $container.animate({scrollTop:e.offset().top-$container.offset().top+$container.scrollTop()-50}),$("#pickPackagePanel").slideDown(),!1}return!0},e.showPkgPn=function(){$("#pickPackagePanel").slideToggle(),writebdLog(e.category,"_SelectBillPackage","渠道号",e.gh)},e.$watch("productId",function(e,t,o){e!=t&&r.get(cfApi.apiHost+"/product/getProDetial.html?productId="+e+"&s=wap&callback=JSON_CALLBACK").success(function(e){})}),e.$watch("activeTag",function(e,t,o){e!=t&&r.jsonp(cfApi.apiHost+"/product/getProDetial.html?productId="+a.phoneId+"&activeTag="+e+"&s=wap&callback=JSON_CALLBACK").success(function(e,t,a,r){o.totolPrice=e.salePrice}).error(function(e,t,o,a){console.log(t)})}),androidInputBugFix()}]),app.config(["$stateProvider","$locationProvider",function(e,t){e.state("phoneCSingle",{url:"/phs/sg/C/:phoneId",templateUrl:function(e){return"pages/phone/phone-details/single/C/details.html"},controller:"pCSingleProController",onExit:function(){$("#container").removeClass("overlay-open"),$("#overlay-hook").html("")}})}]).controller("pCSingleProController",["$scope","$rootScope","$location","$stateParams","$http","Phone","$cookieStore","$timeout",function($scope,$rootScope,$location,$stateParams,$http,Phone,$cookieStore,$timeout){function wirtePayType(e){value=payTypeAry[e],writebdLog($scope.category,"_"+value,"渠道号",$scope.gh);
}$scope.pageType="C",$scope.activeTag="jktchdd",$scope.homeUrl=$location.protocol()+"://"+$location.host()+"/phone/active/C/phones";var headCategory=$location.search().headCategory;void 0!=headCategory&&null!=headCategory?$scope.category=headCategory+"_SinglePhones":$scope.category=systemName+"_coupon_"+$scope.pageType+"_SinglePhones",$scope.phoneQueryUrl="http://"+$location.host()+$location.url(),writebdLog($scope.category,"_Load","渠道号",$scope.gh),$container=$(".content-scrollable"),$http.jsonp(cfApi.apiHost+"/product/getProDetial.html?productId="+$stateParams.phoneId+"&activeTag=jjk&s=wap&callback=JSON_CALLBACK").success(function(data,status,headers,config){$scope.phone=data,$scope.imgUrls=[];for(var i=0;i<data.phoneTypes[0].mediaProductList.length;i++)$scope.imgUrls.push("http://www.yfq.cn:8899/fileserver/medias/"+data.phoneTypes[0].mediaProductList[i].mediaUrl);$http.jsonp(cfApi.apiHost+"/product/getPackageList.html?activeTag=fqssj&s=wap&callback=JSON_CALLBACK").success(function(data,status,headers,config){$scope.pkgs=data;var cardItems=$scope.phone.cardItems.split(";").sort(function(e,t){return e.slice(e.indexOf(":")+1,e.length)-t.slice(t.indexOf(":")+1,t.length)});$scope.packages=[],$.each(eval(cardItems),function(e,t){var o=$scope.pkgs[getIndex($scope.pkgs,"productId",t.slice(0,t.indexOf(":")))];o.phonePrice=t.slice(t.indexOf(":")+1,t.length),$scope.packages.push(o)}),$scope["package"]=$scope.packages[0],$cookieStore.get("receiver")&&$cookieStore.get("receiver").city.indexOf("广州市")!=-1?$scope.setDefaultPayType(0,"送货上门"):$scope.setDefaultPayType(2,"信用卡分期"),$(".phone-pkgs-item").eq(1).find(".pick-panel").addClass("show")}).error(function(e,t,o,a){console.log(t)})}).error(function(e,t,o,a){console.log(t)}),$("img.lazy").lazyload({effect:"fadeIn",skip_invisible:!1,container:$(".content-scrollable")}),$scope.buyType=1,$scope.activeTagName="裸机",$scope.setSbPayType=function(e,t){$scope.payType=e,$scope.payTypeName=t,wirtePayType(e)};var value,payTypeAry=["payAll","payCOD","payMonthly"];$scope.setBuyType=function(e,t,o){e.preventDefault(),$scope.buyType=t,0==t?($scope.activeTag="lj",$scope.activeTagName=o,2==$scope.payType&&$scope.setSbPayType(0,"一次性支付")):($scope.activeTag="jjk",$scope.activeTagName=o),writebdLog($scope.category,"_SelectBuyType","渠道号",$scope.gh)},$scope.setPackage=function(e,t){$scope["package"]=t;var o=$(e.currentTarget);o.parent().siblings().removeClass("on-cardetails"),o.parent().addClass("on-cardetails"),$("#pickPackagePanel").slideUp(),writebdLog($scope.category,"_SelectPackage","渠道号",$scope.gh)},$scope.checkPackage=function(){if(!scope.checkoutForm.productId.$valid){var e=$(".card-details");return $container.animate({scrollTop:e.offset().top-$container.offset().top+$container.scrollTop()-50}),$("#pickPackagePanel").slideDown(),!1}return!0},$scope.showPkgPn=function(){$(".card-details").slideToggle(),writebdLog($scope.category,"_SelectBillPackage","渠道号",$scope.gh)},$cookieStore.get("pkgAndNumber")?$scope.pkgAndNumber=$cookieStore.get("pkgAndNumber"):$scope.pkgAndNumber=!1,$scope.checkForm=function(){var e=$("#checkoutForm");if($scope.$root.checkActiveCode())writebdLog($scope.category,"_BuyNow","渠道号",$scope.gh),$scope.$root.toast.open(),e.submit();else{var t=$("#receiverAddress");$container.animate({scrollTop:t.offset().top-$container.offset().top+$container.scrollTop()}),$("#receiverAddressPanel").slideDown(),$(".adr-tab").addClass("down")}},$scope.submitForm=function(e){if($scope.checkMainNumber())if($scope.checkAddress())$scope.checkForm();else{var t=$("#receiverAddress");$container.animate({scrollTop:t.offset().top-$container.offset().top+$container.scrollTop()-50}),$("#receiverAddressPanel").slideDown(),$(".adr-tab").addClass("down")}},$scope.$watch("package",function(e,t,o){e!=t&&(e.salesPrice>=o.phone.phoneBillPrice?o.totalPrice=e.salesPrice:o.totalPrice=o.phone.phoneBillPrice)},!0),$scope.$watch("receiver.city",function(e,t,o){e.indexOf("广州市")!=-1?o.setDefaultPayType(0,"送货上门"):0==o.payType&&o.setDefaultPayType(0,"一次性支付")}),androidInputBugFix()}]),app.config(["$stateProvider","$locationProvider",function(e,t){e.state("phoneDSingle",{url:"/phs/sg/D/:phoneId",templateUrl:function(e){return"pages/phone/phone-details/single/D/details.html"},controller:"pDSingleProController",onExit:function(){$("#container").removeClass("overlay-open"),$("#overlay-hook").html("")}})}]).controller("pDSingleProController",["$scope","$rootScope","$location","$stateParams","$http","Phone","$cookieStore","$timeout",function($scope,$rootScope,$location,$stateParams,$http,Phone,$cookieStore,$timeout){function wirtePayType(e){value=payTypeAry[e],writebdLog($scope.category,"_"+value,"渠道号",$scope.gh)}$scope.mp=$location.search().mp,$scope.pageType="D",$scope.activeTag="jktchdd";var butie="359:5388;360:3880;361:2980;362:2400";$scope.homeUrl=$location.protocol()+"://"+$location.host()+"/phone/active/D/phones",$scope.sold=Math.round(1e3*Math.random());var headCategory=$location.search().headCategory;void 0!=headCategory&&null!=headCategory?$scope.category=headCategory+"_SinglePhones":$scope.category=systemName+"_coupon_"+$scope.pageType+"_SinglePhones",$scope.phoneQueryUrl="http://"+$location.host()+$location.url(),writebdLog($scope.category,"_Load","渠道号",$scope.gh),$container=$(".content-scrollable"),$http.jsonp(cfApi.apiHost+"/product/getProDetial.html?productId="+$stateParams.phoneId+"&activeTag=jjk&s=wap&callback=JSON_CALLBACK").success(function(data,status,headers,config){$scope.phone=data,$scope.imgUrls=[],366==$scope.phone.activityproductId&&($scope.phoneFlash=[{phoneId:366,flash:128},{phoneId:367,flash:256}]),367==$scope.phone.activityproductId&&($scope.phoneFlash=[{phoneId:366,flash:128},{phoneId:367,flash:256}]),368==$scope.phone.activityproductId&&($scope.phoneFlash=[{phoneId:368,flash:128},{phoneId:369,flash:256}]),369==$scope.phone.activityproductId&&($scope.phoneFlash=[{phoneId:368,flash:128},{phoneId:369,flash:256}]);for(var i=0;i<data.phoneTypes[0].mediaProductList.length;i++)$scope.imgUrls.push("http://www.yfq.cn:8899/fileserver/medias/"+data.phoneTypes[0].mediaProductList[i].mediaUrl);$http.jsonp(cfApi.apiHost+"/product/getPackageList.html?activeTag=fqssj&s=wap&callback=JSON_CALLBACK").success(function(data,status,headers,config){$scope.pkgs=data,$scope.packageIndex=0;var cardItems=$scope.phone.cardItems.split(";").sort(function(e,t){return e.slice(e.indexOf(":")+1,e.length)-t.slice(t.indexOf(":")+1,t.length)});$scope.packages=[],$.each(eval(cardItems),function(i,k){var obj=$scope.pkgs[getIndex($scope.pkgs,"productId",k.slice(0,k.indexOf(":")))];obj.phonePrice=k.slice(k.indexOf(":")+1,k.length),obj.comparePrices=$scope.phone.phoneBillPrice-obj.salesPrice,$.each(eval(butie.split(";")),function(e,t){t.split(":")[0]==k.slice(0,k.indexOf(":"))&&($scope.phone.salePrice>t.split(":")[1]?obj.comparePrices=18*obj.oldPrice+($scope.phone.salePrice-t.split(":")[1]):obj.comparePrices=18*obj.oldPrice)}),$scope.packages.push(obj)});for(var i=1;i<$scope.packages.length;i++)$scope.packages[i].comparePrices<$scope.packages[$scope.packageIndex].comparePrices&&($scope.packageIndex=i);$scope["package"]=$scope.packages[$scope.packageIndex],$cookieStore.get("receiver")&&$cookieStore.get("receiver").city.indexOf("广州市")!=-1?$scope.setDefaultPayType(1,"货到付款"):$scope.setDefaultPayType(0,"马上付款"),$(".phone-pkgs-item").eq(1).find(".pick-panel").addClass("show")}).error(function(e,t,o,a){console.log(t)}),$scope.$watch("receiver.city",function(e,t,o){""!=e?e.indexOf("广州市")!=-1?o.setDefaultPayType(1,"货到付款"):1==o.payType&&o.setDefaultPayType(0,"马上付款"):o.setDefaultPayType(0,"马上付款")}),$scope.$root.share={homeLink:"http://app.yfq.cn/phs/sg/D/"+$stateParams.phoneId+window.location.search,shareTitle:"想换手机？这里全场降价后再享95折，先抢了再说！",shareDisc:"iPhone、OPPO、华为各大品牌新品现货抢购，最高可享12期0息分期！",picUrl:"http://www.yfq.cn:8899/fileserver/medias/"+$scope.phone.phoneTypes[0].mediaProductList[0].mediaUrl}}).error(function(e,t,o,a){console.log(t)}),$("img.lazy").lazyload({effect:"fadeIn",skip_invisible:!1,container:$(".content-scrollable")}),$scope.buyType=1,$scope.activeTagName="裸机",$scope.setSbPayType=function(e,t){$scope.payType=e,$scope.payTypeName=t,wirtePayType(e)};var value,payTypeAry=["payAll","payCOD","payMonthly"];$scope.showNgFudai=function(e){e||$scope.showFudai("JM-MX")},$location.search().duplicateNum&&(Array.isArray($location.search().duplicateNum)?$scope.dialog.open("系统提示","您选择的号码："+$location.search().duplicateNum[0]+"已被购买，请重新选择"):$scope.dialog.open("系统提示","您选择的号码："+$location.search().duplicateNum+"已被购买，请重新选择")),$scope.setFlashDriver=function(e){window.location.href="http://"+window.location.host+"/phs/sg/D/"+e.phoneId+window.location.search},$scope.setBuyType=function(e,t,o){e.preventDefault(),$scope.buyType=t,0==t?($scope.activeTag="lj",$scope.activeTagName=o,2==$scope.payType&&$scope.setSbPayType(0,"马上付款")):($scope.activeTag="jjk",$scope.activeTagName=o),writebdLog($scope.category,"_SelectBuyType","渠道号",$scope.gh)},$scope.setPackage=function(e,t){$scope["package"]=t;var o=$(e.currentTarget);o.parent().siblings().removeClass("on-cardetails"),o.parent().addClass("on-cardetails"),$("#pickPackagePanel").slideUp(),writebdLog($scope.category,"_SelectPackage","渠道号",$scope.gh)},$scope.checkPackage=function(){if(!$scope.checkoutForm.productId.$valid){var e=$(".card-details");return $container.animate({scrollTop:e.offset().top-$container.offset().top+$container.scrollTop()-50}),$("#pickPackagePanel").slideDown(),!1}return!0},$scope.showPkgPn=function(){$(".card-details").slideToggle(),writebdLog($scope.category,"_SelectBillPackage","渠道号",$scope.gh)},$cookieStore.get("pkgAndNumber")?$scope.pkgAndNumber=$cookieStore.get("pkgAndNumber"):$scope.pkgAndNumber=!1,$scope.checkForm=function(){var e=$("#checkoutForm");if($scope.$root.checkActiveCode())writebdLog($scope.category,"_BuyNow","渠道号",$scope.gh),$scope.$root.toast.open(),e.submit();else{var t=$("#receiverAddress");$container.animate({scrollTop:t.offset().top-$container.offset().top+$container.scrollTop()}),$("#receiverAddressPanel").slideDown(),$(".adr-tab").addClass("down")}},$scope.loadedCheck=function(){return!!$scope.checkoutForm.reciverName.$valid&&(!!$scope.checkoutForm.receiverMobile.$valid&&(!!$scope.checkoutForm.receiverCity.$valid&&!!$scope.checkoutForm.receiverRoom.$valid))},$timeout(function(){$scope.loadedCheck()||($(".adr-tab").toggleClass("down"),$("#receiverAddressPanel").slideDown())}),$scope.submitForm=function(e){if($scope.checkMainNumber())if($scope.checkAddress())$scope.checkForm();else{var t=$("#receiverAddress");$container.animate({scrollTop:t.offset().top-$container.offset().top+$container.scrollTop()-50}),$("#receiverAddressPanel").slideDown(),$(".adr-tab").addClass("down")}},$scope.$watch("package",function(n,o,$scope){n!=o&&($.each(eval(butie.split(";")),function(e,t){t.split(":")[0]==n.productId&&($scope.btp=t.split(":")[1])}),$scope.phone.salePrice>$scope.btp?$scope.totalPrice=18*$scope["package"].oldPrice+($scope.phone.salePrice-$scope.btp):$scope.totalPrice=18*$scope["package"].oldPrice)},!0),androidInputBugFix()}]),app.config(["$stateProvider","$locationProvider",function(e,t){e.state("about",{url:"/about",templateUrl:"pages/about/about.html",controller:"aboutController"})}]).controller("aboutController",["$scope","$rootScope","$location","$http",function(e,t,o,a){}]),app.config(["$stateProvider","$locationProvider",function(e,t){e.state("payState",{url:"/payState/:status",templateUrl:"pages/payState/payState.html",controller:"payStateController"})}]).controller("payStateController",["$scope","$rootScope","$location","$stateParams","$http",function(e,t,o,a,r){e.payStatus=a.status,e.params=window.location.search,void 0!=o.search().orderNo?(e.orderNo=o.search().orderNo,r.get("http://app.yfq.cn:3099/api/getSalesOrder/"+e.orderNo).success(function(t){e.callbackUrl=t.items[0].salesOrder.callbackUrl})):e.callbackUrl="#",r.jsonp(cfApi.apiHost+"/product/getProList.html?activeTag=jjk&s=wap&callback=JSON_CALLBACK").success(function(t,o,a,r){e.singlePhones=t}).error(function(e,t,o,a){console.log(t)})}]),app.config(["$stateProvider","$locationProvider",function(e,t){e.state("errorSuccess",{url:"/error/:status",templateUrl:"pages/error/error.html",controller:"errorController"})}]).controller("errorController",["$scope","$rootScope","$location","$stateParams",function(e,t,o,a){e.errorStatus=a.status,o.search()&&(e.errorData=o.search()),e.getContent=function(){getMeiqia(),_MEIQIA("showPanel")}}]),app.config(["$stateProvider","$locationProvider",function(e,t){e.state("payment",{url:"/payment",templateUrl:"pages/payment/payment.html",controller:"paymentController"})}]).controller("paymentController",["$scope","$rootScope","$location","$stateParams","$cookieStore","$http",function(e,t,o,a,r,n){e.orderNo=o.search().orderNo,r.get("phoneQueryUrl")&&(e.phoneQueryUrl=r.get("phoneQueryUrl")),e.orderNo?(e.category="_IndexSearch",n.get("http://app.yfq.cn:3099/api/getSalesOrder/"+e.orderNo).success(function(t){var o,a,r,n,i;$.each(t.items,function(e,t){t.productName.indexOf("月")==-1?(o=t.productId,r=t.salesOrder.color,n=t.salesOrder.buyMobile,i=t.salesOrder.totalAmount):a=t.productId}),e.orderState={machineId:o,productId:a,color:r,phoneNumber:n,price:i,category:e.category},e.receiver={name:t.salesOrder.recieverName,mobile:t.salesOrder.recieverMobile,city:t.salesOrder.receiverCity,room:t.salesOrder.receiverRoom}})):(e.orderState=r.get("orderState"),e.category=e.orderState.category)}]),app.config(["$stateProvider","$locationProvider",function(e,t){e.state("otherAProduct",{url:"/others/A",templateUrl:"pages/others/A/a.html",controller:"otherAProductController"})}]).controller("otherAProductController",["$scope","$rootScope","$stateParams","$location","$http",function(e,t,o,a,r){e.activeTag="mifitc",e.pageType="A",e.category=systemName+"_mifitc_"+e.pageType,writebdLog(e.category,"_Load","渠道号",e.gh),e.products=[{id:1,name:"健维宝1盒 + 神酒1瓶 + 干果1盒 送鲜果蜜1盒",price:398,select:!0},{id:2,name:"春砂仁干果2盒 送鲜果蜜1盒",price:298,select:!1},{id:3,name:"春砂仁健维宝2盒",price:298,select:!1},{id:4,name:"春之神酒2瓶",price:298,select:!1},{id:5,name:"春砂仁鲜果蜜2盒",price:198,select:!1}],e.mainProduct=e.products[0],e.selectProduct=function(t){e.mainProduct=t};for(var n=new Array,i=0;i<=10;i++)n.push({txt:getRandomReceiverPhone()+" 购买了春砂仁鲜果蜜2盒 <span>"+getRanDomTime()+"分钟前</span>"});e.getters=n,e.$on("ngRepeatFinished",function(e){$(".getters").slide({mainCell:"ul",autoPage:!0,effect:"topMarquee",autoPlay:!0,interTime:50,vis:5})}),$container=$(".content-scrollable"),e.goToSelect=function(){var e=$(".select-area");$container.animate({scrollTop:e.offset().top-$container.offset().top+$container.scrollTop()})},e.goTo=function(e){var t=$(e);$container.animate({scrollTop:t.offset().top-$container.offset().top+$container.scrollTop()})},e.getContact=function(){writebdLog(e.category,"_CustConsult","渠道号",e.gh)},e.submitForm=function(t){var o=$("#checkoutForm");return e.checkAddress()&&e.$root.checkActiveCode()?(o.submit(),void writebdLog(e.category,"_BuyNow","渠道号",e.gh)):(e.goTo("#receiverAddress"),!1)}}]),app.config(["$stateProvider","$locationProvider",function(e,t){e.state("flowRecharge",{url:"/flow/recharge",templateUrl:"pages/flowCard/recharge/recharge.html",controller:"flowRechargeController"})}]).controller("flowRechargeController",["$scope","$rootScope","$location",function(e,t,o){}]),app.config(["$stateProvider","$locationProvider",function(e,t){e.state("paySuccess",{url:"/pay/:status",templateUrl:"pages/payStatus/payStatus.html",controller:"payController"})}]).controller("payController",["$scope","$rootScope","$location","$stateParams","$http",function(e,t,o,a,r){e.payStatus=a.status,void 0!=o.search().orderNo?(e.orderNo=o.search().orderNo,r.get("http://app.yfq.cn:3099/api/getSalesOrder/"+e.orderNo).success(function(t){e.callbackUrl=t.items[0].salesOrder.callbackUrl})):e.callbackUrl="#"}]),app.directive("buyers",["$interval",function(e){return{restrict:"E",templateUrl:"modules/buyers/buyers.html",link:function(t,o,a){t.productType=a.type,t.getBuyers=function(){for(var e=new Array,t=0;t<4;t++){var o={name:getRandomName(),phone:getRandomPhone(),pkg:getRandomPkg(),time:getRanDomTime(),product:getRandomProduct()};e.push(o)}return e},t.buyers=t.getBuyers(),e(function(){t.buyers=t.getBuyers()},1e3)}}}]),app.directive("aboutUs",["$timeout",function(e){return{restrict:"E",templateUrl:"modules/aboutUs/aboutUs.html",link:function(e,t,o){}}}]),app.directive("activity",["$location",function(e){return{restrict:"E",templateUrl:"modules/activity/activity.html",link:function(t,o,a){void 0==e.search().activity?t.activity="":t.activity=e.search().activity}}}]),app.directive("cardPkg",["$http","$stateParams","$q",function(e,t,o){return{restrict:"C",scope:{ssDd:"="},templateUrl:"modules/cardPackage/cardPkg.html",link:function(e,t,o){e.openCardPkg=function(t){var o=$("#"+t).html();e.$root.Overlay.open(o)}}}}]),app.directive("copyRight",["$timeout",function(e){return{restrict:"E",replace:!0,scope:{},templateUrl:"modules/copyRight/copyRight.html",link:function(e,t,o){e.content=o.content}}}]),app.directive("chooseNumber",["$compile",function($compile){return{restrict:"E",templateUrl:"modules/chooseNumber/chooseNumber.html",controller:"chooseNumberController",link:function(scope,element){$compile($(".number-list").clone().appendTo(".page"))(scope),$(".choose-number .number-list").remove();var $span=$("#number-select span"),$numberList=$(".number-list"),$table=$numberList.find("table"),$lastNumberSpan=$("#number-select span:last-child");scope.currNumberIndex=3,scope.closeNumberList=function(){$numberList.slideUp()},scope.selectNumber=function(e,t){if(!$(t.target).hasClass("active"))return!1;var o,a,r;if($span.eq(scope.currNumberIndex).attr("date-value",e),$span.eq(scope.currNumberIndex).html(e),$span.eq(scope.currNumberIndex).attr("class","old"),$span.eq(scope.currNumberIndex+1).attr("class","curr"),scope.currNumberIndex<10)return scope.showPickNumberPanel(scope.currNumberIndex+1,"selectNumber"),$("#num-sure").removeClass("active"),$("#num-reset").removeClass("active"),!0;if(10==scope.currNumberIndex){for(a="",o=0;o<11;o++)a+=$span.eq(o).attr("date-value");r=a,scope.phoneNumber=r,$("#num-sure").addClass("active"),$("#num-reset").addClass("active"),$numberList.slideUp()}},scope.showPickNumberPanel=function(pos,isWrite){var i,numNow;for(numNow="",scope.currNumberIndex=pos,$span.eq(pos).nextAll("span").attr("class","future"),$span.eq(pos-1).nextAll("span").html("?"),$span.eq(pos-1).nextAll("span").attr("date-value",""),$table.find("td").find("a").attr("class",""),i=0;i<pos;i++)numNow+=$span.eq(i).attr("date-value");var jsonDs=getNumArr(numNow,scope.phoneData);return $table.find("td").find("a").removeClass("active"),""!=$span.eq(i-1).attr("date-value")&&($span.eq(pos).attr("class","curr"),$.each(eval(jsonDs),function(e,t){0==t?$table.find("td").eq(10).find("a").attr("class","active"):$table.find("td").eq(t-1).find("a").attr("class","active")}),$numberList.slideDown(),"selectNumber"!=isWrite&&writebdLog(scope.category,"_SelectNumber","渠道号",scope.gh),void 0)},scope.checkPhone=function(){return!!$lastNumberSpan.hasClass("old")||(scope.showPickNumberPanel(scope.currNumberIndex),!1)},scope.reChooseNumber=function(){scope.showPickNumberPanel(3,"selectNumber"),writebdLog(scope.category,"_AgainNumber","渠道号",scope.gh)},scope.$watch("phoneData",function(e,t,o){},!0)}}}]).controller("chooseNumberController",["$scope","$cookieStore","$http","$compile",function($scope,$cookieStore,$http){$scope.phoneData=new Array,$http.jsonp(cfApi.apiHost+"/wap/taokafanghaoNew/fetchNumber.html?callback=JSON_CALLBACK").success(function(data,status,headers,config){$.each(eval(data),function(e,t){t.t||$scope.phoneData.push(t)})}).error(function(e,t,o,a){console.log(t)})}]),app.directive("ngCoupon",["$location","$interval","$http","$cookieStore","$timeout",function(e,t,o,a,r){return{restrict:"E",templateUrl:"modules/coupon/coupon.html",link:function(n,i,c){n.showPhones=!1,n.$root.paracont="获取手机验证码",n.$root.paraclass="but_null";var s=59,p=void 0;n.showFudai=function(e){n.couponType=e;var t=$("#wxQrCode").html();n.Overlay.openCompile(t),writebdLog(n.category,"_ShowCouponBar","渠道号",n.gh)},void 0!==e.search().gh&&(e.search().gh.indexOf("yjtth5")!=-1&&"/phone/active/A"===e.path()&&n.showFudai("JM-MX"),e.search().gh.indexOf("wxword")!=-1&&"/phone/active/A"===e.path()&&n.showFudai("JM-MX")),void 0!==e.search().fromsearch&&1==e.search().fromsearch&&(n.showPhones=!0,r(function(){var e=$(".content-scrollable"),t=$(".hot-phone");e.animate({scrollTop:t.offset().top-e.offset().top+e.scrollTop()})},500)),n.$root.shareQuan=function(){n.showShare(),writebdLog(n.category,"_Share","渠道号",n.gh)};var l=["_InputIndexCode","_InputIndexNumber"];n.$root.inputHomeArgs=function(e){writebdLog(n.category,l[e],"渠道号",n.gh)},n.$root.getQuan=function(t){if(n.toast.open(),!n.$root.checkCouponMobile())return n.toast.close(),n.dialog.open("系统提示","请输入正确的手机号码！"),!1;if(!n.$root.checkCouponActiveCode())return n.toast.close(),n.dialog.open("系统提示","请输入正确的验证码！"),!1;var r=e.search().headCategory,i=n.category;void 0!=r&&null!=r&&(i=r),o.jsonp(cfApi.apiHost+"/product/doReceiveMultipleCoupon.html?recieverMobile="+n.coupon.mobile+"&couponType="+n.couponType+"&gh="+n.gh+"&activity="+n.activity+"&category="+i+"&callbackUrl="+encodeURI(n.homeUrl+"?gh="+n.gh+"&activity="+n.activity)+"&s=wap&callback=JSON_CALLBACK").success(function(e,t,o,r){"hotPhones"!=n.activePage?(n.receiver.mobile=n.coupon.mobile,n.activeCode=n.coupon.activeCode):(a.put("receiver",{name:"",mobile:n.coupon.mobile,city:"",room:""}),a.put("activeCode",n.coupon.activeCode)),n.toast.close(),n.$root.apiCode=0,0==e[0].resultCode?($(".quan-result").removeClass("hide"),$(".quan-form").addClass("hide"),$(".fudai-1").hide(),$(".fudai-2").show(),n.$root.gettedCoupon=!0,a.put("couponStore",a.get("couponStore")-1),n.couponStore=a.get("couponStore")-1,writebdLog(n.category,"_ReceiveCoupons","渠道号",n.gh)):($(".quan-error").removeClass("hide"),$(".quan-form").addClass("hide"),$(".fudai-1").hide(),$(".fudai-3").show())}).error(function(e,t,o,a){console.log(t)}),writebdLog(n.category,"_ClickCoupons","渠道号",n.gh)},n.$root.usingQuan=function(){if(n.showPhones=!0,n.Overlay.close(),writebdLog(n.category,"_UseCoupons","渠道号",n.gh),"index"==n.activePage)e.path("/phone/active/A/phones");else if("hotPhones"==n.activePage){var t=$(".content-scrollable"),o=$("#hotPhone");t.animate({scrollTop:o.offset().top-t.offset().top+t.scrollTop()})}else{var t=$(".content-scrollable"),o=$("#receiverAddress");t.animate({scrollTop:o.offset().top-t.offset().top+t.scrollTop()})}},n.$root.checkCouponMobile=function(){return $("#couponForm").find(".weui_cell").removeClass("weui-cell_warn"),!!n.couponForm.couponMobile.$valid||($(".input-mobile").addClass("weui-cell_warn"),!1)},n.$root.getCouponActiveCode=function(e,a){return!$(e.currentTarget).hasClass("not")&&(n.toast.openUnLimit(),n.$root.checkCouponMobile()?(o.get("http://app.yfq.cn:3099/api/getActiveCode/"+a).success(function(e){""==e&&(n.toast.close(),p=t(function(){s<=0?(t.cancel(p),p=void 0,s=59,n.$root.paracont="重新获取验证码",n.$root.paraclass="but_null"):(n.$root.paracont=s+"秒后可重发",n.$root.paraclass="not but_null",s--)},1e3,100))}),void writebdLog(n.category,"_VariIndexCode","渠道号",n.gh)):(n.toast.close(),n.dialog.open("系统提示","请输入正确的手机号码！"),!1))},n.$root.checkCouponActiveCode=function(){return n.couponForm.couponActiveCode.$valid?!!checkMobileCode(n.coupon.mobile,n.coupon.activeCode)||($(".input-vcode").removeClass("weui-cell_success"),$(".input-vcode").addClass("weui-cell_warn"),!1):($(".input-vcode").addClass("weui-cell_warn"),!1)}}}}]),app.directive("footerNav",["$http",function($http){return{restrict:"E",templateUrl:"modules/footerNav/footerNav.html",link:function(scope,element,attrs){var $form=$(attrs.submit),$container=$(".content-scrollable"),$lastNumberSpan=$("#number-select span:last-child"),$scrollTo,searchType=attrs.searchType;scope.priceType=attrs.priceType,"phone"==searchType?scope.orderURL="http://m.gd189fq.com/wap/customer/searchIndexA.html?s=wap":scope.orderURL="http://m.gd189fq.com/yfqcz/#/purchaseOrderList?redirect_uri=http://app.yfq.cn",scope.checks=eval(attrs.checks),scope.getSearch=function(){writebdLog(scope.category,"_OrderQuery","渠道号",scope.gh)},scope.getContent=function(){getMeiqia(),_MEIQIA("showPanel"),writebdLog(scope.category,"_CustConsult","渠道号",scope.gh)},scope.submitForm=function(e,t){if(e.preventDefault(),"true"==attrs.checkPhone&&!scope.checkPhone())return $scrollTo=$("#numberPanel"),$container.animate({scrollTop:$scrollTo.offset().top-$container.offset().top+$container.scrollTop()-50}),!1;if(scope.checkAddress())if(scope.$root.checkActiveCode()){if(writebdLog(scope.category,"_BuyNow","渠道号",scope.gh),scope.$root.toast.open(),2==scope.payType)return scope.showHuOverLay("payTipsPanel"),!1;$form.submit()}else $scrollTo=$("#receiverAddress"),$container.animate({scrollTop:$scrollTo.offset().top-$container.offset().top+$container.scrollTop()});else $scrollTo=$("#receiverAddress"),$container.animate({scrollTop:$scrollTo.offset().top-$container.offset().top+$container.scrollTop()})}}}}]),app.directive("footerNavNew",["$http","$cookieStore",function($http,$cookieStore){return{restrict:"E",templateUrl:"modules/footerNav/footerNav.html",link:function(scope,element,attrs){function checkPhoneNumber(){return!!scope.checkoutForm.phoneNumber.$valid}var $form=$(attrs.submit),$container=$(".content-scrollable"),$lastNumberSpan=$("#number-select span:last-child"),$scrollTo,searchType=attrs.searchType;scope.priceType=attrs.priceType,"phone"==searchType?scope.orderURL="http://m.gd189fq.com/wap/customer/searchIndexA.html?s=wap":scope.orderURL="http://m.gd189fq.com/yfqcz/#/purchaseOrderList?redirect_uri=http://app.yfq.cn",scope.payTypeName="下一步",attrs.payTypeName&&(scope.payTypeName=attrs.payTypeName),scope.checks=eval(attrs.checks),scope.getSearch=function(){writebdLog(scope.category,"_OrderQuery","渠道号",scope.gh)},scope.getContent=function(){getMeiqia(),_MEIQIA("showPanel"),writebdLog(scope.category,"_CustConsult","渠道号",scope.gh)},scope.submitForm=function(e){scope.checkPhone()?(scope.orderState={machineId:scope.phone.productId,productId:scope.pkg.productId,color:scope.color.colorName,phoneNumber:scope.phoneNumber,price:scope.mainPrice,category:scope.category},$cookieStore.put("orderState",scope.orderState),writebdLog(scope.category,"_BuyNow","渠道号",scope.gh),scope.$root.toast.open()):(e.preventDefault(),scope.npShow(1))}}}}]),app.directive("footerNavRb",["$timeout",function(e){return{restrict:"E",templateUrl:"modules/footerNav/footerNavRb.html",link:function(e,t,o){var a,r=$(o.submit),n=$(".content-scrollable");e.orderSearchUrl=o.orderSearchUrl,e.cod=o.cod,e.codName="货到付款",e.payTypeName="立即支付",e.getSearch=function(){writebdLog(e.category,"_OrderQuery","渠道号",e.gh)},e.getContent=function(){getMeiqia(),_MEIQIA("showPanel"),writebdLog(e.category,"_CustConsult","渠道号",e.gh)},e.submitForm=function(t,i){return t.preventDefault(),"true"!=o.checkPhone||e.checkPhone()?void("true"==o.checkAddress&&(e.checkAddress()&&e.$root.checkActiveCode()?(writebdLog(e.category,"_BuyNow","渠道号",e.gh),e.$root.toast.open(),1==i?r.attr("action",cfApi.apiHost+"/wap/taokafanghaoNew/uploadCardB.html"):0==i&&r.attr("action",cfApi.apiHost+"/wap/taokafanghaoNew/submitOrderSingle.html"),r.submit()):(a=$("#receiverAddress"),n.animate({scrollTop:a.offset().top-n.offset().top+n.scrollTop()})))):(a=$("#phoneQuery"),n.animate({scrollTop:a.offset().top-n.offset().top+n.scrollTop()}),!1)}}}}]),app.directive("jsDialog",[function(){return{restrict:"E",templateUrl:"modules/dialog/dialog.html",link:function(e,t,o){e.$root.dialog={open:function(t,o){e.dialogTitle=t,e.dialogContent=o,$(".js_dialog").show()},close:function(e){$(".js_dialog").hide()}}}}}]),app.directive("flowPackage",["$http",function(e){return{restrict:"E",templateUrl:"modules/flowPackage/flowPackage.html",link:function(t,o,a){t.packageTitle=a.title,t.packageSubTitle=a.subTitle,t.size=a.size,t.showTime=a.showTime,e.get(baseApiUri+"/getFlowPackages").success(function(e){t.flowPackageList=e,t.flowPackageItem=e[3]}),t.setFlowPackage=function(e,o){e.preventDefault();var a=$(e.currentTarget);a.parent().siblings().children().removeClass("curr"),a.addClass("curr"),t.flowPackageItem=o,writebdLog(t.category,"_SelectPackage","渠道号",t.gh)},t.$watch("flowPackageItem",function(e,t,o){e!=t&&(o.mifi?o.mainPrice=parseInt(o.mifi.price)+parseInt(o.flowPackageItem.p):o.mainPrice=e.p)})}}}]),app.directive("flowFqa",["$location",function(e){return{restrict:"E",templateUrl:"modules/flowFqa/flowFqa.html",link:function(e,t,o){}}}]),app.directive("gh",["$location",function(e){return{restrict:"E",templateUrl:"modules/gh/gh.html",link:function(t,o,a){void 0==e.search().gh?t.gh="":t.gh=e.search().gh}}}]),app.directive("goTop",["$cookieStore","$timeout",function(e,t){return{restrict:"E",replace:!0,templateUrl:"modules/goTop/goTop.html",link:function(e,t,o){var a=$(".content-scrollable");e.goTop=function(){a.animate({scrollTop:0})}}}}]),app.directive("a",["$location",function(e){return{restrict:"E",link:function(t,o,a){var r,n=e.search(),i=a.href,c=0;i&&($.each(n,function(e,t){0==c?(r="?"+e+"="+t,i.indexOf("?")!=-1&&(r="&"+e+"="+t)):r=r+"&"+e+"="+t,c++}),t.hash=r,"javascript:;"!=i&&void 0!=t.hash&&"false"!=a.hasHash&&o.attr("href",i+t.hash))}}}]),app.directive("nativeShare",["$cookieStore","$http","$location",function(e,t,o){return{restrict:"E",templateUrl:"modules/nativeShare/share.html",link:function(e,a,r){function n(){h.show(),d.show()}function i(){h.hide(),d.hide()}var c,s,p,l,u=navigator.appVersion;e.$root.share={homeLink:"http://app.yfq.cn/phone/active/A"+window.location.search,shareTitle:"我领到1888元购机年终奖！年前换个好手机，开开心心回家过大年！",shareDisc:"苹果、OPPO、华为、VIVO等大牌手机直降！用券购再立减！戳我抢→",picUrl:"http://app.yfq.cn/images/active/share_active.jpg"},c=e.$root.share.homeLink,p=e.$root.share.shareTitle,l=e.$root.share.shareDisc,s=e.$root.share.picUrl;var d=$("#nativeShare"),h=($("#nativeShareClose"),$("#showMask"));d.find(".show-img");$("#container").on("click","#nativeShareClose",function(){i()}),$("#container").on("click","#showMask",function(){i()}),$("#container").on("click",".copy-cancel",function(){$(".share-copy").hide()}),$("#container").on("click",".show-img",function(){var e,t,o=$(this).data("app");if("weixin"===o)e="分享到朋友圈",t="让更多的朋友来关注我们";else{if("weixinFriend"!==o){e=c,t="";var a='<div class="share-copy"><div class="share-link"><em>'+c+'</em></div><div class="copy-cancel">关闭</div></div>';return $(a).appendTo("#nativeShare"),!1}e="发送给朋友",t="来分享给好友吧"}$("#targetTxt").html(e),$("#targetTips").html(t),$(".weixinShareImg").show()});var m=u.toLowerCase(),g=o.absUrl().split("#")[0].replace(/&/gi,"AND");"micromessenger"==m.match(/MicroMessenger/i)&&t.jsonp(cfApi.apiHost+"/product/getWxParameter.html?shareUrl="+g+"&s=wap&callback=JSON_CALLBACK").success(function(e,t,o,a){wx.config({debug:!1,appId:e[0].appId,timestamp:e[0].timestamp,nonceStr:e[0].nonceStr,signature:e[0].signature,jsApiList:["checkJsApi","onMenuShareTimeline","onMenuShareAppMessage"]})}).error(function(e,t,o,a){console.log(t)}),e.$root.showShare=function(){n()},e.$watch("share",function(e,t,o){window._bd_share_config={common:{bdText:e.shareTitle,bdDesc:e.shareDisc,bdUrl:e.homeLink,bdPic:e.picUrl},share:[{bdSize:32}],selectShare:[{bdselectMiniList:["qzone","tqq","kaixin001","bdxc","tqf"]}]};var a={url:e.homeLink,title:e.shareTitle,desc:e.shareDisc,img:e.picUrl,img_title:e.shareTitle,from:"翼分期商城"};wx.ready(function(){wx.onMenuShareTimeline({title:o.$root.share.shareTitle,link:o.$root.share.homeLink,imgUrl:o.$root.share.picUrl,success:function(){},cancel:function(){}}),wx.onMenuShareAppMessage({title:o.$root.share.shareTitle,desc:o.$root.share.shareDisc,link:o.$root.share.homeLink,imgUrl:o.$root.share.picUrl,type:"",dataUrl:"",success:function(){},cancel:function(){}})});new nativeShare("nativeShare",a)},!0)}}}]),app.directive("historyScrollTop",["$cookieStore","$timeout",function(e,t){return{restrict:"A",link:function(o,a,r){
var n=$(".content-scrollable");n.on("scroll",function(){e.put("historyScrollTop",$(a).scrollTop())}),e.get("historyScrollTop")&&t(function(){n.animate({scrollTop:e.get("historyScrollTop")})},700)}}}]),app.directive("topNav",["$timeout","$document","$window",function(e,t,o){return{restrict:"E",replace:!0,templateUrl:"modules/nav/nav.html",link:function(e,t,a){e.navVisibility=a.navVisibility,"black"==e.navClass,a.navClass&&(e.navClass=a.navClass),e.pageTitle=a.pageTitle,e.$root.title=e.pageTitle,e.pageBack=a.pageBack,e.pageDone=a.pageDone,e.homeUrl=a.homeUrl,1==o.history.length&&(e.pageBack="home"),e.home=function(){o.location.href="http://"+o.location.host+e.homeUrl+o.location.search},e.back=function(){history.back()},e.done=function(){},e.getContact=function(){getMeiqia(),_MEIQIA("showPanel"),writebdLog(e.category,"_CustConsult","渠道号",e.gh)}}}}]),app.directive("mifi",["$http",function(e){return{restrict:"E",templateUrl:"modules/mifi/mifi.html",link:function(t,o,a){t.mifiTitle=a.title,t.mifiSubTitle=a.subTitle,e.get("/data/mifis.json").success(function(e){t.mifis=e}),t.$root.disabledSim=function(e,t){var o=$(".sim-type-lists").find(".item-box");t?o.eq(e).addClass("disabled"):o.eq(e).removeClass("disabled")},t.setMifi=function(e,o){e.preventDefault();var a=$(e.currentTarget);a.hasClass("curr")?(t.mifi=!1,t.$root.disabledSim(0,!1),t.mainPrice=t.flowPackageItem.p,a.removeClass("curr"),writebdLog(t.category,"_CancelMifi","渠道号",t.gh)):(t.mifi=o,t.mainPrice=parseInt(o.price)+parseInt(t.flowPackageItem.p),a.addClass("curr"),t.$root.setSimType(e,1,t.simList[1]),t.$root.disabledSim(0,!0),writebdLog(t.category,"_SelectMifi","渠道号",t.gh))}}}}]),app.directive("inputQuery",function(){return{restrict:"E",templateUrl:"modules/inputQuery/inputQuery.html",controller:"inputQueryController",link:function(e,t,o){e.setNumber=function(t,o){t.preventDefault();var a=$(t.currentTarget);a.parent().siblings().children().removeClass("curr"),a.addClass("curr"),e.numberItem=o},e.$watch("phoneData",function(e,t,o){},!0)}}}).controller("inputQueryController",["$scope","$cookieStore","$http",function($scope,$cookieStore,$http){$scope.phoneData=new Array,$http.jsonp(cfApi.apiHost+"/wap/taokafanghaoNew/fetchNumber.html?callback=JSON_CALLBACK").success(function(data,status,headers,config){$.each(eval(data),function(e,t){t.t&&$scope.phoneData.push(t)})}).error(function(e,t,o,a){console.log(t)})}]),app.directive("overlay",["$http","$compile","$timeout",function(e,t,o){return{restrict:"E",templateUrl:"modules/overlay/overlay.html",link:function(e,o,a){var r=$("#overlay-hook"),n=$("#container");e.$root.Overlay={open:function(e){r.html(e),n.addClass("overlay-open")},openCompile:function(o){t(r.html(o))(e),n.addClass("overlay-open")},close:function(){n.removeClass("overlay-open"),r.html("")}},$(document).on("click",".js-close-overlay",function(){e.$root.Overlay.close()})}}}]),app.directive("onFinish",["$timeout",function(e){return{restrict:"A",link:function(t,o,a){t.$last===!0&&e(function(){t.$emit("ngRepeatFinished")})}}}]),app.directive("passport",function(){return{restrict:"E",replace:!0,templateUrl:"modules/passport/passport.html",controller:"passportController",link:function(e,t){}}}).controller("passportController",["$scope","$cookieStore",function(e,t){e.$watch("passport",function(e,o){e!==o&&t.put("passport",e)},!0)}]),app.directive("owlCarousel",["$http","$compile",function(e,t){return{restrict:"C",templateUrl:"modules/owlCarousel/owlCarousel.html",scope:{imgUrls:"="},link:function(e,t,o){}}}]).directive("carouselItem",["$http","$compile",function(e,t){return{restrict:"C",link:function(e,t,o){e.$last&&$(t).parent().owlCarousel({navigation:!0,slideSpeed:300,paginationSpeed:400,singleItem:!0,autoPlay:3e3})}}}]),app.directive("phoneStorages",["$http","Phone",function(e,t){return{restrict:"E",templateUrl:"modules/phoneStorages/phoneStorages.html",link:function(e,t,o){e.storageTitle=o.title,e.storageSubTitle=o.subTitle,e.setPhoneStorage=function(t,o){t.preventDefault();var a=$(t.currentTarget);return!a.hasClass("disabled")&&(a.parent().siblings().children().removeClass("curr"),a.addClass("curr"),e.productId=o.productId,writebdLog(e.category,"_FuselageMemory","渠道号",e.gh),void 0)}}}}]),app.directive("phoneColors",["$http","$q","$timeout",function(e,t,o){return{restrict:"E",templateUrl:"modules/phoneColors/phoneColors.html",link:function(t,o,a){t.colorTitle=a.title,t.colorSubTitle=a.subTitle,t.phone.$promise.then(function(o){e.get("/data/phones/colors/"+t.phone.phoneModel+".json").success(function(e){t.colors=e,t.color=e[getIndex(e,"selected","curr")]})}),t.setPhoneColor=function(e,o){e.preventDefault();var a=$(e.currentTarget);return!a.hasClass("disabled")&&(a.parent().siblings().children().removeClass("curr"),a.addClass("curr"),t.color=o,writebdLog(t.category,"_FuselageColor","渠道号",t.gh),void 0)},t.dialogShow=function(e,o){t.$root.dialog.open(e,o)},t.$watch("productId",function(e,t,o){if(e!=t&&o.colors)if(256==e||257==e){if(o.colors[0].selected="disabled",$("#color0").removeClass("curr"),"亮黑色"==o.color.colorName){var a=getIndex(o.colors,"colorName","黑色");o.color=o.colors[a],$("#color"+a).addClass("curr"),o.dialogShow("","'亮黑色'暂时没货，帮您换成了黑色，或者您可以重新选择")}}else o.colors[0].selected=""})}}}]),app.directive("payType",["$location","$compile","$q",function(e,t,o){return{restrict:"E",templateUrl:"modules/payType/payType.html",link:function(t,o,a){t.payTypeTitle=a.title,t.payTypeSubTitle=a.subTitle,t["class"]=a.addClass,t.visibility=a.visibility,"false"===t.visibility&&$(o).addClass("hide");var r=$(a.submit);t.setDefaultPayType=function(e){t.payType=e};var n=e.search().payType;n&&(t.payType=n),t.setPayType=function(e,o){e.preventDefault();var a=$(e.currentTarget);if(a.hasClass("disabled"))return!1;if(t.checkAddress())t.$root.checkActiveCode()&&($("#payType").val(o),2==o?t.showOverLay("payTipsPanel"):(t.$root.toast.open(),t.$root.toast.open(),t.$root.submitForm()));else{var r=$("#receiverAddress");$container.animate({scrollTop:r.offset().top-$container.offset().top+$container.scrollTop()})}},t.showOverLay=function(e){var o=$("#"+e).html();t.$root.Overlay.openCompile(o),writebdLog(t.category,"_IsContractPackage","渠道号",t.gh)},t.showHuOverLay=function(e){var o=$("#"+e).html();t.$root.Overlay.openCompile(o),writebdLog(t.category,"_IsContractPackage","渠道号",t.gh)},t.$root.tipsSubmit=function(){t.$root.checkActiveCode()?(t.$root.toast.open(),t.$root.submitForm()):t.$root.Overlay.close()},t.$root.submitForm=function(){var e,o=$("#payType").val();0==o&&(e="_payAll"),2==o&&(e="_payMonthly"),1==o&&(e="_payCOD"),writebdLog(t.category,e,"渠道号",t.gh),r.submit()}}}}]),app.directive("phonePackage",["$http","$stateParams","$q",function(e,t,o){return{restrict:"E",templateUrl:"modules/phonePackage/phonePackage.html",link:function(e,t,o){e.packageTitle=o.title,e.packageSubTitle=o.subTitle,e.packageType=o.type,e["class"]=o.addClass,e.visibility=o.visibility,"false"===e.visibility&&$(t).addClass("hide"),e.showTime=o.showTime,e.setPhonePackage=function(t,o){t.preventDefault();var a=$(t.currentTarget);return!a.hasClass("curr")&&(a.parent().siblings().children().removeClass("curr"),a.addClass("curr"),e.pkg=o,void writebdLog(e.category,"_SelectPackage","渠道号",e.gh))},e.showOverLay=function(t){var o=$("#"+t).html();e.$root.Overlay.open(o),writebdLog(e.category,"_IsContractPackage","渠道号",e.gh)}}}}]),app.directive("phoneTypes",["$http","Phone",function(e,t){return{restrict:"E",templateUrl:"modules/phoneTypes/phoneTypes.html",link:function(e,t,o){e.phoneTypeTitle=o.title,e.phoneTypeSubTitle=o.subTitle,e.showDetails=o.phoneDetails,e.setPhoneType=function(t,o){t.preventDefault();var a=$(t.currentTarget);return!a.hasClass("disabled")&&(a.parent().siblings().children().removeClass("curr"),a.addClass("curr"),e.productId=o.productId,writebdLog(e.category,"_SelectVersion","渠道号",e.gh),void 0)},e.showOverLay=function(t){var o=$("#"+t).html();e.$root.Overlay.open(o),writebdLog(e.category,"_IsPhone","渠道号",e.gh)}}}}]),app.directive("productHeader",["$http",function(e){return{restrict:"E",templateUrl:"modules/productHeader/productHeader.html",link:function(e,t,o){}}}]),app.directive("productDetails",["$http",function(e){return{restrict:"E",templateUrl:"modules/productDetails/productDetails.html",link:function(e,t,o){}}}]),app.directive("receiverAddress",["$compile","$cookieStore","$http","$interval",function($compile,$cookieStore,$http,$interval){return{restrict:"E",templateUrl:"modules/receiverAddress/receiverAddress.html",link:function(scope,element,attrs){scope.receiverTitle=attrs.title,$compile($("#address-panel").clone().appendTo(".page"))(scope),$compile($(".address-overlay").clone().appendTo(".page"))(scope),$(".address #address-panel").remove(),$(".address .address-overlay").remove();var value1,value2,value3,value4,$inputsStoreSelect=$(element).find("#inputsStoreSelect"),$storeSelector=$("#container"),$storeClose=$storeSelector.find(".close"),$objTabItem=$("#cfStock .tab").find("li"),$dataAreas=$("#cfStock").find(".mc"),$areaList=$dataAreas.find(".area-list");$cookieStore.get("receiver")?scope.receiver=$cookieStore.get("receiver"):scope.receiver={name:"",mobile:"",city:"",room:""},$cookieStore.get("activeCode")?scope.activeCode=$cookieStore.get("activeCode"):scope.activeCode="";var stockHide=function(){$storeSelector.removeClass("hover"),$storeClose.hide()},stockShow=function(){$storeSelector.addClass("hover"),$storeClose.show()},tabShow=function(e){$objTabItem.removeClass("curr"),$objTabItem.eq(e).addClass("curr")},dataAreaShow=function(e){$dataAreas.hide(),$dataAreas.eq(e).show()};scope.inputHomeCode=function(){writebdLog(scope.category,"_InputHomeCode","渠道号",scope.gh)},scope.inputAddress=function(e){void 0==e||""==e||e.length<=3||writebdLog(scope.category,"_Address","渠道号",scope.gh)},scope.paracont="获取验证码",scope.paraclass="but_null";var second=59,timePromise=void 0;scope.getActiveCode=function(e){$http.get("http://app.yfq.cn:3099/api/getActiveCode/"+e).success(function(e){""==e&&(timePromise=$interval(function(){second<=0?($interval.cancel(timePromise),timePromise=void 0,second=59,scope.paracont="重发验证码",scope.paraclass="but_null"):(scope.paracont=second+"秒后可重发",scope.paraclass="not but_null",second--)},1e3,100))}),writebdLog(scope.category,"_VariHomeCode","渠道号",scope.gh)},scope.$root.checkActiveCode=function(){return scope.checkoutForm.activeCode.$valid?checkMobileCode(scope.receiver.mobile,scope.activeCode)?($cookieStore.put("activeCode",scope.activeCode),!0):($(".input-vcode").removeClass("weui-cell_success"),$(".input-vcode").addClass("weui-cell_warn"),!1):($(".input-vcode").addClass("weui-cell_warn"),!1)};var getArea=function(id,index,province,city,district){var url,thisHtml;url=0===index?cfApi.apiHost+"/wap/comm/czCommonController/getRegion.html?need=province&key="+new Date:1===index?cfApi.apiHost+"/wap/comm/czCommonController/getRegion.html?need=city&province="+encodeURI(province)+"&key="+new Date:2===index?cfApi.apiHost+"/wap/comm/czCommonController/getRegion.html?need=district&province="+encodeURI(province)+"&city="+encodeURI(city)+"&key="+new Date:cfApi.apiHost+"/wap/comm/czCommonController/getRegion.html?need=street&province="+encodeURI(province)+"&city="+encodeURI(city)+"&district="+encodeURI(district)+"&key="+new Date,$areaList.eq(index).html(""),$.ajax({dataType:"jsonp",type:"get",contentType:"application/json; charset=utf-8",url:url,jsonp:"callback",jsonpCallback:"getAreaList",success:function(json){$.each(eval(json),function(e,t){t.name.length>6?$areaList.eq(index).append("<li data-value="+t.name+" class='long-area'><a data-value="+t.name+">"+t.name+"</a></li>"):$areaList.eq(index).append("<li data-value="+t.name+"><a data-value="+t.name+">"+t.name+"</a></li>")})},error:function(e){alert("获取地址信息失败，请联系客服")}})};$inputsStoreSelect.click(function(){getArea(0,0,"","",""),stockShow(),dataAreaShow(0),tabShow(0)}),$objTabItem.click(function(e){var t=$(this).index();return 0===t?stockHide():(tabShow(t-1),dataAreaShow(t-1)),!1}),$areaList.on("click","li",function(e){var t,o,a=$(this);return o=a.parentsUntil("#cfStock",".mc").data("area"),t=a.find("a").data("value"),0===o?(dataAreaShow(1),tabShow(1),value1=a.data("value"),getArea(t,1,value1,"","")):1===o?(dataAreaShow(2),tabShow(2),value2=a.data("value"),getArea(t,2,value1,value2,"")):2===o?(value3=a.data("value"),stockHide(),$("#store-text").find("div").html(value1+value2+value3),scope.receiver.city=value1+value2+value3):3===o&&(value4=a.data("value"),stockHide(),$("#store-text").find("div").html(value1+value2+value3+value4),scope.receiver.city=value1+value2+value3+value4),scope.$apply(),!1}),scope.checkAddress=function(){return $("#receiverAddress").find(".weui_cell").removeClass("weui-cell_warn"),scope.checkoutForm.reciverName.$valid?scope.checkoutForm.receiverMobile.$valid?scope.checkoutForm.receiverCity.$valid?scope.checkoutForm.receiverRoom.$valid?($cookieStore.put("receiver",scope.receiver),!0):($(".input-room").addClass("weui-cell_warn"),!1):($(".input-city").addClass("weui-cell_warn"),!1):($(".input-mobile").addClass("weui-cell_warn"),!1):($(".input-name").addClass("weui-cell_warn"),!1)}}}}]),app.directive("simType",["$http","$compile",function(e,t){return{restrict:"E",templateUrl:"modules/simType/simType.html",link:function(t,o,a){t.simTitle=a.title,t["class"]=a.addClass,t.cardName="未选择";var r=$(".content-scrollable");t.cardGroup=["小卡(Nano卡)","大/中卡(二合一)"],t.size=a.size,e.get("/data/simType.json").success(function(e){t.simList=e}),t.checkSimType=function(){if(!t.checkoutForm.mainCardTypeId.$valid){var e=$(".card-type-list");return r.animate({scrollTop:e.offset().top-r.offset().top+r.scrollTop()-50}),$(".card-type-list").slideDown(),!1}return!0},t.showCardList=function(){$(".card-type-list").is(":hidden")?writebdLog(t.category,"_ShowCardTypeBar","渠道号",t.gh):writebdLog(t.category,"_StopCardTypeBar","渠道号",t.gh),"true"!=a.noAnimate&&($(".card-type-list").slideToggle(),$(event.currentTarget).toggleClass("down"))},t.$root.setSimType=function(e,o,a){e.preventDefault();var r=$(".sim-type-lists").find(".item-box");return!r.hasClass("disabled")&&(r.removeClass("curr"),r.eq(o).addClass("curr"),t.simItem=a,t.$root.Overlay.close(),void writebdLog(t.category,"_SelectCardType"+o,"渠道号",t.gh))},t.$root.setNewSimType=function(e,o){var r=$(e.currentTarget);r.addClass("on-curr"),r.siblings().removeClass("on-curr");$(".card-type-list").find(".list");t.simItem=t.simList[o],"true"!=a.noAnimate&&$(".card-type-list").slideUp(),t.cardName=t.cardGroup[o],writebdLog(t.category,"_SelectCardType"+o,"渠道号",t.gh)},t.showOverLay=function(e){var o=$("#"+e).html();t.$root.Overlay.open(o,t.simList),writebdLog(t.category,"_CardTypeIntro","渠道号",t.gh)}}}}]),app.directive("referrerNo",["$location",function(e){return{restrict:"E",templateUrl:"modules/referrerNo/referrerNo.html",link:function(t,o,a){t.referrerNo=e.search().referrerNo}}}]),app.directive("redirectUrl",["$location",function(e){return{restrict:"E",templateUrl:"modules/redirectUrl/redirectUrl.html",link:function(t,o,a){var r,n=e.search(),i="http://"+e.host()+e.path(),c=0,s=new Array;$.each(n,function(e,t){Array.isArray(t)?s.push(e+"="+t[0]):s.push(e+"="+t)}),$.each(s,function(e,t){0==c?(r="?"+t,i.indexOf("?")!=-1&&(r="&"+t)):r=r+"&"+t,c++}),t.redirectUrl=i+r}}}]),app.directive("spcPhone",["$http","$compile",function(e,t){return{restrict:"E",templateUrl:"modules/spcPhone/spcPhone.html",link:function(e,t,o){var a=$(".content-scrollable");e.filterPhoneName="iPhone7",e.filterPhone=function(t,o){e.filterPhoneName=t,writebdLog(e.category,"_"+o,"渠道号",e.gh)},e.$root.checkMachineName=function(){if(!e.checkoutForm.machineName.$valid){var t=$(".order-content");return a.animate({scrollTop:t.offset().top-a.offset().top+a.scrollTop()-50}),!1}return!0},e.setMachine=function(t,o){e.$root.machineName=t,writebdLog(e.category,"_"+o,"渠道号",e.gh)}}}}]),app.directive("spcPhoneD",["$http","$compile",function(e,t){return{restrict:"E",templateUrl:"modules/spcPhoneD/spcPhone.html",link:function(e,t,o){function a(e){return"华为"==e&&(e="huawei"),"小米"==e&&(e="mi"),"美图"==e&&(e="meitu"),e}var r=$(".content-scrollable");e.spcNavOpen=!1,e.filterPhoneName="",e.filterPhone=function(t,o){e.filterPhoneName=t,writebdLog(e.category,"_"+o,"渠道号",e.gh)},e.setMainPhoneBrand=function(t,o,r){e.brandIndex=o,e.brand=r,e.spcNavOpen=!1,writebdLog(e.category,"_"+a(r.brandName),"渠道号",e.gh)},e.$root.checkMachineName=function(){if(!e.checkoutForm.machineName.$valid){var t=$(".order-content");return r.animate({scrollTop:t.offset().top-r.offset().top+r.scrollTop()-50}),!1}return!0},e.setMachine=function(t,o){e.$root.machineName=t,writebdLog(e.category,"_"+o,"渠道号",e.gh)}}}}]),app.directive("spcPhoneB",["$http","$compile",function(e,t){return{restrict:"E",templateUrl:"modules/spcPhoneB/spcPhone.html",link:function(e,t,o){var a=$(".content-scrollable");e.filterPhoneName="",e.filterPhone=function(t,o){e.filterPhoneName=t,writebdLog(e.category,"_"+o,"渠道号",e.gh)},e.$root.checkMachineName=function(){if(!e.checkoutForm.machineName.$valid){var t=$(".order-content");return a.animate({scrollTop:t.offset().top-a.offset().top+a.scrollTop()-50}),!1}return!0},e.setMachine=function(t,o){e.$root.machineName=t,writebdLog(e.category,"_"+o,"渠道号",e.gh)}}}}]),app.directive("star",[function(){return{restrict:"E",replace:!0,scope:{ratting:"="},templateUrl:"modules/star/star.html",link:function(e,t,o){e.$watch("ratting",function(e,o,a){for(var r=(parseInt(a.ratting[0])+parseInt(a.ratting[1])+parseInt(a.ratting[2]))/3,n=$(t).find(".stars-content").find("i"),i=0;i<5;i++)i<r&&n.eq(i).addClass("on")})}}}]),app.directive("spcPhoneLjA",["$http","$compile","$cookieStore",function(e,t,o){return{restrict:"E",templateUrl:"modules/spcPhoneLjA/spcPhone.html",link:function(e,t,a){function r(e){return"华为"==e&&(e="huawei"),"小米"==e&&(e="mi"),"美图"==e&&(e="meitu"),"全部"==e&&(e="all"),"热门机型"==e&&(e="hot"),"其它机型"==e&&(e="other"),e}var n=$(".content-scrollable");e.spcNavOpen=!1,e.filterPhoneName="",e.filterPhone=function(t,o){e.filterPhoneName=t,writebdLog(e.category,"_"+o,"渠道号",e.gh)},e.setMainPhoneBrand=function(t,a,n){e.brandIndex=a,e.brand=n,e.spcNavOpen=!1,o.put("brand",n),writebdLog(e.category,"_ClickBrand"+r(n.brandName),"渠道号",e.gh)},e.$root.checkMachineName=function(){if(!e.checkoutForm.machineName.$valid){var t=$(".order-content");return n.animate({scrollTop:t.offset().top-n.offset().top+n.scrollTop()-50}),!1}return!0}}}}]),app.directive("tempCart",["$timeout",function(e){return{restrict:"E",templateUrl:"modules/tempCart/tempCart.html",link:function(e,t,o){}}}]),app.directive("stepBuy",function(){return{restrict:"E",replace:!0,templateUrl:"modules/stepBuy/stepBuy.html",link:function(e,t,o){var a=$(".content-scrollable"),r=$("#stepBuy"),n=r.find(".progressbar-text");t.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){t.removeClass("bounceIn animated")}),function(){a.bind("scrollstart",function(){t.addClass("active")}),a.bind("scrollstop",function(e){t.removeClass("active")}),r.mouseover(function(){t.addClass("active")}),r.mouseout(function(){t.removeClass("active")})}(),e.stepClick=function(e){var t;"查看<br>详情"==n.html()?(n.html("立即<br>购买"),t=$("#imgStart")):(n.html("查看<br>详情"),t=$("#phoneTypes")),a.animate({scrollTop:t.offset().top-a.offset().top+a.scrollTop()})}}}}),app.directive("stars",function(){return{restrict:"E",replace:!0,scope:{},templateUrl:"modules/stars/stars.html",link:function(e,t,o){var a=$(".stars-content").find("i");e.sold=Math.round(999*Math.random()),e.score=(Math.random()+4).toFixed(1);for(var r=0;r<4;r++)r<e.score&&a.eq(r).addClass("on")}}}),app.directive("dropzone",function(){return{restrict:"C",link:function(e,t,o){var a={url:"http://www.cz.com:8082/uploadFile.html?decorator=blank",maxFilesize:100,paramName:"uploadfile",maxThumbnailFilesize:10,parallelUploads:1,thumbnailWidth:300,thumbnailHeight:200,autoProcessQueue:!0},r={addedfile:function(t){e.file=t,null!=this.files[1]&&this.removeFile(this.files[0]),e.$apply(function(){e.fileAdded=!0})},success:function(e,t){console.log(t);var a=$("#"+o.id+"-input");a.val(t)}},n=new Dropzone(t[0],a);angular.forEach(r,function(e,t){n.on(t,e)}),e.processDropzone=function(){n.processQueue()},e.resetDropzone=function(){n.removeAllFiles()}}}}),app.directive("spcTitle",function(){return{restrict:"E",replace:!0,scope:{},templateUrl:"modules/spcTitle/spcTitle.html",link:function(e,t,o){e.mainTitle=o.mainTitle,e.subTitle=o.subTitle,e.arrow=o.arrow}}}),app.directive("timer",["$interval",function(e){return{restrict:"E",replace:!0,templateUrl:"modules/timer/timer.html",link:function(t,o,a){function r(){var e=new Date,o=e.getFullYear()+"/"+(e.getMonth()+1)+"/"+e.getDate()+" 23:59:00",a=new Date(o),r=new Date,n=a.getTime()-r.getTime(),e=Math.floor(n/1e3/60/60/24),i=Math.floor(n/1e3/60/60%24);i<10&&(i="0"+i);var c=Math.floor(n/1e3/60%60);c<10&&(c="0"+c);var s=Math.floor(n/1e3%60);s<10&&(s="0"+s),t.timer="<i>"+i+"</i><sub>时</sub><i>"+c+"</i><sub>分</sub><i>"+s+"</i><sub>秒</sub>"}e(r,1e3)}}}]),app.config(["$stateProvider","$locationProvider",function(e,t){e.state("phoneCardIndex",{url:"/pcd/:pageType/index",templateUrl:function(e){return"pages/phoneCard/index/"+e.pageType+"/index.html"},controller:"phoneCardIndexController"})}]).controller("phoneCardIndexController",["$scope","$rootScope","$location","$http","$stateParams","$timeout","$interval",function(e,t,o,a,r,n,i){var c=$(".content-scrollable");e.pageType=r.pageType,e.activeTag="mysytcb",e.appType=systemName+"_"+e.pageType+"_0ylk",e.category=e.appType,e.second=5,writebdLog(e.category,"_Load","渠道号",e.gh),e.setPkg=function(t,o){e.pkgId=o;var a=$(".go-here");c.animate({scrollTop:a.offset().top-c.offset().top+c.scrollTop()}),writebdLog(e.category,"_SelectPackage"+o,"渠道号",e.gh)},e.userTrack=function(t){writebdLog(e.category,t,"渠道号",e.gh)},e.checkMainPkg=function(){if(!e.checkoutForm.productId.$valid){var t=$("#pickMainPkg");return c.animate({scrollTop:t.offset().top-c.offset().top+c.scrollTop()-50}),!1}return!0},e.submitForm=function(){return e.toast.open(),e.checkMainPkg()&&e.checkSimType()&&e.checkMainNumber()&&e.checkAddress()&&e.checkActiveCode()?(e.submitUrl=cfApi.apiHost+"/wap/taokafanghaoNew/submitOrderCommon.html?mainNumber="+e.mainNumber+"&activeTag="+e.activeTag+"&category="+e.category+"&gh="+e.gh+"&activity="+e.activity+"&productId="+e.pkgId+"&reciverName="+encodeURI(encodeURI(e.receiver.name))+"&receiverMobile="+e.receiver.mobile+"&receiverCity="+encodeURI(encodeURI(e.receiver.city))+"&receiverRoom="+encodeURI(encodeURI(e.receiver.room))+"&mainCardTypeId="+e.simItem.id+"&payType=1&category="+e.category+"&callback=JSON_CALLBACK",a.jsonp(e.submitUrl).success(function(t,o,a,r){if(e.toast.close(),"0"==t[0].resultCode){e.orderNo=t[0].resultMsg;n(function(){var t=$("#wxQrCode").html();e.Overlay.open(t)},100);i(function(){return e.second--,e.second<0?(window.location.href="http://m.yfq.cn/wap/taokafanghaoNew/uploadCardA.html?orderNo="+e.orderNo+"&category="+e.category+"&s=wap",!1):void $("#time-new").html(e.second)},1e3)}else e.dialog.open("系统提示",t[0].resultMsg)}).error(function(e,t,o,a){console.log(t)}),void writebdLog(e.category,"_BuyNow","渠道号",e.gh)):(e.toast.close(),!1)},$(".fqa-more").click(function(){$(".fqa-lists").toggleClass("close"),$(this).toggleClass("close")}),androidInputBugFix()}]),app.directive("txtList",["$http",function(e){return{restrict:"E",replace:!0,scope:{},templateUrl:"modules/txtList/txtList.html",link:function(t,o,a){e.get(a.apiUrl).success(function(e){t.txtData=e})}}}]);