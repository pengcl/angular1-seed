"use strict";function getNumArr(e,t){var o=findJsonData(e,t),r=getPosNum(e,o);return r}function findJsonData(e,t){if(null==e)return t;for(var o=[],r=t.length,n=0,i=0;i<r;i++){var s=t[i].n;s.indexOf(e)!=-1&&(o[n]=s,n+=1)}return o}function getPosNum(e,t){if(null==e||null==t)return null;for(var o=e.length,r=new Array,n=t.length,i=0;i<n;i++){var s=t[i],a=s.substring(o,o+1);null!=r&&r.indexOf(a)==-1&&r.push(a)}return r}function isScroller(e){return e.classList.contains("content-scrollable")}function getIndex(e,t,o){for(var r=0;r<e.length;r++)if(e[r][t]==o)return r}function Map(){var e=function(e,t){this.key=e,this.value=t},t=function(t,o){for(var r=0;r<this.arr.length;r++)if(this.arr[r].key===t)return void(this.arr[r].value=o);this.arr[this.arr.length]=new e(t,o)},o=function(e){for(var t=0;t<this.arr.length;t++)if(this.arr[t].key===e)return this.arr[t].value;return null},r=function(e){for(var t,o=0;o<this.arr.length;o++)t=this.arr.pop(),t.key!==e&&this.arr.unshift(t)},n=function(){return this.arr.length},i=function(){return this.arr.length<=0};this.arr=new Array,this.get=o,this.put=t,this.remove=r,this.size=n,this.isEmpty=i}function operation(){var e="",t="",o="",r=null,n=window.location.href;this.init=function(r,n,i){e=r,t=n,o=i},this.record=function(e){return null!=e&&(r=new Map,r.put("operation",e),void this.writeOperation())},this.writeOperation=function(){var e=!1,t="flow="+n+"&operation="+r.get("operation"),o="http://m.gd189fq.com/record/writeLog.html?"+t+"&s=wap";return $.ajax({type:"get",url:o,dataType:"jsonp",jsonp:"callback",jsonpCallback:"callback",success:function(e){},error:function(){}}),e},this.writeIntentionMsg=function(e,t,o,r){var n="http://m.gd189fq.com/record/intentionLog.html";$.get(n,{operationName:e,operationValue:t,dataType:o,opSeq:r},function(e){})}}function writebdLog(e,t,o,r){_hmt.push(["_trackEvent",e,e+t,o,r]),op.record(encodeURI(e+t))}function androidInputBugFix(){/Android/gi.test(navigator.userAgent)&&window.addEventListener("resize",function(){"INPUT"!=document.activeElement.tagName&&"TEXTAREA"!=document.activeElement.tagName||window.setTimeout(function(){document.activeElement.scrollIntoViewIfNeeded()},0)})}function getMeiqia(){!function(e,t,o,r,n,i,s){e[n]=e[n]||function(){(e[n].a=e[n].a||[]).push(arguments)},i=t.createElement(o),s=t.getElementsByTagName(o)[0],i.async=!0,i.charset="UTF-8",i.src=r+"?v="+(new Date).getUTCDate(),s.parentNode.insertBefore(i,s)}(window,document,"script","//static.meiqia.com/dist/meiqia.js","_MEIQIA"),_MEIQIA("entId",27864),_MEIQIA("withoutBtn")}function showToast(){var e=$("#loadingToast");"none"==e.css("display")&&e.fadeIn(100)}function hideToast(){var e=$("#loadingToast");e.fadeOut(100)}function checkMobileCode(e){var t=!1;return $.ajax({url:"http://app.yfq.cn:3099/api/checkActiveCode/"+e,async:!1,type:"get",success:function(e){"true"==e&&(t=!0)}}),t}var app=angular.module("app",["ui.router","appServices","appTemplates","ngAnimate","ngCookies","appFilters"]),baseApiUri="http://app.gd189fq.com:3099/api";app.config(["$stateProvider","$urlRouterProvider","$locationProvider",function(e,t,o){o.html5Mode(!0).hashPrefix("!"),t.otherwise("/phones/256")}]).run(["$rootScope",function(e){}]);var systemName="yfqapp",userTrack=function(e,t,o,r){},$container=$("#container");$container.on("click",".js-menu",function(e){$("#container").addClass("menu-open"),$("#menu").click(function(){$("#container").removeClass("menu-open")})}),$(".content-overlay").click(function(e){$("#container").removeClass("menu-open")}),$(document).ready(function(){$("html").css("font-size",$container.width()/375*parseInt($("html").css("font-size")))}),document.body.addEventListener("touchmove",function(e){var t=e.target;isScroller(t)&&e.stopPropagation()},!1);var op=new operation;!function(){var e=jQuery.event.special,t="D"+ +new Date,o="D"+(+new Date+1);e.scrollstart={setup:function(){var o,r=function(t){var r=this,n=arguments;o?clearTimeout(o):(t.type="scrollstart",jQuery.event.dispatch.apply(r,n)),o=setTimeout(function(){o=null},e.scrollstop.latency)};jQuery(this).bind("scroll",r).data(t,r)},teardown:function(){jQuery(this).unbind("scroll",jQuery(this).data(t))}},e.scrollstop={latency:300,setup:function(){var t,r=function(o){var r=this,n=arguments;t&&clearTimeout(t),t=setTimeout(function(){t=null,o.type="scrollstop",jQuery.event.dispatch.apply(r,n)},e.scrollstop.latency)};jQuery(this).bind("scroll",r).data(o,r)},teardown:function(){jQuery(this).unbind("scroll",jQuery(this).data(o))}}}();var appFilters=angular.module("appFilters",[]);appFilters.filter("trustHtml",["$sce",function(e){return function(t){return e.trustAsHtml(t)}}]),appFilters.filter("MB",function(){return function(e){var t=1024;Math.floor(Math.log(e)/Math.log(t));return e/t}}),appFilters.filter("GB",function(){return function(e){var t=1024,o=1024;return e/t/o}}),appFilters.filter("replaceS",function(){return function(e,t){if(void 0!=t||null!=t||""!=t)return e.replace(new RegExp(t,"g"),"<em>"+t+"</em>")}}),appFilters.filter("replaceInput",function(){return function(e,t){return void 0!=t&&""!=t?e.replace(new RegExp(t,"g"),"<em>"+t+"</em>"):e}}),appFilters.filter("onlyNumber",function(){return function(e){return e.replace(new RegExp(key,"g"),"<em>"+key+"</em>")}}),appFilters.filter("formatMoney",function(){return function(e,t){if(void 0!=e)return e.slice(0,t)+"<sub style='font-size:75%'>"+e.substr(t)+"</sub>"}}),appFilters.filter("formatPhone",function(){return function(e){var t=e.slice(0,-4)+" "+e.substr(-4);return t.slice(0,3)+" "+t.substr(3)}});var appServices=angular.module("appServices",["ngResource"]);appServices.factory("FlowPackages",["$resource",function(e){return e("http://app.gd189fq.com:3099/api/getFlowPackages/:cardType",null,{query:{method:"GET",params:{cardType:"0"},isArray:!0}})}]),appServices.factory("Phone",["$resource","$q",function(e,t){return e("/data/phones/:phoneId.json",{},{query:{method:"GET",params:{phoneId:"phones"},isArray:!0}})}]),function(){var e,t,o,r,n,i,s,a,l=[].slice,c={}.hasOwnProperty,p=function(e,t){function o(){this.constructor=e}for(var r in t)c.call(t,r)&&(e[r]=t[r]);return o.prototype=t.prototype,e.prototype=new o,e.__super__=t.prototype,e};s=function(){},t=function(){function e(){}return e.prototype.addEventListener=e.prototype.on,e.prototype.on=function(e,t){return this._callbacks=this._callbacks||{},this._callbacks[e]||(this._callbacks[e]=[]),this._callbacks[e].push(t),this},e.prototype.emit=function(){var e,t,o,r,n,i;if(r=arguments[0],e=2<=arguments.length?l.call(arguments,1):[],this._callbacks=this._callbacks||{},o=this._callbacks[r])for(n=0,i=o.length;i>n;n++)t=o[n],t.apply(this,e);return this},e.prototype.removeListener=e.prototype.off,e.prototype.removeAllListeners=e.prototype.off,e.prototype.removeEventListener=e.prototype.off,e.prototype.off=function(e,t){var o,r,n,i,s;if(!this._callbacks||0===arguments.length)return this._callbacks={},this;if(r=this._callbacks[e],!r)return this;if(1===arguments.length)return delete this._callbacks[e],this;for(n=i=0,s=r.length;s>i;n=++i)if(o=r[n],o===t){r.splice(n,1);break}return this},e}(),e=function(e){function o(e,t){var n,i,s;if(this.element=e,this.version=o.version,this.defaultOptions.previewTemplate=this.defaultOptions.previewTemplate.replace(/\n*/g,""),this.clickableElements=[],this.listeners=[],this.files=[],"string"==typeof this.element&&(this.element=document.querySelector(this.element)),!this.element||null==this.element.nodeType)throw new Error("Invalid dropzone element.");if(this.element.dropzone)throw new Error("Dropzone already attached.");if(o.instances.push(this),this.element.dropzone=this,n=null!=(s=o.optionsForElement(this.element))?s:{},this.options=r({},this.defaultOptions,n,null!=t?t:{}),this.options.forceFallback||!o.isBrowserSupported())return this.options.fallback.call(this);if(null==this.options.url&&(this.options.url=this.element.getAttribute("action")),!this.options.url)throw new Error("No URL provided.");if(this.options.acceptedFiles&&this.options.acceptedMimeTypes)throw new Error("You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.");this.options.acceptedMimeTypes&&(this.options.acceptedFiles=this.options.acceptedMimeTypes,delete this.options.acceptedMimeTypes),this.options.method=this.options.method.toUpperCase(),(i=this.getExistingFallback())&&i.parentNode&&i.parentNode.removeChild(i),this.options.previewsContainer!==!1&&(this.previewsContainer=this.options.previewsContainer?o.getElement(this.options.previewsContainer,"previewsContainer"):this.element),this.options.clickable&&(this.clickableElements=this.options.clickable===!0?[this.element]:o.getElements(this.options.clickable,"clickable")),this.init()}var r,n;return p(o,e),o.prototype.Emitter=t,o.prototype.events=["drop","dragstart","dragend","dragenter","dragover","dragleave","addedfile","addedfiles","removedfile","thumbnail","error","errormultiple","processing","processingmultiple","uploadprogress","totaluploadprogress","sending","sendingmultiple","success","successmultiple","canceled","canceledmultiple","complete","completemultiple","reset","maxfilesexceeded","maxfilesreached","queuecomplete"],o.prototype.defaultOptions={url:null,method:"post",withCredentials:!1,parallelUploads:2,uploadMultiple:!1,maxFilesize:256,paramName:"file",createImageThumbnails:!0,maxThumbnailFilesize:10,thumbnailWidth:120,thumbnailHeight:120,filesizeBase:1e3,maxFiles:null,params:{},clickable:!0,ignoreHiddenFiles:!0,acceptedFiles:null,acceptedMimeTypes:null,autoProcessQueue:!0,autoQueue:!0,addRemoveLinks:!1,previewsContainer:null,hiddenInputContainer:"body",capture:null,renameFilename:null,dictDefaultMessage:"Drop files here to upload",dictFallbackMessage:"Your browser does not support drag'n'drop file uploads.",dictFallbackText:"Please use the fallback form below to upload your files like in the olden days.",dictFileTooBig:"File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.",dictInvalidFileType:"You can't upload files of this type.",dictResponseError:"Server responded with {{statusCode}} code.",dictCancelUpload:"Cancel upload",dictCancelUploadConfirmation:"Are you sure you want to cancel this upload?",dictRemoveFile:"Remove file",dictRemoveFileConfirmation:null,dictMaxFilesExceeded:"You can not upload any more files.",accept:function(e,t){return t()},init:function(){return s},forceFallback:!1,fallback:function(){var e,t,r,n,i,s;for(this.element.className=""+this.element.className+" dz-browser-not-supported",s=this.element.getElementsByTagName("div"),n=0,i=s.length;i>n;n++)e=s[n],/(^| )dz-message($| )/.test(e.className)&&(t=e,e.className="dz-message");return t||(t=o.createElement('<div class="dz-message"><span></span></div>'),this.element.appendChild(t)),r=t.getElementsByTagName("span")[0],r&&(null!=r.textContent?r.textContent=this.options.dictFallbackMessage:null!=r.innerText&&(r.innerText=this.options.dictFallbackMessage)),this.element.appendChild(this.getFallbackForm())},resize:function(e){var t,o,r;return t={srcX:0,srcY:0,srcWidth:e.width,srcHeight:e.height},o=e.width/e.height,t.optWidth=this.options.thumbnailWidth,t.optHeight=this.options.thumbnailHeight,null==t.optWidth&&null==t.optHeight?(t.optWidth=t.srcWidth,t.optHeight=t.srcHeight):null==t.optWidth?t.optWidth=o*t.optHeight:null==t.optHeight&&(t.optHeight=1/o*t.optWidth),r=t.optWidth/t.optHeight,e.height<t.optHeight||e.width<t.optWidth?(t.trgHeight=t.srcHeight,t.trgWidth=t.srcWidth):o>r?(t.srcHeight=e.height,t.srcWidth=t.srcHeight*r):(t.srcWidth=e.width,t.srcHeight=t.srcWidth/r),t.srcX=(e.width-t.srcWidth)/2,t.srcY=(e.height-t.srcHeight)/2,t},drop:function(){return this.element.classList.remove("dz-drag-hover")},dragstart:s,dragend:function(){return this.element.classList.remove("dz-drag-hover")},dragenter:function(){return this.element.classList.add("dz-drag-hover")},dragover:function(){return this.element.classList.add("dz-drag-hover")},dragleave:function(){return this.element.classList.remove("dz-drag-hover")},paste:s,reset:function(){return this.element.classList.remove("dz-started")},addedfile:function(e){var t,r,n,i,s,a,l,c,p,u,d,h,m;if(this.element===this.previewsContainer&&this.element.classList.add("dz-started"),this.previewsContainer){for(e.previewElement=o.createElement(this.options.previewTemplate.trim()),e.previewTemplate=e.previewElement,this.previewsContainer.appendChild(e.previewElement),u=e.previewElement.querySelectorAll("[data-dz-name]"),i=0,l=u.length;l>i;i++)t=u[i],t.textContent=this._renameFilename(e.name);for(d=e.previewElement.querySelectorAll("[data-dz-size]"),s=0,c=d.length;c>s;s++)t=d[s],t.innerHTML=this.filesize(e.size);for(this.options.addRemoveLinks&&(e._removeLink=o.createElement('<a class="dz-remove" href="javascript:undefined;" data-dz-remove>'+this.options.dictRemoveFile+"</a>"),e.previewElement.appendChild(e._removeLink)),r=function(t){return function(r){return r.preventDefault(),r.stopPropagation(),e.status===o.UPLOADING?o.confirm(t.options.dictCancelUploadConfirmation,function(){return t.removeFile(e)}):t.options.dictRemoveFileConfirmation?o.confirm(t.options.dictRemoveFileConfirmation,function(){return t.removeFile(e)}):t.removeFile(e)}}(this),h=e.previewElement.querySelectorAll("[data-dz-remove]"),m=[],a=0,p=h.length;p>a;a++)n=h[a],m.push(n.addEventListener("click",r));return m}},removedfile:function(e){var t;return e.previewElement&&null!=(t=e.previewElement)&&t.parentNode.removeChild(e.previewElement),this._updateMaxFilesReachedClass()},thumbnail:function(e,t){var o,r,n,i;if(e.previewElement){for(e.previewElement.classList.remove("dz-file-preview"),i=e.previewElement.querySelectorAll("[data-dz-thumbnail]"),r=0,n=i.length;n>r;r++)o=i[r],o.alt=e.name,o.src=t;return setTimeout(function(){return function(){return e.previewElement.classList.add("dz-image-preview")}}(this),1)}},error:function(e,t){var o,r,n,i,s;if(e.previewElement){for(e.previewElement.classList.add("dz-error"),"String"!=typeof t&&t.error&&(t=t.error),i=e.previewElement.querySelectorAll("[data-dz-errormessage]"),s=[],r=0,n=i.length;n>r;r++)o=i[r],s.push(o.textContent=t);return s}},errormultiple:s,processing:function(e){return e.previewElement&&(e.previewElement.classList.add("dz-processing"),e._removeLink)?e._removeLink.textContent=this.options.dictCancelUpload:void 0},processingmultiple:s,uploadprogress:function(e,t){var o,r,n,i,s;if(e.previewElement){for(i=e.previewElement.querySelectorAll("[data-dz-uploadprogress]"),s=[],r=0,n=i.length;n>r;r++)o=i[r],s.push("PROGRESS"===o.nodeName?o.value=t:o.style.width=""+t+"%");return s}},totaluploadprogress:s,sending:s,sendingmultiple:s,success:function(e){return e.previewElement?e.previewElement.classList.add("dz-success"):void 0},successmultiple:s,canceled:function(e){return this.emit("error",e,"Upload canceled.")},canceledmultiple:s,complete:function(e){return e._removeLink&&(e._removeLink.textContent=this.options.dictRemoveFile),e.previewElement?e.previewElement.classList.add("dz-complete"):void 0},completemultiple:s,maxfilesexceeded:s,maxfilesreached:s,queuecomplete:s,addedfiles:s,previewTemplate:'<div class="dz-preview dz-file-preview">\n  <div class="dz-image"><img data-dz-thumbnail /></div>\n  <div class="dz-details">\n    <div class="dz-size"><span data-dz-size></span></div>\n    <div class="dz-filename"><span data-dz-name></span></div>\n  </div>\n  <div class="dz-progress"><span class="dz-upload" data-dz-uploadprogress></span></div>\n  <div class="dz-error-message"><span data-dz-errormessage></span></div>\n  <div class="dz-success-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n      <title>Check</title>\n      <defs></defs>\n      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <path d="M23.5,31.8431458 L17.5852419,25.9283877 C16.0248253,24.3679711 13.4910294,24.366835 11.9289322,25.9289322 C10.3700136,27.4878508 10.3665912,30.0234455 11.9283877,31.5852419 L20.4147581,40.0716123 C20.5133999,40.1702541 20.6159315,40.2626649 20.7218615,40.3488435 C22.2835669,41.8725651 24.794234,41.8626202 26.3461564,40.3106978 L43.3106978,23.3461564 C44.8771021,21.7797521 44.8758057,19.2483887 43.3137085,17.6862915 C41.7547899,16.1273729 39.2176035,16.1255422 37.6538436,17.6893022 L23.5,31.8431458 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" id="Oval-2" stroke-opacity="0.198794158" stroke="#747474" fill-opacity="0.816519475" fill="#FFFFFF" sketch:type="MSShapeGroup"></path>\n      </g>\n    </svg>\n  </div>\n  <div class="dz-error-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n      <title>Error</title>\n      <defs></defs>\n      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <g id="Check-+-Oval-2" sketch:type="MSLayerGroup" stroke="#747474" stroke-opacity="0.198794158" fill="#FFFFFF" fill-opacity="0.816519475">\n          <path d="M32.6568542,29 L38.3106978,23.3461564 C39.8771021,21.7797521 39.8758057,19.2483887 38.3137085,17.6862915 C36.7547899,16.1273729 34.2176035,16.1255422 32.6538436,17.6893022 L27,23.3431458 L21.3461564,17.6893022 C19.7823965,16.1255422 17.2452101,16.1273729 15.6862915,17.6862915 C14.1241943,19.2483887 14.1228979,21.7797521 15.6893022,23.3461564 L21.3431458,29 L15.6893022,34.6538436 C14.1228979,36.2202479 14.1241943,38.7516113 15.6862915,40.3137085 C17.2452101,41.8726271 19.7823965,41.8744578 21.3461564,40.3106978 L27,34.6568542 L32.6538436,40.3106978 C34.2176035,41.8744578 36.7547899,41.8726271 38.3137085,40.3137085 C39.8758057,38.7516113 39.8771021,36.2202479 38.3106978,34.6538436 L32.6568542,29 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" id="Oval-2" sketch:type="MSShapeGroup"></path>\n        </g>\n      </g>\n    </svg>\n  </div>\n</div>'},r=function(){var e,t,o,r,n,i,s;for(r=arguments[0],o=2<=arguments.length?l.call(arguments,1):[],i=0,s=o.length;s>i;i++){t=o[i];for(e in t)n=t[e],r[e]=n}return r},o.prototype.getAcceptedFiles=function(){var e,t,o,r,n;for(r=this.files,n=[],t=0,o=r.length;o>t;t++)e=r[t],e.accepted&&n.push(e);return n},o.prototype.getRejectedFiles=function(){var e,t,o,r,n;for(r=this.files,n=[],t=0,o=r.length;o>t;t++)e=r[t],e.accepted||n.push(e);return n},o.prototype.getFilesWithStatus=function(e){var t,o,r,n,i;for(n=this.files,i=[],o=0,r=n.length;r>o;o++)t=n[o],t.status===e&&i.push(t);return i},o.prototype.getQueuedFiles=function(){return this.getFilesWithStatus(o.QUEUED)},o.prototype.getUploadingFiles=function(){return this.getFilesWithStatus(o.UPLOADING)},o.prototype.getAddedFiles=function(){return this.getFilesWithStatus(o.ADDED)},o.prototype.getActiveFiles=function(){var e,t,r,n,i;for(n=this.files,i=[],t=0,r=n.length;r>t;t++)e=n[t],(e.status===o.UPLOADING||e.status===o.QUEUED)&&i.push(e);return i},o.prototype.init=function(){var e,t,r,n,i,s,a;for("form"===this.element.tagName&&this.element.setAttribute("enctype","multipart/form-data"),this.element.classList.contains("dropzone")&&!this.element.querySelector(".dz-message")&&this.element.appendChild(o.createElement('<div class="dz-default dz-message"><span>'+this.options.dictDefaultMessage+"</span></div>")),this.clickableElements.length&&(r=function(e){return function(){return e.hiddenFileInput&&e.hiddenFileInput.parentNode.removeChild(e.hiddenFileInput),e.hiddenFileInput=document.createElement("input"),e.hiddenFileInput.setAttribute("type","file"),(null==e.options.maxFiles||e.options.maxFiles>1)&&e.hiddenFileInput.setAttribute("multiple","multiple"),e.hiddenFileInput.className="dz-hidden-input",null!=e.options.acceptedFiles&&e.hiddenFileInput.setAttribute("accept",e.options.acceptedFiles),null!=e.options.capture&&e.hiddenFileInput.setAttribute("capture",e.options.capture),e.hiddenFileInput.style.visibility="hidden",e.hiddenFileInput.style.position="absolute",e.hiddenFileInput.style.top="0",e.hiddenFileInput.style.left="0",e.hiddenFileInput.style.height="0",e.hiddenFileInput.style.width="0",document.querySelector(e.options.hiddenInputContainer).appendChild(e.hiddenFileInput),e.hiddenFileInput.addEventListener("change",function(){var t,o,n,i;if(o=e.hiddenFileInput.files,o.length)for(n=0,i=o.length;i>n;n++)t=o[n],e.addFile(t);return e.emit("addedfiles",o),r()})}}(this))(),this.URL=null!=(s=window.URL)?s:window.webkitURL,a=this.events,n=0,i=a.length;i>n;n++)e=a[n],this.on(e,this.options[e]);return this.on("uploadprogress",function(e){return function(){return e.updateTotalUploadProgress()}}(this)),this.on("removedfile",function(e){return function(){return e.updateTotalUploadProgress()}}(this)),this.on("canceled",function(e){return function(t){return e.emit("complete",t)}}(this)),this.on("complete",function(e){return function(){return 0===e.getAddedFiles().length&&0===e.getUploadingFiles().length&&0===e.getQueuedFiles().length?setTimeout(function(){return e.emit("queuecomplete")},0):void 0}}(this)),t=function(e){return e.stopPropagation(),e.preventDefault?e.preventDefault():e.returnValue=!1},this.listeners=[{element:this.element,events:{dragstart:function(e){return function(t){return e.emit("dragstart",t)}}(this),dragenter:function(e){return function(o){return t(o),e.emit("dragenter",o)}}(this),dragover:function(e){return function(o){var r;try{r=o.dataTransfer.effectAllowed}catch(n){}return o.dataTransfer.dropEffect="move"===r||"linkMove"===r?"move":"copy",t(o),e.emit("dragover",o)}}(this),dragleave:function(e){return function(t){return e.emit("dragleave",t)}}(this),drop:function(e){return function(o){return t(o),e.drop(o)}}(this),dragend:function(e){return function(t){return e.emit("dragend",t)}}(this)}}],this.clickableElements.forEach(function(e){return function(t){return e.listeners.push({element:t,events:{click:function(r){return(t!==e.element||r.target===e.element||o.elementInside(r.target,e.element.querySelector(".dz-message")))&&e.hiddenFileInput.click(),!0}}})}}(this)),this.enable(),this.options.init.call(this)},o.prototype.destroy=function(){var e;return this.disable(),this.removeAllFiles(!0),(null!=(e=this.hiddenFileInput)?e.parentNode:void 0)&&(this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput),this.hiddenFileInput=null),delete this.element.dropzone,o.instances.splice(o.instances.indexOf(this),1)},o.prototype.updateTotalUploadProgress=function(){var e,t,o,r,n,i,s,a;if(r=0,o=0,e=this.getActiveFiles(),e.length){for(a=this.getActiveFiles(),i=0,s=a.length;s>i;i++)t=a[i],r+=t.upload.bytesSent,o+=t.upload.total;n=100*r/o}else n=100;return this.emit("totaluploadprogress",n,o,r)},o.prototype._getParamName=function(e){return"function"==typeof this.options.paramName?this.options.paramName(e):""+this.options.paramName+(this.options.uploadMultiple?"["+e+"]":"")},o.prototype._renameFilename=function(e){return"function"!=typeof this.options.renameFilename?e:this.options.renameFilename(e)},o.prototype.getFallbackForm=function(){var e,t,r,n;return(e=this.getExistingFallback())?e:(r='<div class="dz-fallback">',this.options.dictFallbackText&&(r+="<p>"+this.options.dictFallbackText+"</p>"),r+='<input type="file" name="'+this._getParamName(0)+'" '+(this.options.uploadMultiple?'multiple="multiple"':void 0)+' /><input type="submit" value="Upload!"></div>',t=o.createElement(r),"FORM"!==this.element.tagName?(n=o.createElement('<form action="'+this.options.url+'" enctype="multipart/form-data" method="'+this.options.method+'"></form>'),n.appendChild(t)):(this.element.setAttribute("enctype","multipart/form-data"),this.element.setAttribute("method",this.options.method)),null!=n?n:t)},o.prototype.getExistingFallback=function(){var e,t,o,r,n,i;for(t=function(e){var t,o,r;for(o=0,r=e.length;r>o;o++)if(t=e[o],/(^| )fallback($| )/.test(t.className))return t},i=["div","form"],r=0,n=i.length;n>r;r++)if(o=i[r],e=t(this.element.getElementsByTagName(o)))return e},o.prototype.setupEventListeners=function(){var e,t,o,r,n,i,s;for(i=this.listeners,s=[],r=0,n=i.length;n>r;r++)e=i[r],s.push(function(){var r,n;r=e.events,n=[];for(t in r)o=r[t],n.push(e.element.addEventListener(t,o,!1));return n}());return s},o.prototype.removeEventListeners=function(){var e,t,o,r,n,i,s;for(i=this.listeners,s=[],r=0,n=i.length;n>r;r++)e=i[r],s.push(function(){var r,n;r=e.events,n=[];for(t in r)o=r[t],n.push(e.element.removeEventListener(t,o,!1));return n}());return s},o.prototype.disable=function(){var e,t,o,r,n;for(this.clickableElements.forEach(function(e){return e.classList.remove("dz-clickable")}),this.removeEventListeners(),r=this.files,n=[],t=0,o=r.length;o>t;t++)e=r[t],n.push(this.cancelUpload(e));return n},o.prototype.enable=function(){return this.clickableElements.forEach(function(e){return e.classList.add("dz-clickable")}),this.setupEventListeners()},o.prototype.filesize=function(e){var t,o,r,n,i,s,a,l;if(r=0,n="b",e>0){for(s=["TB","GB","MB","KB","b"],o=a=0,l=s.length;l>a;o=++a)if(i=s[o],t=Math.pow(this.options.filesizeBase,4-o)/10,e>=t){r=e/Math.pow(this.options.filesizeBase,4-o),n=i;break}r=Math.round(10*r)/10}return"<strong>"+r+"</strong> "+n},o.prototype._updateMaxFilesReachedClass=function(){return null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(this.getAcceptedFiles().length===this.options.maxFiles&&this.emit("maxfilesreached",this.files),this.element.classList.add("dz-max-files-reached")):this.element.classList.remove("dz-max-files-reached")},o.prototype.drop=function(e){var t,o;e.dataTransfer&&(this.emit("drop",e),t=e.dataTransfer.files,this.emit("addedfiles",t),t.length&&(o=e.dataTransfer.items,o&&o.length&&null!=o[0].webkitGetAsEntry?this._addFilesFromItems(o):this.handleFiles(t)))},o.prototype.paste=function(e){var t,o;if(null!=(null!=e&&null!=(o=e.clipboardData)?o.items:void 0))return this.emit("paste",e),t=e.clipboardData.items,t.length?this._addFilesFromItems(t):void 0},o.prototype.handleFiles=function(e){var t,o,r,n;for(n=[],o=0,r=e.length;r>o;o++)t=e[o],n.push(this.addFile(t));return n},o.prototype._addFilesFromItems=function(e){var t,o,r,n,i;for(i=[],r=0,n=e.length;n>r;r++)o=e[r],i.push(null!=o.webkitGetAsEntry&&(t=o.webkitGetAsEntry())?t.isFile?this.addFile(o.getAsFile()):t.isDirectory?this._addFilesFromDirectory(t,t.name):void 0:null!=o.getAsFile&&(null==o.kind||"file"===o.kind)?this.addFile(o.getAsFile()):void 0);return i},o.prototype._addFilesFromDirectory=function(e,t){var o,r,n;return o=e.createReader(),r=function(e){return"undefined"!=typeof console&&null!==console&&"function"==typeof console.log?console.log(e):void 0},(n=function(e){return function(){return o.readEntries(function(o){var r,i,s;if(o.length>0){for(i=0,s=o.length;s>i;i++)r=o[i],r.isFile?r.file(function(o){return e.options.ignoreHiddenFiles&&"."===o.name.substring(0,1)?void 0:(o.fullPath=""+t+"/"+o.name,e.addFile(o))}):r.isDirectory&&e._addFilesFromDirectory(r,""+t+"/"+r.name);n()}return null},r)}}(this))()},o.prototype.accept=function(e,t){return e.size>1024*this.options.maxFilesize*1024?t(this.options.dictFileTooBig.replace("{{filesize}}",Math.round(e.size/1024/10.24)/100).replace("{{maxFilesize}}",this.options.maxFilesize)):o.isValidFile(e,this.options.acceptedFiles)?null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(t(this.options.dictMaxFilesExceeded.replace("{{maxFiles}}",this.options.maxFiles)),this.emit("maxfilesexceeded",e)):this.options.accept.call(this,e,t):t(this.options.dictInvalidFileType)},o.prototype.addFile=function(e){return e.upload={progress:0,total:e.size,bytesSent:0},this.files.push(e),e.status=o.ADDED,this.emit("addedfile",e),this._enqueueThumbnail(e),this.accept(e,function(t){return function(o){return o?(e.accepted=!1,t._errorProcessing([e],o)):(e.accepted=!0,t.options.autoQueue&&t.enqueueFile(e)),t._updateMaxFilesReachedClass()}}(this))},o.prototype.enqueueFiles=function(e){var t,o,r;for(o=0,r=e.length;r>o;o++)t=e[o],this.enqueueFile(t);return null},o.prototype.enqueueFile=function(e){if(e.status!==o.ADDED||e.accepted!==!0)throw new Error("This file can't be queued because it has already been processed or was rejected.");return e.status=o.QUEUED,this.options.autoProcessQueue?setTimeout(function(e){return function(){return e.processQueue()}}(this),0):void 0},o.prototype._thumbnailQueue=[],o.prototype._processingThumbnail=!1,o.prototype._enqueueThumbnail=function(e){return this.options.createImageThumbnails&&e.type.match(/image.*/)&&e.size<=1024*this.options.maxThumbnailFilesize*1024?(this._thumbnailQueue.push(e),setTimeout(function(e){return function(){return e._processThumbnailQueue()}}(this),0)):void 0},o.prototype._processThumbnailQueue=function(){return this._processingThumbnail||0===this._thumbnailQueue.length?void 0:(this._processingThumbnail=!0,this.createThumbnail(this._thumbnailQueue.shift(),function(e){return function(){return e._processingThumbnail=!1,e._processThumbnailQueue()}}(this)))},o.prototype.removeFile=function(e){return e.status===o.UPLOADING&&this.cancelUpload(e),this.files=a(this.files,e),this.emit("removedfile",e),0===this.files.length?this.emit("reset"):void 0},o.prototype.removeAllFiles=function(e){var t,r,n,i;for(null==e&&(e=!1),i=this.files.slice(),r=0,n=i.length;n>r;r++)t=i[r],(t.status!==o.UPLOADING||e)&&this.removeFile(t);return null},o.prototype.createThumbnail=function(e,t){var o;return o=new FileReader,o.onload=function(r){return function(){return"image/svg+xml"===e.type?(r.emit("thumbnail",e,o.result),void(null!=t&&t())):r.createThumbnailFromUrl(e,o.result,t)}}(this),o.readAsDataURL(e)},o.prototype.createThumbnailFromUrl=function(e,t,o,r){var n;return n=document.createElement("img"),r&&(n.crossOrigin=r),n.onload=function(t){return function(){var r,s,a,l,c,p,u,d;return e.width=n.width,e.height=n.height,a=t.options.resize.call(t,e),null==a.trgWidth&&(a.trgWidth=a.optWidth),null==a.trgHeight&&(a.trgHeight=a.optHeight),r=document.createElement("canvas"),s=r.getContext("2d"),r.width=a.trgWidth,r.height=a.trgHeight,i(s,n,null!=(c=a.srcX)?c:0,null!=(p=a.srcY)?p:0,a.srcWidth,a.srcHeight,null!=(u=a.trgX)?u:0,null!=(d=a.trgY)?d:0,a.trgWidth,a.trgHeight),l=r.toDataURL("image/png"),t.emit("thumbnail",e,l),null!=o?o():void 0}}(this),null!=o&&(n.onerror=o),n.src=t},o.prototype.processQueue=function(){var e,t,o,r;if(t=this.options.parallelUploads,o=this.getUploadingFiles().length,e=o,!(o>=t)&&(r=this.getQueuedFiles(),r.length>0)){if(this.options.uploadMultiple)return this.processFiles(r.slice(0,t-o));for(;t>e;){if(!r.length)return;this.processFile(r.shift()),e++}}},o.prototype.processFile=function(e){return this.processFiles([e])},o.prototype.processFiles=function(e){var t,r,n;for(r=0,n=e.length;n>r;r++)t=e[r],t.processing=!0,t.status=o.UPLOADING,this.emit("processing",t);return this.options.uploadMultiple&&this.emit("processingmultiple",e),this.uploadFiles(e)},o.prototype._getFilesWithXhr=function(e){var t,o;return o=function(){var o,r,n,i;for(n=this.files,i=[],o=0,r=n.length;r>o;o++)t=n[o],t.xhr===e&&i.push(t);return i}.call(this)},o.prototype.cancelUpload=function(e){var t,r,n,i,s,a,l;if(e.status===o.UPLOADING){for(r=this._getFilesWithXhr(e.xhr),n=0,s=r.length;s>n;n++)t=r[n],t.status=o.CANCELED;for(e.xhr.abort(),i=0,a=r.length;a>i;i++)t=r[i],this.emit("canceled",t);this.options.uploadMultiple&&this.emit("canceledmultiple",r)}else((l=e.status)===o.ADDED||l===o.QUEUED)&&(e.status=o.CANCELED,this.emit("canceled",e),this.options.uploadMultiple&&this.emit("canceledmultiple",[e]));return this.options.autoProcessQueue?this.processQueue():void 0},n=function(){var e,t;return t=arguments[0],e=2<=arguments.length?l.call(arguments,1):[],"function"==typeof t?t.apply(this,e):t},o.prototype.uploadFile=function(e){
return this.uploadFiles([e])},o.prototype.uploadFiles=function(e){var t,i,s,a,l,c,p,u,d,h,m,f,g,v,y,$,b,w,C,k,T,F,E,S,L,P,N,I,x,A,D,U,_,z;for(C=new XMLHttpRequest,k=0,S=e.length;S>k;k++)t=e[k],t.xhr=C;f=n(this.options.method,e),b=n(this.options.url,e),C.open(f,b,!0),C.withCredentials=!!this.options.withCredentials,y=null,s=function(o){return function(){var r,n,i;for(i=[],r=0,n=e.length;n>r;r++)t=e[r],i.push(o._errorProcessing(e,y||o.options.dictResponseError.replace("{{statusCode}}",C.status),C));return i}}(this),$=function(o){return function(r){var n,i,s,a,l,c,p,u,d;if(null!=r)for(i=100*r.loaded/r.total,s=0,c=e.length;c>s;s++)t=e[s],t.upload={progress:i,total:r.total,bytesSent:r.loaded};else{for(n=!0,i=100,a=0,p=e.length;p>a;a++)t=e[a],(100!==t.upload.progress||t.upload.bytesSent!==t.upload.total)&&(n=!1),t.upload.progress=i,t.upload.bytesSent=t.upload.total;if(n)return}for(d=[],l=0,u=e.length;u>l;l++)t=e[l],d.push(o.emit("uploadprogress",t,i,t.upload.bytesSent));return d}}(this),C.onload=function(t){return function(r){var n;if(e[0].status!==o.CANCELED&&4===C.readyState){if(y=C.responseText,C.getResponseHeader("content-type")&&~C.getResponseHeader("content-type").indexOf("application/json"))try{y=JSON.parse(y)}catch(i){r=i,y="Invalid JSON response from server."}return $(),200<=(n=C.status)&&300>n?t._finished(e,y,r):s()}}}(this),C.onerror=function(){return function(){return e[0].status!==o.CANCELED?s():void 0}}(this),v=null!=(x=C.upload)?x:C,v.onprogress=$,c={Accept:"application/json","Cache-Control":"no-cache","X-Requested-With":"XMLHttpRequest"},this.options.headers&&r(c,this.options.headers);for(a in c)l=c[a],l&&C.setRequestHeader(a,l);if(i=new FormData,this.options.params){A=this.options.params;for(m in A)w=A[m],i.append(m,w)}for(T=0,L=e.length;L>T;T++)t=e[T],this.emit("sending",t,C,i);if(this.options.uploadMultiple&&this.emit("sendingmultiple",e,C,i),"FORM"===this.element.tagName)for(D=this.element.querySelectorAll("input, textarea, select, button"),F=0,P=D.length;P>F;F++)if(u=D[F],d=u.getAttribute("name"),h=u.getAttribute("type"),"SELECT"===u.tagName&&u.hasAttribute("multiple"))for(U=u.options,E=0,N=U.length;N>E;E++)g=U[E],g.selected&&i.append(d,g.value);else(!h||"checkbox"!==(_=h.toLowerCase())&&"radio"!==_||u.checked)&&i.append(d,u.value);for(p=I=0,z=e.length-1;z>=0?z>=I:I>=z;p=z>=0?++I:--I)i.append(this._getParamName(p),e[p],this._renameFilename(e[p].name));return this.submitRequest(C,i,e)},o.prototype.submitRequest=function(e,t){return e.send(t)},o.prototype._finished=function(e,t,r){var n,i,s;for(i=0,s=e.length;s>i;i++)n=e[i],n.status=o.SUCCESS,this.emit("success",n,t,r),this.emit("complete",n);return this.options.uploadMultiple&&(this.emit("successmultiple",e,t,r),this.emit("completemultiple",e)),this.options.autoProcessQueue?this.processQueue():void 0},o.prototype._errorProcessing=function(e,t,r){var n,i,s;for(i=0,s=e.length;s>i;i++)n=e[i],n.status=o.ERROR,this.emit("error",n,t,r),this.emit("complete",n);return this.options.uploadMultiple&&(this.emit("errormultiple",e,t,r),this.emit("completemultiple",e)),this.options.autoProcessQueue?this.processQueue():void 0},o}(t),e.version="4.3.0",e.options={},e.optionsForElement=function(t){return t.getAttribute("id")?e.options[o(t.getAttribute("id"))]:void 0},e.instances=[],e.forElement=function(e){if("string"==typeof e&&(e=document.querySelector(e)),null==(null!=e?e.dropzone:void 0))throw new Error("No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.");return e.dropzone},e.autoDiscover=!0,e.discover=function(){var t,o,r,n,i,s;for(document.querySelectorAll?r=document.querySelectorAll(".dropzone"):(r=[],t=function(e){var t,o,n,i;for(i=[],o=0,n=e.length;n>o;o++)t=e[o],i.push(/(^| )dropzone($| )/.test(t.className)?r.push(t):void 0);return i},t(document.getElementsByTagName("div")),t(document.getElementsByTagName("form"))),s=[],n=0,i=r.length;i>n;n++)o=r[n],s.push(e.optionsForElement(o)!==!1?new e(o):void 0);return s},e.blacklistedBrowsers=[/opera.*Macintosh.*version\/12/i],e.isBrowserSupported=function(){var t,o,r,n,i;if(t=!0,window.File&&window.FileReader&&window.FileList&&window.Blob&&window.FormData&&document.querySelector)if("classList"in document.createElement("a"))for(i=e.blacklistedBrowsers,r=0,n=i.length;n>r;r++)o=i[r],o.test(navigator.userAgent)&&(t=!1);else t=!1;else t=!1;return t},a=function(e,t){var o,r,n,i;for(i=[],r=0,n=e.length;n>r;r++)o=e[r],o!==t&&i.push(o);return i},o=function(e){return e.replace(/[\-_](\w)/g,function(e){return e.charAt(1).toUpperCase()})},e.createElement=function(e){var t;return t=document.createElement("div"),t.innerHTML=e,t.childNodes[0]},e.elementInside=function(e,t){if(e===t)return!0;for(;e=e.parentNode;)if(e===t)return!0;return!1},e.getElement=function(e,t){var o;if("string"==typeof e?o=document.querySelector(e):null!=e.nodeType&&(o=e),null==o)throw new Error("Invalid `"+t+"` option provided. Please provide a CSS selector or a plain HTML element.");return o},e.getElements=function(e,t){var o,r,n,i,s,a,l,c;if(e instanceof Array){n=[];try{for(i=0,a=e.length;a>i;i++)r=e[i],n.push(this.getElement(r,t))}catch(p){o=p,n=null}}else if("string"==typeof e)for(n=[],c=document.querySelectorAll(e),s=0,l=c.length;l>s;s++)r=c[s],n.push(r);else null!=e.nodeType&&(n=[e]);if(null==n||!n.length)throw new Error("Invalid `"+t+"` option provided. Please provide a CSS selector, a plain HTML element or a list of those.");return n},e.confirm=function(e,t,o){return window.confirm(e)?t():null!=o?o():void 0},e.isValidFile=function(e,t){var o,r,n,i,s;if(!t)return!0;for(t=t.split(","),r=e.type,o=r.replace(/\/.*$/,""),i=0,s=t.length;s>i;i++)if(n=t[i],n=n.trim(),"."===n.charAt(0)){if(-1!==e.name.toLowerCase().indexOf(n.toLowerCase(),e.name.length-n.length))return!0}else if(/\/\*$/.test(n)){if(o===n.replace(/\/.*$/,""))return!0}else if(r===n)return!0;return!1},"undefined"!=typeof jQuery&&null!==jQuery&&(jQuery.fn.dropzone=function(t){return this.each(function(){return new e(this,t)})}),"undefined"!=typeof module&&null!==module?module.exports=e:window.Dropzone=e,e.ADDED="added",e.QUEUED="queued",e.ACCEPTED=e.QUEUED,e.UPLOADING="uploading",e.PROCESSING=e.UPLOADING,e.CANCELED="canceled",e.ERROR="error",e.SUCCESS="success",n=function(e){var t,o,r,n,i,s,a,l,c,p;for(a=e.naturalWidth,s=e.naturalHeight,o=document.createElement("canvas"),o.width=1,o.height=s,r=o.getContext("2d"),r.drawImage(e,0,0),n=r.getImageData(0,0,1,s).data,p=0,i=s,l=s;l>p;)t=n[4*(l-1)+3],0===t?i=l:p=l,l=i+p>>1;return c=l/s,0===c?1:c},i=function(e,t,o,r,i,s,a,l,c,p){var u;return u=n(t),e.drawImage(t,o,r,i,s,a,l,c,p/u)},r=function(e,t){var o,r,n,i,s,a,l,c,p;if(n=!1,p=!0,r=e.document,c=r.documentElement,o=r.addEventListener?"addEventListener":"attachEvent",l=r.addEventListener?"removeEventListener":"detachEvent",a=r.addEventListener?"":"on",i=function(o){return"readystatechange"!==o.type||"complete"===r.readyState?(("load"===o.type?e:r)[l](a+o.type,i,!1),!n&&(n=!0)?t.call(e,o.type||o):void 0):void 0},s=function(){var e;try{c.doScroll("left")}catch(t){return e=t,void setTimeout(s,50)}return i("poll")},"complete"!==r.readyState){if(r.createEventObject&&c.doScroll){try{p=!e.frameElement}catch(u){}p&&s()}return r[o](a+"DOMContentLoaded",i,!1),r[o](a+"readystatechange",i,!1),e[o](a+"load",i,!1)}},e._autoDiscoverFunction=function(){return e.autoDiscover?e.discover():void 0},r(window,e._autoDiscoverFunction)}.call(this),app.directive("aboutUs",["$timeout",function(e){return{restrict:"E",templateUrl:"modules/aboutUs/aboutUs.html",link:function(e,t,o){}}}]),app.directive("activity",["$location",function(e){return{restrict:"E",templateUrl:"modules/activity/activity.html",link:function(t,o,r){t.activity=e.search().activity}}}]),app.directive("chooseNumber",["$compile",function($compile){return{restrict:"E",templateUrl:"modules/chooseNumber/chooseNumber.html",controller:"chooseNumberController",link:function(scope,element){$compile($(".number-list").clone().appendTo(".page"))(scope),$(".choose-number .number-list").remove();var $span=$("#number-select span"),$numberList=$(".number-list"),$table=$numberList.find("table");scope.currNumberIndex=3,scope.closeNumberList=function(){$numberList.slideUp()},scope.selectNumber=function(e,t){if(!$(t.target).hasClass("active"))return!1;var o,r,n;if($span.eq(scope.currNumberIndex).attr("date-value",e),$span.eq(scope.currNumberIndex).html(e),$span.eq(scope.currNumberIndex).attr("class","old"),$span.eq(scope.currNumberIndex+1).attr("class","curr"),scope.currNumberIndex<10)return scope.showPickNumberPanel(scope.currNumberIndex+1,"selectNumber"),$("#num-sure").removeClass("active"),$("#num-reset").removeClass("active"),!0;if(10==scope.currNumberIndex){for(r="",o=0;o<11;o++)r+=$span.eq(o).attr("date-value");n=r,scope.phoneNumber=n,$("#num-sure").addClass("active"),$("#num-reset").addClass("active"),$numberList.slideUp()}},scope.showPickNumberPanel=function(pos,isWrite){var i,numNow;for(numNow="",scope.currNumberIndex=pos,$span.eq(pos).nextAll("span").attr("class","future"),$span.eq(pos-1).nextAll("span").html("?"),$span.eq(pos-1).nextAll("span").attr("date-value",""),$table.find("td").find("a").attr("class",""),i=0;i<pos;i++)numNow+=$span.eq(i).attr("date-value");var jsonDs=getNumArr(numNow,scope.phoneData);return $table.find("td").find("a").removeClass("active"),""!=$span.eq(i-1).attr("date-value")&&($span.eq(pos).attr("class","curr"),$.each(eval(jsonDs),function(e,t){0==t?$table.find("td").eq(10).find("a").attr("class","active"):$table.find("td").eq(t-1).find("a").attr("class","active")}),$numberList.slideDown(),"selectNumber"!=isWrite&&writebdLog(scope.category,"_SelectNumber","渠道号",scope.gh),void 0)},scope.reChooseNumber=function(){scope.showPickNumberPanel(3,"selectNumber"),writebdLog(scope.category,"_AgainNumber","渠道号",scope.gh)},scope.$watch("phoneData",function(e,t,o){},!0)}}}]).controller("chooseNumberController",["$scope","$cookieStore","$http","$compile",function($scope,$cookieStore,$http){$scope.phoneData=new Array,$http.jsonp("http://m.gd189fq.com/wap/taokafanghaoNew/fetchNumber.html?callback=JSON_CALLBACK").success(function(data,status,headers,config){$.each(eval(data),function(e,t){t.t||$scope.phoneData.push(t)})}).error(function(e,t,o,r){console.log(t)})}]),app.directive("copyRight",["$timeout",function(e){return{restrict:"E",replace:!0,scope:{},templateUrl:"modules/copyRight/copyRight.html",link:function(e,t,o){e.content=o.content}}}]),app.directive("flowFqa",["$location",function(e){return{restrict:"E",templateUrl:"modules/flowFqa/flowFqa.html",link:function(e,t,o){}}}]),app.directive("jsDialog",[function(){return{restrict:"E",templateUrl:"modules/dialog/dialog.html",link:function(e,t,o){e.$root.dialog={open:function(t,o){e.dialogTitle=t,e.dialogContent=o,$(".js_dialog").show()},close:function(e){$(".js_dialog").hide()}}}}}]),app.directive("flowPackage",["$http",function(e){return{restrict:"E",templateUrl:"modules/flowPackage/flowPackage.html",link:function(t,o,r){t.packageTitle=r.title,t.packageSubTitle=r.subTitle,t.size=r.size,t.showTime=r.showTime,e.get(baseApiUri+"/getFlowPackages").success(function(e){t.flowPackageList=e,t.flowPackageItem=e[3]}),t.setFlowPackage=function(e,o){e.preventDefault();var r=$(e.currentTarget);r.parent().siblings().children().removeClass("curr"),r.addClass("curr"),t.flowPackageItem=o,writebdLog(t.category,"_SelectPackage","渠道号",t.gh)},t.$watch("flowPackageItem",function(e,t,o){e!=t&&(o.mifi?o.mainPrice=parseInt(o.mifi.price)+parseInt(o.flowPackageItem.p):o.mainPrice=e.p)})}}}]),app.directive("footerNav",["$http",function($http){return{restrict:"E",templateUrl:"modules/footerNav/footerNav.html",link:function(scope,element,attrs){function checkPhoneNumber(){return!!$lastNumberSpan.hasClass("old")||(scope.showPickNumberPanel(scope.currNumberIndex),!1)}var $form=$(attrs.submit),$container=$(".content-scrollable"),$lastNumberSpan=$("#number-select span:last-child"),$scrollTo,searchType=attrs.searchType;scope.priceType=attrs.priceType,"phone"==searchType?scope.orderURL="http://m.gd189fq.com/wap/customer/searchIndexA.html?s=wap":scope.orderURL="http://m.gd189fq.com/yfqcz/#/purchaseOrderList?redirect_uri=http://app.yfq.cn",1==scope.payType?scope.payTypeName="下一步":2==scope.payType?scope.payTypeName="货到付款":scope.payTypeName="立即支付",scope.checks=eval(attrs.checks),scope.getSearch=function(){writebdLog(scope.category,"_OrderQuery","渠道号",scope.gh)},scope.getContent=function(){getMeiqia(),_MEIQIA("showPanel"),writebdLog(scope.category,"_CustConsult","渠道号",scope.gh)},scope.submitForm=function(e){return e.preventDefault(),"true"!=attrs.checkPhone||checkPhoneNumber()?void(scope.checkAddress()?scope.checkActiveCode()&&(writebdLog(scope.category,"_BuyNow","渠道号",scope.gh),scope.$root.toast.open(),$form.submit()):($scrollTo=$("#receiverAddress"),$container.animate({scrollTop:$scrollTo.offset().top-$container.offset().top+$container.scrollTop()}))):($scrollTo=$("#chooseNumber"),$container.animate({scrollTop:$scrollTo.offset().top-$container.offset().top+$container.scrollTop()}),!1)}}}}]),app.directive("footerNavNew",["$http","$cookieStore",function($http,$cookieStore){return{restrict:"E",templateUrl:"modules/footerNav/footerNav.html",link:function(scope,element,attrs){function checkPhoneNumber(){return!!scope.checkoutForm.phoneNumber.$valid}var $form=$(attrs.submit),$container=$(".content-scrollable"),$lastNumberSpan=$("#number-select span:last-child"),$scrollTo,searchType=attrs.searchType;scope.priceType=attrs.priceType,"phone"==searchType?scope.orderURL="http://m.gd189fq.com/wap/customer/searchIndexA.html?s=wap":scope.orderURL="http://m.gd189fq.com/yfqcz/#/purchaseOrderList?redirect_uri=http://app.yfq.cn",scope.payTypeName="下一步",scope.checks=eval(attrs.checks),scope.getSearch=function(){writebdLog(scope.category,"_OrderQuery","渠道号",scope.gh)},scope.getContent=function(){getMeiqia(),_MEIQIA("showPanel"),writebdLog(scope.category,"_CustConsult","渠道号",scope.gh)},scope.submitForm=function(e){checkPhoneNumber()?(scope.orderState={machineId:scope.phone.productId,productId:scope.pkg.productId,color:scope.color.colorName,phoneNumber:scope.phoneNumber,price:scope.mainPrice,category:scope.category},$cookieStore.put("orderState",scope.orderState),scope.checkActiveCode()&&(writebdLog(scope.category,"_BuyNow","渠道号",scope.gh),scope.$root.toast.open(),$form.submit())):(e.preventDefault(),scope.npShow(1))}}}}]),app.directive("gh",["$location",function(e){return{restrict:"E",templateUrl:"modules/gh/gh.html",link:function(t,o,r){t.gh=e.search().gh}}}]),app.directive("a",["$location",function(e){return{restrict:"E",link:function(t,o,r){var n,i=e.search(),s=r.href,a=0;s&&($.each(i,function(e,t){0==a?(n="?"+e+"="+t,s.indexOf("?")!=-1&&(n="&"+e+"="+t)):n=n+"&"+e+"="+t,a++}),t.hash=n,"javascript:;"!=s&&void 0!=t.hash&&"false"!=r.hasHash&&o.attr("href",s+t.hash))}}}]),app.directive("inputQuery",function(){return{restrict:"E",templateUrl:"modules/inputQuery/inputQuery.html",controller:"inputQueryController",link:function(e,t,o){e.setNumber=function(t,o){t.preventDefault();var r=$(t.currentTarget);r.parent().siblings().children().removeClass("curr"),r.addClass("curr"),e.numberItem=o},e.$watch("phoneData",function(e,t,o){},!0)}}}).controller("inputQueryController",["$scope","$cookieStore","$http",function($scope,$cookieStore,$http){$scope.phoneData=new Array,$http.jsonp("http://m.gd189fq.com/wap/taokafanghaoNew/fetchNumber.html?callback=JSON_CALLBACK").success(function(data,status,headers,config){$.each(eval(data),function(e,t){t.t&&$scope.phoneData.push(t)})}).error(function(e,t,o,r){console.log(t)})}]),app.directive("mifi",["$http",function(e){return{restrict:"E",templateUrl:"modules/mifi/mifi.html",link:function(t,o,r){t.mifiTitle=r.title,t.mifiSubTitle=r.subTitle,e.get("/data/mifis.json").success(function(e){t.mifis=e}),t.$root.disabledSim=function(e,t){var o=$(".sim-type-lists").find(".item-box");t?o.eq(e).addClass("disabled"):o.eq(e).removeClass("disabled")},t.setMifi=function(e,o){e.preventDefault();var r=$(e.currentTarget);r.hasClass("curr")?(t.mifi=!1,t.$root.disabledSim(0,!1),t.mainPrice=t.flowPackageItem.p,r.removeClass("curr"),writebdLog(t.category,"_CancelMifi","渠道号",t.gh)):(t.mifi=o,t.mainPrice=parseInt(o.price)+parseInt(t.flowPackageItem.p),r.addClass("curr"),t.$root.setSimType(e,1,t.simList[1]),t.$root.disabledSim(0,!0),writebdLog(t.category,"_SelectMifi","渠道号",t.gh))}}}}]),app.directive("topNav",["$timeout",function(e){return{restrict:"E",replace:!0,templateUrl:"modules/nav/nav.html",link:function(t,o,r){t.navVisibility=r.navVisibility,"black"==t.navClass,r.navClass&&(t.navClass=r.navClass),t.pageTitle=r.pageTitle,t.$root.title=t.pageTitle,t.pageBack=r.pageBack,t.pageDone=r.pageDone,t.back=function(){var t=$(".view-container");t.addClass("ng-back"),history.back();e(function(){t.removeClass("ng-back")},600)},t.done=function(){}}}}]),app.directive("overlay",["$http","$compile",function(e,t){return{restrict:"E",templateUrl:"modules/overlay/overlay.html",link:function(e,o,r){var n=$("#overlay-hook"),i=$("#container");e.$root.Overlay={open:function(o){t(n.html(o))(e),i.addClass("overlay-open")},openCompile:function(o){t(n.html(o))(e),i.addClass("overlay-open")},close:function(){i.removeClass("overlay-open"),n.html("")}},$(document).on("click",".js-close-overlay",function(){e.$root.Overlay.close()})}}}]),app.directive("owlCarousel",["$http","$compile",function(e,t){return{restrict:"C",templateUrl:"modules/owlCarousel/owlCarousel.html",scope:{imgUrls:"="},link:function(e,t,o){}}}]).directive("carouselItem",["$http","$compile",function(e,t){return{restrict:"C",link:function(e,t,o){e.$last&&$(t).parent().owlCarousel({navigation:!0,slideSpeed:300,paginationSpeed:400,singleItem:!0,autoPlay:3e3})}}}]),app.directive("passport",function(){return{restrict:"E",replace:!0,templateUrl:"modules/passport/passport.html",controller:"passportController",link:function(e,t){}}}).controller("passportController",["$scope","$cookieStore",function(e,t){e.$watch("passport",function(e,o){e!==o&&t.put("passport",e)},!0)}]),app.directive("payType",["$location","$compile","$q",function(e,t,o){return{restrict:"E",templateUrl:"modules/payType/payType.html",link:function(e,t,o){e.payTypeTitle=o.title,e.payTypeSubTitle=o.subTitle,e.visibility=o.visibility,"false"===e.visibility&&$(t).addClass("hide");var r=$(o.submit);e.setDefaultPayType=function(t){e.payType=t},e.setPayType=function(t,o){t.preventDefault();var n=$(t.currentTarget);if(n.hasClass("disabled"))return!1;if(e.checkAddress()){var i;if(0==o&&(i="_payAll"),2==o&&(i="_payMonthly"),1==o&&(i="_payCOD"),writebdLog(e.category,i,"渠道号",e.gh),$("#payType").val(o),2==o)return void e.showOverLay("payTipsPanel");e.checkActiveCode()&&(e.$root.toast.open(),r.submit())}else{var s=$("#receiverAddress");$container.animate({scrollTop:s.offset().top-$container.offset().top+$container.scrollTop()})}},e.showOverLay=function(t){var o=$("#"+t).html();e.$root.Overlay.openCompile(o),writebdLog(e.category,"_IsContractPackage","渠道号",e.gh)},e.$root.tipsSubmit=function(){e.checkActiveCode()?(e.$root.toast.open(),r.submit()):e.$root.Overlay.close()},e.$root.submitForm=function(){r.submit()}}}}]),app.directive("phoneColors",["$http","$q","$timeout",function(e,t,o){return{restrict:"E",templateUrl:"modules/phoneColors/phoneColors.html",link:function(t,o,r){t.colorTitle=r.title,t.colorSubTitle=r.subTitle,t.phone.$promise.then(function(o){e.get("/data/phones/colors/"+t.phone.phoneModel+".json").success(function(e){t.colors=e,t.color=e[getIndex(e,"selected","curr")]})}),t.setPhoneColor=function(e,o){e.preventDefault();var r=$(e.currentTarget);return!r.hasClass("disabled")&&(r.parent().siblings().children().removeClass("curr"),r.addClass("curr"),t.color=o,writebdLog(t.category,"_FuselageColor","渠道号",t.gh),void 0)},t.dialogShow=function(e,o){t.$root.dialog.open(e,o)},t.$watch("productId",function(e,t,o){if(e!=t&&o.colors)if(256==e||257==e){if(o.colors[0].selected="disabled",$("#color0").removeClass("curr"),"亮黑色"==o.color.colorName){var r=getIndex(o.colors,"colorName","黑色");o.color=o.colors[r],$("#color"+r).addClass("curr"),o.dialogShow("","'亮黑色'暂时没货，帮您换成了黑色，或者您可以重新选择")}}else o.colors[0].selected=""})}}}]),app.directive("phonePackage",["$http","$stateParams","$q",function(e,t,o){return{restrict:"E",templateUrl:"modules/phonePackage/phonePackage.html",link:function(e,t,o){e.packageTitle=o.title,e.packageSubTitle=o.subTitle,e.packageType=o.type,e.showTime=o.showTime,e.setPhonePackage=function(t,o){t.preventDefault();var r=$(t.currentTarget);return!r.hasClass("curr")&&(r.parent().siblings().children().removeClass("curr"),r.addClass("curr"),e.pkg=o,void writebdLog(e.category,"_SelectPackage","渠道号",e.gh))},e.showOverLay=function(t){var o=$("#"+t).html();e.$root.Overlay.open(o),writebdLog(e.category,"_IsContractPackage","渠道号",e.gh)}}}}]),app.directive("phoneStorages",["$http","Phone",function(e,t){return{restrict:"E",templateUrl:"modules/phoneStorages/phoneStorages.html",link:function(e,t,o){e.storageTitle=o.title,e.storageSubTitle=o.subTitle,e.setPhoneStorage=function(t,o){t.preventDefault();var r=$(t.currentTarget);return!r.hasClass("disabled")&&(r.parent().siblings().children().removeClass("curr"),r.addClass("curr"),e.productId=o.productId,writebdLog(e.category,"_FuselageMemory","渠道号",e.gh),void 0)}}}}]),app.directive("phoneTypes",["$http","Phone",function(e,t){return{restrict:"E",templateUrl:"modules/phoneTypes/phoneTypes.html",link:function(e,t,o){e.phoneTypeTitle=o.title,e.phoneTypeSubTitle=o.subTitle,e.showDetails=o.phoneDetails,e.setPhoneType=function(t,o){t.preventDefault();var r=$(t.currentTarget);return!r.hasClass("disabled")&&(r.parent().siblings().children().removeClass("curr"),r.addClass("curr"),e.productId=o.productId,writebdLog(e.category,"_SelectVersion","渠道号",e.gh),void 0)},e.showOverLay=function(t){var o=$("#"+t).html();e.$root.Overlay.open(o),writebdLog(e.category,"_IsPhone","渠道号",e.gh)}}}}]),app.directive("productDetails",["$http",function(e){return{restrict:"E",templateUrl:"modules/productDetails/productDetails.html",link:function(e,t,o){}}}]),app.directive("productHeader",["$http",function(e){return{restrict:"E",templateUrl:"modules/productHeader/productHeader.html",link:function(e,t,o){}}}]),app.directive("receiverAddress",["$compile","$cookieStore","$http","$interval",function($compile,$cookieStore,$http,$interval){return{restrict:"E",templateUrl:"modules/receiverAddress/receiverAddress.html",link:function(scope,element,attrs){scope.receiverTitle=attrs.title,$compile($("#address-panel").clone().appendTo(".page"))(scope),$compile($(".address-overlay").clone().appendTo(".page"))(scope),$(".address #address-panel").remove(),$(".address .address-overlay").remove();var value1,value2,value3,value4,$inputsStoreSelect=$(element).find("#inputsStoreSelect"),$storeSelector=$("#container"),$storeClose=$storeSelector.find(".close"),$objTabItem=$("#cfStock .tab").find("li"),$dataAreas=$("#cfStock").find(".mc"),$areaList=$dataAreas.find(".area-list");$cookieStore.get("receiver")?scope.receiver=$cookieStore.get("receiver"):scope.receiver={name:"",mobile:"",city:"",room:""};var stockHide=function(){$storeSelector.removeClass("hover"),$storeClose.hide()},stockShow=function(){$storeSelector.addClass("hover"),$storeClose.show()},tabShow=function(e){$objTabItem.removeClass("curr"),$objTabItem.eq(e).addClass("curr")},dataAreaShow=function(e){$dataAreas.hide(),$dataAreas.eq(e).show()};scope.paracont="获取验证码",scope.paraclass="but_null";var second=59,timePromise=void 0;scope.getActiveCode=function(e){$http.get("http://app.yfq.cn:3099/api/getActiveCode/"+e).success(function(e){""==e&&(timePromise=$interval(function(){second<=0?($interval.cancel(timePromise),timePromise=void 0,second=59,scope.paracont="重发验证码",scope.paraclass="but_null"):(scope.paracont=second+"秒后可重发",scope.paraclass="not but_null",second--)},1e3,100))})},scope.checkActiveCode=function(){return scope.checkoutForm.activeCode.$valid?checkMobileCode(scope.activeCode)?checkMobileCode(scope.activeCode):($(".input-vcode").removeClass("weui-cell_success"),$(".input-vcode").addClass("weui-cell_warn"),!1):($(".input-vcode").addClass("weui-cell_warn"),!1)};var getArea=function(id,index,province,city,district){var url,thisHtml;url=0===index?"http://m.gd189fq.com/wap/comm/czCommonController/getRegion.html?need=province&key="+new Date:1===index?"http://m.gd189fq.com/wap/comm/czCommonController/getRegion.html?need=city&province="+encodeURI(province)+"&key="+new Date:2===index?"http://m.gd189fq.com/wap/comm/czCommonController/getRegion.html?need=district&province="+encodeURI(province)+"&city="+encodeURI(city)+"&key="+new Date:"http://m.gd189fq.com/wap/comm/czCommonController/getRegion.html?need=street&province="+encodeURI(province)+"&city="+encodeURI(city)+"&district="+encodeURI(district)+"&key="+new Date,$areaList.eq(index).html(""),$.ajax({dataType:"jsonp",type:"get",contentType:"application/json; charset=utf-8",url:url,jsonp:"callback",jsonpCallback:"getAreaList",success:function(json){$.each(eval(json),function(e,t){t.name.length>6?$areaList.eq(index).append("<li data-value="+t.name+" class='long-area'><a data-value="+t.name+">"+t.name+"</a></li>"):$areaList.eq(index).append("<li data-value="+t.name+"><a data-value="+t.name+">"+t.name+"</a></li>")})},error:function(e){alert("获取地址信息失败，请联系客服")}})};$inputsStoreSelect.click(function(){getArea(0,0,"","",""),stockShow(),dataAreaShow(0),tabShow(0),writebdLog(scope.category,"_Address","渠道号",scope.gh)}),$objTabItem.click(function(e){var t=$(this).index();return 0===t?stockHide():(tabShow(t-1),dataAreaShow(t-1)),!1}),$areaList.on("click","li",function(e){var t,o,r=$(this);return o=r.parentsUntil("#cfStock",".mc").data("area"),t=r.find("a").data("value"),0===o?(dataAreaShow(1),tabShow(1),value1=r.data("value"),getArea(t,1,value1,"","")):1===o?(dataAreaShow(2),tabShow(2),value2=r.data("value"),getArea(t,2,value1,value2,"")):2===o?(dataAreaShow(3),tabShow(3),value3=r.data("value"),getArea(t,3,value1,value2,value3)):3===o&&(value4=r.data("value"),stockHide(),$("#store-text").find("div").html(value1+value2+value3+value4),scope.receiver.city=value1+value2+value3+value4),scope.$apply(),!1}),scope.checkAddress=function(){return $("#receiverAddress").find(".weui_cell").removeClass("weui-cell_warn"),scope.checkoutForm.reciverName.$valid?scope.checkoutForm.receiverMobile.$valid?scope.checkoutForm.receiverCity.$valid?scope.checkoutForm.receiverRoom.$valid?($cookieStore.put("receiver",scope.receiver),!0):($(".input-room").addClass("weui-cell_warn"),!1):($(".input-city").addClass("weui-cell_warn"),!1):($(".input-mobile").addClass("weui-cell_warn"),!1):($(".input-name").addClass("weui-cell_warn"),!1)}}}}]),app.directive("redirectUrl",["$location",function(e){return{restrict:"E",templateUrl:"modules/redirectUrl/redirectUrl.html",link:function(t,o,r){t.redirectUrl="http://"+e.host()+e.url()}}}]),app.directive("simType",["$http","$compile",function(e,t){return{restrict:"E",templateUrl:"modules/simType/simType.html",link:function(t,o,r){t.simTitle=r.title,t["class"]=r.addClass,t.size=r.size,e.get("/data/simType.json").success(function(e){t.simList=e,t.simItem=e[0]}),t.$root.setSimType=function(e,o,r){e.preventDefault();var n=$(".sim-type-lists").find(".item-box");return!n.hasClass("disabled")&&(n.removeClass("curr"),n.eq(o).addClass("curr"),t.simItem=r,t.$root.Overlay.close(),void writebdLog(t.category,"_SelectCardType","渠道号",t.gh))},t.showOverLay=function(e){var o=$("#"+e).html();t.$root.Overlay.open(o,t.simList),writebdLog(t.category,"_CardTypeIntro","渠道号",t.gh)}}}}]),app.directive("spcTitle",function(){return{restrict:"E",replace:!0,scope:{},templateUrl:"modules/spcTitle/spcTitle.html",link:function(e,t,o){e.mainTitle=o.mainTitle,e.subTitle=o.subTitle,e.arrow=o.arrow}}}),app.directive("stepBuy",function(){return{restrict:"E",replace:!0,templateUrl:"modules/stepBuy/stepBuy.html",link:function(e,t,o){var r=$(".content-scrollable"),n=$("#stepBuy"),i=n.find(".progressbar-text");t.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){t.removeClass("bounceIn animated")}),function(){r.bind("scrollstart",function(){t.addClass("active")}),r.bind("scrollstop",function(e){t.removeClass("active")}),n.mouseover(function(){t.addClass("active")}),n.mouseout(function(){t.removeClass("active")})}(),e.stepClick=function(e){var t;"查看<br>详情"==i.html()?(i.html("立即<br>购买"),t=$("#imgStart")):(i.html("查看<br>详情"),t=$("#phoneTypes")),r.animate({scrollTop:t.offset().top-r.offset().top+r.scrollTop()})}}}}),app.directive("timer",["$interval",function(e){return{restrict:"E",replace:!0,templateUrl:"modules/timer/timer.html",link:function(t,o,r){function n(){var e=new Date,o=e.getFullYear()+"/"+(e.getMonth()+1)+"/"+e.getDate()+" 23:59:00",r=new Date(o),n=new Date,i=r.getTime()-n.getTime(),e=Math.floor(i/1e3/60/60/24),s=Math.floor(i/1e3/60/60%24),a=Math.floor(i/1e3/60%60),l=Math.floor(i/1e3%60);t.timer="<i>"+s+"</i><sub>时</sub><i>"+a+"</i><sub>分</sub><i>"+l+"</i><sub>秒</sub>"}e(n,1e3)}}}]),app.directive("dropzone",function(){return{restrict:"C",link:function(e,t,o){var r={url:"http://www.cz.com:8082/uploadFile.html?decorator=blank",maxFilesize:100,paramName:"uploadfile",maxThumbnailFilesize:10,parallelUploads:1,thumbnailWidth:300,thumbnailHeight:200,autoProcessQueue:!0},n={addedfile:function(t){e.file=t,null!=this.files[1]&&this.removeFile(this.files[0]),e.$apply(function(){e.fileAdded=!0})},success:function(e,t){console.log(t);var r=$("#"+o.id+"-input");r.val(t)}},i=new Dropzone(t[0],r);angular.forEach(n,function(e,t){i.on(t,e)}),e.processDropzone=function(){i.processQueue()},e.resetDropzone=function(){i.removeAllFiles()}}}}),app.directive("userTrack",function(){return{restrict:"E",replace:!1,link:function(e,t,o){e.userTrack=function(t){writebdLog(e.category,t,"渠道号",e.gh)}}}}),app.config(["$stateProvider","$locationProvider",function(e,t){e.state("about",{url:"/about",templateUrl:"pages/about/about.html",controller:"aboutController"})}]).controller("aboutController",["$scope","$rootScope","$location",function(e,t,o){}]),app.config(["$stateProvider","$locationProvider",function(e,t){e.state("paySuccess",{url:"/pay/:status",templateUrl:"pages/payStatus/payStatus.html",controller:"payController"})}]).controller("payController",["$scope","$rootScope","$location","$stateParams",function(e,t,o,r){e.payStatus=r.status,e.orderNo=o.search().orderNo}]),app.config(["$stateProvider","$locationProvider",function(e,t){e.state("payment",{url:"/payment",templateUrl:"pages/payment/payment.html",controller:"paymentController"})}]).controller("paymentController",["$scope","$rootScope","$location","$stateParams","$cookieStore","$http",function(e,t,o,r,n,i){e.orderNo=o.search().orderNo,e.orderNo?(e.category="_IndexSearch",i.get("http://app.yfq.cn:3099/api/getSalesOrder/"+e.orderNo).success(function(t){var o,r,n,i,s;$.each(t.items,function(e,t){t.productName.indexOf("月")==-1?(o=t.productId,n=t.salesOrder.color,i=t.salesOrder.buyMobile,s=t.salesOrder.totalAmount):r=t.productId}),e.orderState={machineId:o,productId:r,color:n,phoneNumber:i,price:s,category:e.category},e.receiver={name:t.salesOrder.recieverName,mobile:t.salesOrder.recieverMobile,city:t.salesOrder.receiverCity,room:t.salesOrder.receiverRoom}})):(e.orderState=n.get("orderState"),e.category=e.orderState.category)}]),app.directive("phoneQuery",["$cookieStore",function(e){return{restrict:"E",templateUrl:"modules/common/phoneQuery/phoneQuery.html",controller:"phoneQueryController",link:function(t,o,r){function n(){return!!t.checkoutForm.phoneNumber.$valid}$container=$("#container");var i;if(e.get("orderState")){var s=e.get("orderState");t.phoneNumber=s.phoneNumber}t.npHide=function(){$container.removeClass("phone-query"),$("#numberPanel").hide()},t.npShow=function(e){$container.addClass("phone-query"),$("#numberPanel").show(),i=e,"numberPanel"==e&&writebdLog(t.category,"_CuteNumber","渠道号",t.gh);
},t.setNumberItem=function(e,o){e.preventDefault(),t.phoneNumber=o.n;var r=$(e.currentTarget);r.parent().siblings().children().removeClass("curr"),r.addClass("curr"),writebdLog(t.category,"_SelectNumber","渠道号",t.gh)},t.getNumber=function(){if(n()){t.npHide();var e=$("#phoneQuery"),o=$(".content-scrollable");o.animate({scrollTop:e.offset().top-o.offset().top+o.scrollTop()})}else t.$root.dialog.open("","请您选择号码！")}}}}]).controller("phoneQueryController",["$scope","$cookieStore","$http","$compile",function($scope,$cookieStore,$http){$scope.phoneData=new Array,$scope.phoneFilter=function(e){var t=new Array;""!=e?($.each($scope.phoneData,function(o,r){r.n.indexOf(e)>=0&&t.push(r)}),$scope.filterData=t):$scope.filterData=$scope.phoneData,$scope.items=$scope.filterData.slice(0,$scope.pageSize),$scope.dataInit()},$scope.inputNumber=function(e){""!=e&&writebdLog($scope.category,"_InputNumber","渠道号",$scope.gh)},$http.jsonp("http://m.gd189fq.com/wap/taokafanghaoNew/fetchNumber.html?callback=JSON_CALLBACK").success(function(data,status,headers,config){$.each(eval(data),function(e,t){t.t||$scope.phoneData.push(t)}),$scope.dataInit=function(){$scope.selPage=1,$scope.pageList=[],$scope.pages=Math.ceil($scope.filterData.length/$scope.pageSize),$scope.newPages=$scope.pages>5?5:$scope.pages;for(var e=0;e<$scope.newPages;e++)$scope.pageList.push(e+1)},$scope.filterData=$scope.phoneData,$scope.pageSize=10,$scope.setData=function(){$scope.items=$scope.filterData.slice($scope.pageSize*($scope.selPage-1),$scope.selPage*$scope.pageSize)},$scope.items=$scope.filterData.slice(0,$scope.pageSize),$scope.dataInit(),$scope.selectPage=function(e){if(!(e<1||e>$scope.pages)){if(e>2){for(var t=[],o=e-3;o<(e+2>$scope.pages?$scope.pages:e+2);o++)t.push(o+1);$scope.pageList=t}$scope.selPage=e,$scope.setData(),$scope.isActivePage(e)}},$scope.isActivePage=function(e){return $scope.selPage==e},$scope.Previous=function(){$scope.selectPage($scope.selPage-1)},$scope.Next=function(){$scope.selectPage($scope.selPage+1),writebdLog($scope.category,"_ChangeALot","渠道号",$scope.gh)}}).error(function(e,t,o,r){console.log(t)})}]),app.directive("toast",["$timeout",function(e){return{restrict:"E",templateUrl:"modules/common/toast/toast.html",link:function(t,o,r){var n=$("#loadingToast");t.$root.toast={open:function(){n.show(),e(function(){n.hide()},2e3)},close:function(){n.hide()}},t.$root.toast.close()}}}]),app.directive("flowCards",["$http",function(e){return{restrict:"E",templateUrl:"modules/recharge/flowCards/flowCards.html",link:function(t,o,r){var n=$(".flow-cards");t.getFlowCard=function(e,o){t.flowCard=o,n.slideUp()},t.$watch("receiverMobile",function(t,o,r){if(t!=o){var n=baseApiUri+"/getUserFlowCards/"+t;e.get(n).success(function(e){r.flowCards=e})}})}}}]),app.directive("flowUsing",[function(){return{restrict:"E",templateUrl:"modules/recharge/flowUsing/flowUsing.html",link:function(e,t,o){}}}]),app.directive("rechargeCards",["$http",function(e){return{restrict:"E",templateUrl:"modules/recharge/rechargeCards/rechargeCards.html",link:function(t,o,r){t.recharge=function(e,o){return e.stopPropagation(),!!$(e.currentTarget).hasClass("active")&&($("#loadingToast").show(),window.location.href="http://m.gd189fq.com/yfqcz/czOrdRechargeController.do?gotoPay&pid="+o+"&iccid="+t.flowCard.iccid,setTimeout(function(){$("#loadingToast").hide()},2e3),void 0)},e.get(baseApiUri+"/getFlowRechargeCard").success(function(e){t.rechargeCards=e})}}}]),app.config(["$stateProvider","$locationProvider",function(e,t){e.state("flow",{url:"/flow",templateUrl:"pages/flow/index/index.html",controller:"flowController"})}]).controller("flowController",["$scope","$rootScope","$location",function(e,t,o){}]),app.config(["$stateProvider","$locationProvider",function(e,t){e.state("flowRecharge",{url:"/flow/recharge",templateUrl:"pages/flowCard/recharge/recharge.html",controller:"flowRechargeController"})}]).controller("flowRechargeController",["$scope","$rootScope","$location",function(e,t,o){}]),app.config(["$stateProvider","$locationProvider",function(e,t){e.state("phoneIndexC",{url:"/phone/indexC",templateUrl:"pages/phone/index/index.html",controller:"pIndexController"})}]).controller("pIndexController",["$scope","$location",function(e,t){var o,r;o=t.path(),"/phone/indexC"==o&&(r="C"),"/phone/indexD"==o&&(r="D"),"/phone/indexD"==o&&(r="E"),e.appType=systemName+"_"+r+"_index",e.category=e.appType,writebdLog(e.category,"_Load","渠道号",e.gh),$("img.lazy").lazyload({effect:"fadeIn",skip_invisible:!1,container:$(".content-scrollable")}),e.getContact=function(){getMeiqia(),_MEIQIA("showPanel"),writebdLog(e.category,"_CustConsult","渠道号",e.gh)}}]),app.config(["$stateProvider","$locationProvider",function(e,t){e.state("flowCard",{url:"/fd/product",templateUrl:"pages/flowCard/flowCard-details/default/flowCard-details.html",controller:"fdProController"}).state("flowCardMifi",{url:"/fd/mifi",templateUrl:"pages/flowCard/flowCard-details/default/flowCard-details.html",controller:"fdProController"})}]).controller("fdProController",["$scope","$rootScope","$location",function(e,t,o){e.appType=systemName+"_FlowPackage","/fd/mifi"==o.path()&&(e.appType=systemName+"_FlowPackage_MiFi"),e.category=e.appType,writebdLog(e.category,"_Load","渠道号",e.gh)}]),app.config(["$stateProvider","$locationProvider",function(e,t){e.state("flowCardIn",{url:"/fd/fds/:appType",templateUrl:"pages/flowCard/flowCard-details/in/flowCard-details.html",controller:"fdProInController"})}]).controller("fdProInController",["$scope","$rootScope","$location",function(e,t,o){e.appType=systemName+"_FlowPackage",e.category=e.appType,writebdLog(e.category,"_Load","渠道号",e.gh)}]),app.config(["$stateProvider","$locationProvider",function(e,t){e.state("phoneIndexD",{url:"/phone/indexD",templateUrl:"pages/phone/index/D/index.html",controller:"pIndexController"})}]),app.config(["$stateProvider","$locationProvider",function(e,t){e.state("phoneIndexN",{url:"/phone/indexE",templateUrl:"pages/phone/index/E/index.html",controller:"pIndexController"})}]),app.config(["$stateProvider","$locationProvider",function(e,t){e.state("phone",{url:"/phones/:pageType/:phoneId",templateUrl:"pages/phone/phone-details/default/phone-details.html",controller:"pProController"})}]).controller("pProController",["$scope","$rootScope","$location","$stateParams","$http","Phone",function(e,t,o,r,n,i){e.phone=i.get({phoneId:r.phoneId},function(t){e.productId=t.productId,e.appType=systemName+"_"+r.pageType+"_"+t.phoneModel,e.category=e.appType,writebdLog(e.category,"_Load","渠道号",e.gh)}),$("img.lazy").lazyload({effect:"fadeIn",skip_invisible:!1,container:$(".content-scrollable")}),e.$watch("productId",function(e,t,o){e!=t&&n.get("/data/phones/"+o.productId+".json").success(function(e){o.phone=e,o.storage=e.storages[getIndex(e.storages,"curr")],o.pkg=e.packages[0],o.phoneType=e.phoneTypes[getIndex(e.phoneTypes,"curr")],o.mainPrice=e.price})}),androidInputBugFix()}]),app.config(["$stateProvider","$locationProvider",function(e,t){e.state("product",{url:"/pd/product",templateUrl:"pages/phoneCard/phoneCard-details/default/phoneCard-details.html",controller:"pdProController"})}]).controller("pdProController",["$scope","$rootScope","$location",function(e,t,o){e.appType="feeV2",e.category=e.appType}]);